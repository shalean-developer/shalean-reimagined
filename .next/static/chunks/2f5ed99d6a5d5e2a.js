(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(91918),a=e.i(25913),n=e.i(75157);let i=(0,a.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-button hover:shadow-lg hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-primary text-primary-foreground shadow-button hover:shadow-lg hover:-translate-y-0.5 hover:bg-primary/90",heroOutline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",cta:"bg-primary text-primary-foreground shadow-button hover:shadow-lg hover:-translate-y-1 hover:bg-primary/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-12 rounded-lg px-6",xl:"h-14 rounded-xl px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef(({className:e,variant:t,size:a,asChild:d=!1,...o},c)=>{let l=d?s.Slot:"button";return(0,r.jsx)(l,{className:(0,n.cn)(i({variant:t,size:a,className:e})),ref:c,...o})});d.displayName="Button",e.s(["Button",()=>d,"buttonVariants",()=>i])},15288,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(75157);let a=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));a.displayName="Card";let n=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let i=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("h3",{ref:a,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));i.displayName="CardTitle";let d=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("p",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let o=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>o,"CardDescription",()=>d,"CardHeader",()=>n,"CardTitle",()=>i])},43531,e=>{"use strict";let r=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>r],43531)},30699,e=>{"use strict";let r=(0,e.i(75254).default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);e.s(["Gift",()=>r],30699)},74886,e=>{"use strict";let r=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>r],74886)},35637,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(18566),a=e.i(30699),n=e.i(43531),i=e.i(74886),d=e.i(19455),o=e.i(15288),c=e.i(46696);function l(){let e=(0,s.useSearchParams)(),l=(0,s.useRouter)(),[u,m]=(0,t.useState)(!0),[h,x]=(0,t.useState)(null),[f,p]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{let r=e.get("reference");if(!r){p("Missing payment reference"),m(!1);return}let t=async(e=0)=>{try{let s=await fetch(`/api/voucher/get?reference=${r}`),a=await s.json();s.ok&&a.success&&a.voucher?(x({code:a.voucher.code,amount:a.voucher.amount,voucherType:a.voucher.voucherType}),m(!1)):e<5&&a.error?.includes("not found")?setTimeout(()=>t(e+1),1e3):(p(a.error||"Failed to retrieve voucher information"),m(!1))}catch(r){console.error("Error fetching voucher data:",r),e<5?setTimeout(()=>t(e+1),1e3):(p("An unexpected error occurred"),m(!1))}};setTimeout(()=>t(),500)},[e]),u)?(0,r.jsx)("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg text-center max-w-md",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading voucher information..."})]})}):f||!h?(0,r.jsx)("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg text-center max-w-md",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(a.Gift,{className:"w-10 h-10 text-red-600"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Voucher Error"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:f||"Unable to retrieve voucher information"}),(0,r.jsx)(d.Button,{onClick:()=>l.push("/dashboard/vouchers"),children:"Return to Vouchers"})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-4",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full",children:(0,r.jsxs)(o.Card,{children:[(0,r.jsxs)(o.CardHeader,{className:"text-center pb-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(n.Check,{className:"w-10 h-10 text-green-600"})}),(0,r.jsx)(o.CardTitle,{className:"text-2xl font-bold",children:"Voucher Purchased Successfully!"})]}),(0,r.jsxs)(o.CardContent,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"Your gift voucher has been created and is ready to use."}),(0,r.jsxs)("div",{className:"bg-primary/10 rounded-lg p-6 mb-4",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Voucher Code"}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,r.jsx)("code",{className:"text-2xl font-bold text-primary font-mono tracking-wider",children:h.code}),(0,r.jsx)(d.Button,{variant:"outline",size:"icon",onClick:()=>{h?.code&&(navigator.clipboard.writeText(h.code),v(!0),c.toast.success("Voucher code copied to clipboard!"),setTimeout(()=>v(!1),2e3))},className:"h-9 w-9",children:g?(0,r.jsx)(n.Check,{className:"h-4 w-4 text-green-600"}):(0,r.jsx)(i.Copy,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Amount:"}),(0,r.jsxs)("span",{className:"font-bold text-lg",children:["R",h.amount.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,r.jsx)("span",{className:"text-green-600 font-semibold",children:"Active"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Expiry:"}),(0,r.jsx)("span",{className:"font-semibold",children:"No expiry date"})]})]})]}),(0,r.jsxs)("div",{className:"pt-4 space-y-3",children:[(0,r.jsx)(d.Button,{className:"w-full",onClick:()=>l.push("/dashboard/vouchers"),children:"Go to Vouchers"}),(0,r.jsx)(d.Button,{variant:"outline",className:"w-full",onClick:()=>l.push("/"),children:"Return to Home"})]}),(0,r.jsx)("div",{className:"pt-4 border-t",children:(0,r.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["Share this code with the recipient. They can redeem it at"," ",(0,r.jsx)("span",{className:"font-semibold",children:"/dashboard/vouchers"})]})})]})]})})})}function u(){return(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg text-center max-w-md",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}),children:(0,r.jsx)(l,{})})}e.s(["default",()=>u])}]);