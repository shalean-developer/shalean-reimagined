(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var r=e.i(43476),a=e.i(71645),s=e.i(75157);let t=a.forwardRef(({className:e,...a},t)=>(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));t.displayName="Card";let l=a.forwardRef(({className:e,...a},t)=>(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));l.displayName="CardHeader";let i=a.forwardRef(({className:e,...a},t)=>(0,r.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));i.displayName="CardTitle";let d=a.forwardRef(({className:e,...a},t)=>(0,r.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let n=a.forwardRef(({className:e,...a},t)=>(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",e),...a}));n.displayName="CardContent",a.forwardRef(({className:e,...a},t)=>(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>t,"CardContent",()=>n,"CardDescription",()=>d,"CardHeader",()=>l,"CardTitle",()=>i])},31278,e=>{"use strict";let r=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],31278)},10204,e=>{"use strict";var r=e.i(43476),a=e.i(71645),s=e.i(48425),t=a.forwardRef((e,a)=>(0,r.jsx)(s.Primitive.label,{...e,ref:a,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));t.displayName="Label";var l=e.i(25913),i=e.i(75157);let d=(0,l.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=a.forwardRef(({className:e,...a},s)=>(0,r.jsx)(t,{ref:s,className:(0,i.cn)(d(),e),...a}));n.displayName=t.displayName,e.s(["Label",()=>n],10204)},30699,e=>{"use strict";let r=(0,e.i(75254).default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);e.s(["Gift",()=>r],30699)},74886,e=>{"use strict";let r=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>r],74886)},48161,e=>{"use strict";var r=e.i(47167),a=e.i(43476),s=e.i(71645),t=e.i(18566),l=e.i(15288),i=e.i(93479),d=e.i(10204),n=e.i(19455),c=e.i(31278),o=e.i(62031),m=e.i(30699),x=e.i(8402),h=e.i(74886),f=e.i(43531),p=e.i(46696),u=e.i(95187);let v=(0,u.createServerReference)("405a41acb66d8979595f53da92587b5a17cb0bbc23",u.callServer,void 0,u.findSourceMapURL,"getOrCreateReferralCode"),j=(0,u.createServerReference)("7099b4cf66cf8cd78382142420b505316587c18598",u.callServer,void 0,u.findSourceMapURL,"sendReferralInvites"),b=(0,u.createServerReference)("40841e9e069f82de9aa575f302add620cc9682bb9c",u.callServer,void 0,u.findSourceMapURL,"getReferralStats");var N=e.i(89464);function g(){(0,t.useSearchParams)();let[e,u]=(0,s.useState)(!0),[g,y]=(0,s.useState)(!1),[w,C]=(0,s.useState)(""),[k,R]=(0,s.useState)(""),[S,F]=(0,s.useState)(!1),[L,E]=(0,s.useState)(null),[I,U]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{u(!0);let e=await (0,N.getAuthenticatedUser)();if(!e.success||!e.email)return void u(!1);let r=e.email;U(r);let a=await v(r);a.success&&a.referralCode?C(a.referralCode):p.toast.error(a.error||"Failed to load referral code");let s=await b(r);s.success&&s.stats&&E(s.stats)}catch(e){console.error("Error loading referral code:",e),p.toast.error("An unexpected error occurred")}finally{u(!1)}})()},[]);let T=async()=>{let e=r.default.env.NEXT_PUBLIC_SITE_URL||"https://shalean.co.za",a=`${e}/booking/details?ref=${w}`;try{await navigator.clipboard.writeText(a),F(!0),p.toast.success("Referral link copied to clipboard!"),setTimeout(()=>F(!1),2e3)}catch(e){console.error("Failed to copy:",e),p.toast.error("Failed to copy link")}},P=e=>{let a=r.default.env.NEXT_PUBLIC_SITE_URL||"https://shalean.co.za",s=`${a}/booking/details?ref=${w}`,t=`Join me on Shalean Cleaning Services! Use my referral code ${w} to get R150 off your first booking. ${s}`,l="";switch(e){case"facebook":l=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(s)}`;break;case"messenger":l=`https://www.facebook.com/dialog/send?link=${encodeURIComponent(s)}&app_id=${r.default.env.NEXT_PUBLIC_FACEBOOK_APP_ID||""}`;break;case"twitter":l=`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}`;break;case"whatsapp":l=`https://wa.me/?text=${encodeURIComponent(t)}`}l&&window.open(l,"_blank","width=600,height=400")},B=async()=>{if(!k.trim())return void p.toast.error("Please enter at least one email address");let e=k.split(",").map(e=>e.trim()).filter(e=>e);if(0===e.length)return void p.toast.error("Please enter valid email addresses");try{if(y(!0),!I)return void p.toast.error("Please access the dashboard first");let r=await j(I,e,w);r.success?(p.toast.success(`Invitations sent to ${r.sent} friend${1!==r.sent?"s":""}!`),R("")):p.toast.error(r.error||"Failed to send invitations")}catch(e){console.error("Error sending invites:",e),p.toast.error("An unexpected error occurred")}finally{y(!1)}};return e?(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6 w-full max-w-full overflow-x-hidden",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold",children:"Refer & Earn"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Earn R150 ShaleanCred per friend referral"})]}),(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"flex items-center justify-center py-12",children:(0,a.jsx)(c.Loader2,{className:"w-8 h-8 animate-spin text-muted-foreground"})})})]}):I?(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6 w-full max-w-full overflow-x-hidden",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold",children:"Refer & Earn"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Earn R150 ShaleanCred per friend referral"})]}),(0,a.jsx)(l.Card,{className:"border-border",children:(0,a.jsxs)(l.CardContent,{className:"p-4 sm:p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"referral-code",className:"text-base font-medium",children:"Your Code:"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsx)(i.Input,{id:"referral-code",value:w,readOnly:!0,className:"bg-muted font-mono text-lg"}),(0,a.jsx)(n.Button,{onClick:T,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Check,{className:"w-4 h-4 mr-2"}),"Copied"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Copy,{className:"w-4 h-4 mr-2"}),"Copy Link"]})})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2",children:[(0,a.jsx)(n.Button,{onClick:()=>P("facebook"),className:"bg-[#1877F2] hover:bg-[#1877F2]/90 text-white",size:"sm",children:"Facebook"}),(0,a.jsx)(n.Button,{onClick:()=>P("messenger"),className:"bg-[#0084FF] hover:bg-[#0084FF]/90 text-white",size:"sm",children:"Messenger"}),(0,a.jsx)(n.Button,{onClick:()=>P("twitter"),className:"bg-black hover:bg-black/90 text-white",size:"sm",children:"X"}),(0,a.jsx)(n.Button,{onClick:()=>P("whatsapp"),className:"bg-[#25D366] hover:bg-[#25D366]/90 text-white",size:"sm",children:"WhatsApp"})]})]})}),(0,a.jsx)(l.Card,{className:"border-border",children:(0,a.jsx)(l.CardContent,{className:"p-4 sm:p-6 space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Label,{htmlFor:"invite-emails",className:"text-base font-medium",children:"Add email addresses:"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsx)(i.Input,{id:"invite-emails",type:"text",placeholder:"comma separated: friend1@mail.com,friend2@mail.com",value:k,onChange:e=>R(e.target.value),className:"flex-1"}),(0,a.jsx)(n.Button,{onClick:B,disabled:g||!k.trim(),className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):"Send Invites"})]})]})})}),(0,a.jsx)(l.Card,{className:"border-border",children:(0,a.jsxs)(l.CardContent,{className:"p-4 sm:p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"How it works"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,a.jsx)(o.Share2,{className:"w-6 h-6 text-primary"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm sm:text-base",children:["Spread the word with your unique code:"," ",(0,a.jsx)("span",{className:"font-mono font-semibold text-primary",children:w})]})})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,a.jsx)(m.Gift,{className:"w-6 h-6 text-primary"})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm sm:text-base",children:"Each friend that books their first Shalean clean gets R150 off"})})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,a.jsx)(x.Ticket,{className:"w-6 h-6 text-primary"})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm sm:text-base",children:"For each referral you earn R150 ShaleanCred"})})]})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)("a",{href:"/terms",className:"text-sm text-primary hover:underline",children:"T&C's apply."})})]})})]}):(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6 w-full max-w-full overflow-x-hidden",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold",children:"Refer & Earn"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Earn R150 ShaleanCred per friend referral"})]}),(0,a.jsx)(l.Card,{children:(0,a.jsxs)(l.CardContent,{className:"p-4 sm:p-6",children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Please log in to access the Refer & Earn program."}),(0,a.jsx)(n.Button,{onClick:()=>window.location.href="/login?redirect=/dashboard/refer",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Log In"})]})})]})}e.s(["default",()=>g],48161)}]);