(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(91918),a=e.i(25913),i=e.i(75157);let n=(0,a.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-button hover:shadow-lg hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-primary text-primary-foreground shadow-button hover:shadow-lg hover:-translate-y-0.5 hover:bg-primary/90",heroOutline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",cta:"bg-primary text-primary-foreground shadow-button hover:shadow-lg hover:-translate-y-1 hover:bg-primary/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-12 rounded-lg px-6",xl:"h-14 rounded-xl px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:r,size:a,asChild:o=!1,...d},l)=>{let c=o?s.Slot:"button";return(0,t.jsx)(c,{className:(0,i.cn)(n({variant:r,size:a,className:e})),ref:l,...d})});o.displayName="Button",e.s(["Button",()=>o,"buttonVariants",()=>n])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},95468,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],95468)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},63350,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(31278),i=e.i(95468),n=e.i(87316),o=e.i(3116),d=e.i(46897),l=e.i(72520);let c=(0,e.i(75254).default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=e.i(19455),m=e.i(95187);let x=(0,m.createServerReference)("401cf85d8d5dedf3f57a7ccf44feff6992cfc09233",m.callServer,void 0,m.findSourceMapURL,"getBooking");var h=e.i(45919),f=e.i(11795);function g(){let e=(0,s.useParams)(),m=(0,s.useRouter)(),g=(0,s.useSearchParams)(),b=e.bookingId,p="success"===g.get("payment"),[y,v]=(0,r.useState)(null),[j,N]=(0,r.useState)(!0),[k,w]=(0,r.useState)(null),[_,C]=(0,r.useState)(null),[S,B]=(0,r.useState)(null),R=async e=>{if(!e.paystack_reference)return e.total_amount||0;let t=(0,f.createClient)(),{data:r}=await t.from("bookings").select("total_amount").eq("paystack_reference",e.paystack_reference).in("payment_status",["paid","pending"]);return!r||r.length<=1?e.total_amount||0:r.reduce((e,t)=>e+(Number(t.total_amount)||0),0)};return((0,r.useEffect)(()=>{(async()=>{let e=(0,f.createClient)(),{data:{user:t}}=await e.auth.getUser();C(!!t)})(),b&&x(b).then(async e=>{e.success&&e.booking?(v(e.booking),B(await R(e.booking))):w(e.error||"Booking not found"),N(!1)})},[b]),j)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-muted/30",children:(0,t.jsx)(a.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):k||!y?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-muted/30",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Booking Not Found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:k||"The booking you are looking for does not exist."}),(0,t.jsx)(u.Button,{onClick:()=>m.push("/booking/details"),children:"Book Now"})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-muted/30",children:(0,t.jsx)("main",{className:"pb-16",children:(0,t.jsx)("div",{className:"container mx-auto px-4 md:px-6 pt-8 pb-16 max-w-2xl",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-8 md:p-12 text-center space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("div",{className:"w-20 h-20 rounded-full bg-green-100 flex items-center justify-center",children:(0,t.jsx)(i.CheckCircle2,{className:"w-12 h-12 text-green-600"})})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-foreground",children:p?"Payment Successful!":"Booking Confirmed!"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:p?"Your payment has been processed successfully and your booking is confirmed.":"Your booking has been successfully created. A confirmation email has been sent to your email address."})]}),(0,t.jsxs)("div",{className:"bg-muted/50 rounded-xl p-6 border border-border",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Booking Reference"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-foreground",children:y.booking_number})]}),(0,t.jsxs)("div",{className:"bg-muted/50 rounded-xl p-6 border border-border space-y-4 text-left",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(n.Calendar,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground mb-1",children:"Service Date & Time"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,h.format)(new Date(y.service_date),"EEEE, MMMM d, yyyy")}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(o.Clock,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:y.service_time})]})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(d.MapPin,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground mb-1",children:"Service Address"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[y.service_address,y.service_apt_unit&&`, ${y.service_apt_unit}`,(0,t.jsx)("br",{}),y.service_suburb,", ",y.service_city]})]})]}),(0,t.jsxs)("div",{className:"pt-4 border-t border-border",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-semibold text-foreground",children:"Service"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:y.service_type})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,t.jsx)("span",{className:"font-semibold text-foreground",children:"Total Paid"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-primary",children:["R",(S??y.total_amount).toFixed(2)]})]})]})]}),(0,t.jsxs)("div",{className:"pt-4 flex flex-col sm:flex-row gap-4 justify-center items-center",children:[(0,t.jsxs)(u.Button,{onClick:()=>m.push("/"),variant:"hero",size:"lg",className:"w-full sm:w-auto",children:["Return to Home",(0,t.jsx)(l.ArrowRight,{className:"ml-2 w-4 h-4"})]}),(0,t.jsxs)(u.Button,{onClick:()=>{_?m.push("/dashboard"):m.push("/login?redirect=/dashboard")},variant:"outline",size:"lg",className:"w-full sm:w-auto",children:[(0,t.jsx)(c,{className:"mr-2 w-4 h-4"}),"View Dashboard"]})]})]})})})})}function b(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}),children:(0,t.jsx)(g,{})})}e.s(["default",()=>b],63350)}]);