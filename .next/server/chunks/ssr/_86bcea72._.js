module.exports=[99570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(187),f=a.i(68114);let g=(0,e.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-button hover:shadow-lg hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-primary text-primary-foreground shadow-button hover:shadow-lg hover:-translate-y-0.5 hover:bg-primary/90",heroOutline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",cta:"bg-primary text-primary-foreground shadow-button hover:shadow-lg hover:-translate-y-1 hover:bg-primary/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-12 rounded-lg px-6",xl:"h-14 rounded-xl px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=c.forwardRef(({className:a,variant:c,size:e,asChild:h=!1,...i},j)=>{let k=h?d.Slot:"button";return(0,b.jsx)(k,{className:(0,f.cn)(g({variant:c,size:e,className:a})),ref:j,...i})});h.displayName="Button",a.s(["Button",()=>h,"buttonVariants",()=>g])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},33441,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441)},78138,a=>{"use strict";let b=(0,a.i(70106).default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);a.s(["Gift",()=>b],78138)},5151,a=>{"use strict";let b=(0,a.i(70106).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);a.s(["Copy",()=>b],5151)},10833,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(78138),f=a.i(33441),g=a.i(5151),h=a.i(99570),i=a.i(91119),j=a.i(23292);function k(){let a=(0,d.useSearchParams)(),k=(0,d.useRouter)(),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{let b=a.get("reference");if(!b){q("Missing payment reference"),m(!1);return}let c=async(a=0)=>{try{let d=await fetch(`/api/voucher/get?reference=${b}`),e=await d.json();d.ok&&e.success&&e.voucher?(o({code:e.voucher.code,amount:e.voucher.amount,voucherType:e.voucher.voucherType}),m(!1)):a<5&&e.error?.includes("not found")?setTimeout(()=>c(a+1),1e3):(q(e.error||"Failed to retrieve voucher information"),m(!1))}catch(b){console.error("Error fetching voucher data:",b),a<5?setTimeout(()=>c(a+1),1e3):(q("An unexpected error occurred"),m(!1))}};setTimeout(()=>c(),500)},[a]),l)?(0,b.jsx)("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg text-center max-w-md",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading voucher information..."})]})}):p||!n?(0,b.jsx)("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg text-center max-w-md",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(e.Gift,{className:"w-10 h-10 text-red-600"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Voucher Error"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:p||"Unable to retrieve voucher information"}),(0,b.jsx)(h.Button,{onClick:()=>k.push("/dashboard/vouchers"),children:"Return to Vouchers"})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-4",children:(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{className:"text-center pb-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(f.Check,{className:"w-10 h-10 text-green-600"})}),(0,b.jsx)(i.CardTitle,{className:"text-2xl font-bold",children:"Voucher Purchased Successfully!"})]}),(0,b.jsxs)(i.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Your gift voucher has been created and is ready to use."}),(0,b.jsxs)("div",{className:"bg-primary/10 rounded-lg p-6 mb-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Voucher Code"}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,b.jsx)("code",{className:"text-2xl font-bold text-primary font-mono tracking-wider",children:n.code}),(0,b.jsx)(h.Button,{variant:"outline",size:"icon",onClick:()=>{n?.code&&(navigator.clipboard.writeText(n.code),s(!0),j.toast.success("Voucher code copied to clipboard!"),setTimeout(()=>s(!1),2e3))},className:"h-9 w-9",children:r?(0,b.jsx)(f.Check,{className:"h-4 w-4 text-green-600"}):(0,b.jsx)(g.Copy,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Amount:"}),(0,b.jsxs)("span",{className:"font-bold text-lg",children:["R",n.amount.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,b.jsx)("span",{className:"text-green-600 font-semibold",children:"Active"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Expiry:"}),(0,b.jsx)("span",{className:"font-semibold",children:"No expiry date"})]})]})]}),(0,b.jsxs)("div",{className:"pt-4 space-y-3",children:[(0,b.jsx)(h.Button,{className:"w-full",onClick:()=>k.push("/dashboard/vouchers"),children:"Go to Vouchers"}),(0,b.jsx)(h.Button,{variant:"outline",className:"w-full",onClick:()=>k.push("/"),children:"Return to Home"})]}),(0,b.jsx)("div",{className:"pt-4 border-t",children:(0,b.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["Share this code with the recipient. They can redeem it at"," ",(0,b.jsx)("span",{className:"font-semibold",children:"/dashboard/vouchers"})]})})]})]})})})}function l(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg text-center max-w-md",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}),children:(0,b.jsx)(k,{})})}a.s(["default",()=>l])}];

//# sourceMappingURL=_86bcea72._.js.map