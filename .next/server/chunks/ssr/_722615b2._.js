module.exports=[99570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(187),f=a.i(68114);let g=(0,e.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-button hover:shadow-lg hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-primary text-primary-foreground shadow-button hover:shadow-lg hover:-translate-y-0.5 hover:bg-primary/90",heroOutline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",cta:"bg-primary text-primary-foreground shadow-button hover:shadow-lg hover:-translate-y-1 hover:bg-primary/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-12 rounded-lg px-6",xl:"h-14 rounded-xl px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=c.forwardRef(({className:a,variant:c,size:e,asChild:h=!1,...i},j)=>{let k=h?d.Slot:"button";return(0,b.jsx)(k,{className:(0,f.cn)(g({variant:c,size:e,className:a})),ref:j,...i})});h.displayName="Button",a.s(["Button",()=>h,"buttonVariants",()=>g])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},45536,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(91119);function f(){let[a,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(null),m=async()=>{h(!0),j(null),l(null);try{let a=await fetch("/api/admin/fix-duplicate-codes"),b=await a.json();a.ok||l(b.error||"Failed to check duplicates"),j({type:"check",data:b})}catch(a){l(a instanceof Error?a.message:"Unknown error occurred")}finally{h(!1)}},n=async()=>{f(!0),j(null),l(null);try{let a=await fetch("/api/admin/fix-duplicate-codes",{method:"POST"}),b=await a.json();a.ok||l(b.error||"Failed to fix duplicates"),j({type:"fix",data:b})}catch(a){l(a instanceof Error?a.message:"Unknown error occurred")}finally{f(!1)}};return(0,b.jsx)("div",{className:"container mx-auto py-10 max-w-4xl",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Fix Duplicate Referral Codes"}),(0,b.jsx)(e.CardDescription,{children:"Find and fix duplicate referral codes. Each referral code should be unique to one user."})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(d.Button,{onClick:m,disabled:g,variant:"outline",children:g?"Checking...":"Check for Duplicates"}),(0,b.jsx)(d.Button,{onClick:n,disabled:a||g,children:a?"Fixing...":"Fix Duplicates"})]}),k&&(0,b.jsxs)("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-md",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-destructive",children:"Error:"}),(0,b.jsx)("p",{className:"text-sm text-destructive/80",children:k})]}),i&&(0,b.jsxs)("div",{className:"space-y-4",children:["check"===i.type&&i.data.success&&(0,b.jsx)(b.Fragment,{children:i.data.duplicateCount>0?(0,b.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-yellow-800 mb-2",children:["Found ",i.data.duplicateCount," duplicate referral code(s)"]}),i.data.duplicates.map((a,c)=>(0,b.jsxs)("div",{className:"mt-3 p-3 bg-white rounded border border-yellow-300",children:[(0,b.jsxs)("p",{className:"text-sm font-semibold",children:["Code: ",a.code]}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:["Used by ",a.count," profile(s):"]}),(0,b.jsx)("ul",{className:"mt-1 space-y-1",children:a.profiles.map((a,c)=>(0,b.jsxs)("li",{className:"text-xs",children:["• ",a.email," (created: ",new Date(a.created_at).toLocaleString(),")"]},c))})]},c))]}):(0,b.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-md",children:(0,b.jsx)("p",{className:"text-sm font-medium text-green-800",children:"✅ No duplicate referral codes found!"})})}),"fix"===i.type&&i.data.success&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-md",children:(0,b.jsx)("p",{className:"text-sm font-medium text-green-800 mb-2",children:i.data.message})}),i.data.fixed&&i.data.fixed.length>0&&(0,b.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Fixed Profiles:"}),i.data.fixed.map((a,c)=>(0,b.jsx)("div",{className:"mt-2 text-sm",children:a.success?(0,b.jsx)("div",{className:"text-green-700",children:(0,b.jsxs)("p",{children:["✅ ",a.email,": ",a.oldCode," → ",a.newCode]})}):(0,b.jsx)("div",{className:"text-red-700",children:(0,b.jsxs)("p",{children:["❌ ",a.email,": Failed to fix - ",a.error]})})},c))]}),i.data.duplicates&&i.data.duplicates.length>0&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-md",children:[(0,b.jsx)("p",{className:"text-sm font-medium mb-2",children:"Duplicate Details:"}),i.data.duplicates.map((a,c)=>(0,b.jsxs)("div",{className:"mt-2 text-sm",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Code:"})," ",a.code]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Count:"})," ",a.count]})]},c))]})]}),(0,b.jsxs)("div",{className:"p-4 bg-muted rounded-md",children:[(0,b.jsx)("p",{className:"text-sm font-medium mb-2",children:"Full Result:"}),(0,b.jsx)("pre",{className:"text-xs overflow-auto bg-background p-3 rounded border",children:JSON.stringify(i.data,null,2)})]})]})]})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=_722615b2._.js.map