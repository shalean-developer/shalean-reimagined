{"version":3,"sources":["../../../../app/booking/submit/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { useBookingFormContext } from '../book/context/BookingFormContext';\r\nimport { getServices } from '../quote/actions';\r\nimport { getServiceSlugById } from '@/lib/utils/slug';\r\n\r\nexport default function BookingSubmitPage() {\r\n  const router = useRouter();\r\n  const { formData } = useBookingFormContext();\r\n\r\n  // Fetch services\r\n  const { data: services = [] } = useQuery({\r\n    queryKey: ['services'],\r\n    queryFn: getServices,\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n\r\n  // Redirect to slugged URL if service is selected, otherwise redirect to details\r\n  useEffect(() => {\r\n    if (services.length > 0) {\r\n      if (formData.serviceId) {\r\n        const slug = getServiceSlugById(services, formData.serviceId);\r\n        if (slug) {\r\n          router.replace(`/booking/submit/${slug}`);\r\n        } else {\r\n          router.replace('/booking/details');\r\n        }\r\n      } else {\r\n        router.replace('/booking/details');\r\n      }\r\n    }\r\n  }, [formData.serviceId, services, router]);\r\n\r\n  return null; // Will redirect\r\n}\r\n\r\n"],"names":[],"mappings":"uCAEA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,UAAE,CAAQ,CAAE,CAAG,CAAA,EAAA,EAAA,qBAAA,AAAqB,IAGpC,CAAE,KAAM,EAAW,EAAE,CAAE,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,CACvC,SAAU,CAAC,WAAW,CACtB,QAAS,EAAA,WAAW,CACpB,UAAW,GACb,CADiB,EAmBjB,GAnBsB,GAItB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,EAAS,MAAM,CAAG,EACpB,CADuB,EACnB,EAAS,SAAS,CAAE,CACtB,IAAM,EAAO,CAAA,EAAA,EAAA,kBAAA,AAAkB,EAAC,EAAU,EAAS,SAAS,EACxD,EACF,EAAO,EADC,KACM,CAAC,CAAC,gBAAgB,EAAE,EAAA,CAAM,EAExC,EAAO,OAAO,CAAC,mBAEnB,MACE,CADK,CACE,OAAO,CAAC,mBAGrB,EAAG,CAAC,EAAS,SAAS,CAAE,EAAU,EAAO,EAElC,IACT,EADe,gBAAgB"}