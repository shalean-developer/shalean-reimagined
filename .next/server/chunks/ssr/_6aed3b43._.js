module.exports=[99570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(187),f=a.i(68114);let g=(0,e.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-button hover:shadow-lg hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-primary text-primary-foreground shadow-button hover:shadow-lg hover:-translate-y-0.5 hover:bg-primary/90",heroOutline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",cta:"bg-primary text-primary-foreground shadow-button hover:shadow-lg hover:-translate-y-1 hover:bg-primary/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-12 rounded-lg px-6",xl:"h-14 rounded-xl px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=c.forwardRef(({className:a,variant:c,size:e,asChild:h=!1,...i},j)=>{let k=h?d.Slot:"button";return(0,b.jsx)(k,{className:(0,f.cn)(g({variant:c,size:e,className:a})),ref:j,...i})});h.displayName="Button",a.s(["Button",()=>h,"buttonVariants",()=>g])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},67453,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],67453)},32860,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],32860)},79115,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(96221),f=a.i(67453),g=a.i(41675),h=a.i(41710),i=a.i(24987),j=a.i(32860);let k=(0,a.i(70106).default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var l=a.i(99570),m=a.i(5050);let n=(0,m.createServerReference)("401cf85d8d5dedf3f57a7ccf44feff6992cfc09233",m.callServer,void 0,m.findSourceMapURL,"getBooking");var o=a.i(72228),p=a.i(95445);function q(){let a=(0,d.useParams)(),m=(0,d.useRouter)(),q=(0,d.useSearchParams)(),r=a.bookingId,s="success"===q.get("payment"),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null),D=async a=>{if(!a.paystack_reference)return a.total_amount||0;let b=(0,p.createClient)(),{data:c}=await b.from("bookings").select("total_amount").eq("paystack_reference",a.paystack_reference).in("payment_status",["paid","pending"]);return!c||c.length<=1?a.total_amount||0:c.reduce((a,b)=>a+(Number(b.total_amount)||0),0)};return((0,c.useEffect)(()=>{(async()=>{let a=(0,p.createClient)(),{data:{user:b}}=await a.auth.getUser();A(!!b)})(),r&&n(r).then(async a=>{a.success&&a.booking?(u(a.booking),C(await D(a.booking))):y(a.error||"Booking not found"),w(!1)})},[r]),v)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-muted/30",children:(0,b.jsx)(e.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):x||!t?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-muted/30",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Booking Not Found"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:x||"The booking you are looking for does not exist."}),(0,b.jsx)(l.Button,{onClick:()=>m.push("/booking/details"),children:"Book Now"})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-muted/30",children:(0,b.jsx)("main",{className:"pb-16",children:(0,b.jsx)("div",{className:"container mx-auto px-4 md:px-6 pt-8 pb-16 max-w-2xl",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-8 md:p-12 text-center space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("div",{className:"w-20 h-20 rounded-full bg-green-100 flex items-center justify-center",children:(0,b.jsx)(f.CheckCircle2,{className:"w-12 h-12 text-green-600"})})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-foreground",children:s?"Payment Successful!":"Booking Confirmed!"}),(0,b.jsx)("p",{className:"text-lg text-muted-foreground",children:s?"Your payment has been processed successfully and your booking is confirmed.":"Your booking has been successfully created. A confirmation email has been sent to your email address."})]}),(0,b.jsxs)("div",{className:"bg-muted/50 rounded-xl p-6 border border-border",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Booking Reference"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-foreground",children:t.booking_number})]}),(0,b.jsxs)("div",{className:"bg-muted/50 rounded-xl p-6 border border-border space-y-4 text-left",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(g.Calendar,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-1",children:"Service Date & Time"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,o.format)(new Date(t.service_date),"EEEE, MMMM d, yyyy")}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(h.Clock,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:t.service_time})]})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(i.MapPin,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-1",children:"Service Address"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.service_address,t.service_apt_unit&&`, ${t.service_apt_unit}`,(0,b.jsx)("br",{}),t.service_suburb,", ",t.service_city]})]})]}),(0,b.jsxs)("div",{className:"pt-4 border-t border-border",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-semibold text-foreground",children:"Service"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:t.service_type})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,b.jsx)("span",{className:"font-semibold text-foreground",children:"Total Paid"}),(0,b.jsxs)("span",{className:"text-lg font-bold text-primary",children:["R",(B??t.total_amount).toFixed(2)]})]})]})]}),(0,b.jsxs)("div",{className:"pt-4 flex flex-col sm:flex-row gap-4 justify-center items-center",children:[(0,b.jsxs)(l.Button,{onClick:()=>m.push("/"),variant:"hero",size:"lg",className:"w-full sm:w-auto",children:["Return to Home",(0,b.jsx)(j.ArrowRight,{className:"ml-2 w-4 h-4"})]}),(0,b.jsxs)(l.Button,{onClick:()=>{z?m.push("/dashboard"):m.push("/login?redirect=/dashboard")},variant:"outline",size:"lg",className:"w-full sm:w-auto",children:[(0,b.jsx)(k,{className:"mr-2 w-4 h-4"}),"View Dashboard"]})]})]})})})})}function r(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}),children:(0,b.jsx)(q,{})})}a.s(["default",()=>r],79115)}];

//# sourceMappingURL=_6aed3b43._.js.map