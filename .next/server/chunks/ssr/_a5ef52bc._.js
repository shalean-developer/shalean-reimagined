module.exports=[96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},70430,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(187),g=a.i(68114);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],70430)},78138,a=>{"use strict";let b=(0,a.i(70106).default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);a.s(["Gift",()=>b],78138)},5151,a=>{"use strict";let b=(0,a.i(70106).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);a.s(["Copy",()=>b],5151)},67947,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(91119),f=a.i(66718),g=a.i(70430),h=a.i(99570),i=a.i(96221),j=a.i(53569),k=a.i(78138),l=a.i(76971),m=a.i(5151),n=a.i(33441),o=a.i(23292),p=a.i(5050);let q=(0,p.createServerReference)("40c280e4472d77247d064fde473e4660ba84d97e60",p.callServer,void 0,p.findSourceMapURL,"getOrCreateReferralCode"),r=(0,p.createServerReference)("70bb8d271ef08c3d35598898e6acef663b01286a3b",p.callServer,void 0,p.findSourceMapURL,"sendReferralInvites"),s=(0,p.createServerReference)("40b898d280ce8de58d611013704a50e39abcdee454",p.callServer,void 0,p.findSourceMapURL,"getReferralStats");var t=a.i(96616);function u(){(0,d.useSearchParams)();let[a,p]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{p(!0);let a=await (0,t.getAuthenticatedUser)();if(!a.success||!a.email)return void p(!1);let b=a.email;F(b);let c=await q(b);c.success&&c.referralCode?x(c.referralCode):o.toast.error(c.error||"Failed to load referral code");let d=await s(b);d.success&&d.stats&&D(d.stats)}catch(a){console.error("Error loading referral code:",a),o.toast.error("An unexpected error occurred")}finally{p(!1)}})()},[]);let G=async()=>{let a=process.env.NEXT_PUBLIC_SITE_URL||"https://shalean.co.za",b=`${a}/booking/details?ref=${w}`;try{await navigator.clipboard.writeText(b),B(!0),o.toast.success("Referral link copied to clipboard!"),setTimeout(()=>B(!1),2e3)}catch(a){console.error("Failed to copy:",a),o.toast.error("Failed to copy link")}},H=a=>{let b=process.env.NEXT_PUBLIC_SITE_URL||"https://shalean.co.za",c=`${b}/booking/details?ref=${w}`,d=`Join me on Shalean Cleaning Services! Use my referral code ${w} to get R150 off your first booking. ${c}`,e="";switch(a){case"facebook":e=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(c)}`;break;case"messenger":e=`https://www.facebook.com/dialog/send?link=${encodeURIComponent(c)}&app_id=${process.env.NEXT_PUBLIC_FACEBOOK_APP_ID||""}`;break;case"twitter":e=`https://twitter.com/intent/tweet?text=${encodeURIComponent(d)}`;break;case"whatsapp":e=`https://wa.me/?text=${encodeURIComponent(d)}`}e&&window.open(e,"_blank","width=600,height=400")},I=async()=>{if(!y.trim())return void o.toast.error("Please enter at least one email address");let a=y.split(",").map(a=>a.trim()).filter(a=>a);if(0===a.length)return void o.toast.error("Please enter valid email addresses");try{if(v(!0),!E)return void o.toast.error("Please access the dashboard first");let b=await r(E,a,w);b.success?(o.toast.success(`Invitations sent to ${b.sent} friend${1!==b.sent?"s":""}!`),z("")):o.toast.error(b.error||"Failed to send invitations")}catch(a){console.error("Error sending invites:",a),o.toast.error("An unexpected error occurred")}finally{v(!1)}};return a?(0,b.jsxs)("div",{className:"space-y-4 sm:space-y-6 w-full max-w-full overflow-x-hidden",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold",children:"Refer & Earn"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Earn R150 ShaleanCred per friend referral"})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"flex items-center justify-center py-12",children:(0,b.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin text-muted-foreground"})})})]}):E?(0,b.jsxs)("div",{className:"space-y-4 sm:space-y-6 w-full max-w-full overflow-x-hidden",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold",children:"Refer & Earn"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Earn R150 ShaleanCred per friend referral"})]}),(0,b.jsx)(e.Card,{className:"border-border",children:(0,b.jsxs)(e.CardContent,{className:"p-4 sm:p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"referral-code",className:"text-base font-medium",children:"Your Code:"}),(0,b.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,b.jsx)(f.Input,{id:"referral-code",value:w,readOnly:!0,className:"bg-muted font-mono text-lg"}),(0,b.jsx)(h.Button,{onClick:G,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:A?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Check,{className:"w-4 h-4 mr-2"}),"Copied"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Copy,{className:"w-4 h-4 mr-2"}),"Copy Link"]})})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2",children:[(0,b.jsx)(h.Button,{onClick:()=>H("facebook"),className:"bg-[#1877F2] hover:bg-[#1877F2]/90 text-white",size:"sm",children:"Facebook"}),(0,b.jsx)(h.Button,{onClick:()=>H("messenger"),className:"bg-[#0084FF] hover:bg-[#0084FF]/90 text-white",size:"sm",children:"Messenger"}),(0,b.jsx)(h.Button,{onClick:()=>H("twitter"),className:"bg-black hover:bg-black/90 text-white",size:"sm",children:"X"}),(0,b.jsx)(h.Button,{onClick:()=>H("whatsapp"),className:"bg-[#25D366] hover:bg-[#25D366]/90 text-white",size:"sm",children:"WhatsApp"})]})]})}),(0,b.jsx)(e.Card,{className:"border-border",children:(0,b.jsx)(e.CardContent,{className:"p-4 sm:p-6 space-y-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"invite-emails",className:"text-base font-medium",children:"Add email addresses:"}),(0,b.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,b.jsx)(f.Input,{id:"invite-emails",type:"text",placeholder:"comma separated: friend1@mail.com,friend2@mail.com",value:y,onChange:a=>z(a.target.value),className:"flex-1"}),(0,b.jsx)(h.Button,{onClick:I,disabled:u||!y.trim(),className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):"Send Invites"})]})]})})}),(0,b.jsx)(e.Card,{className:"border-border",children:(0,b.jsxs)(e.CardContent,{className:"p-4 sm:p-6 space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:"How it works"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,b.jsx)(j.Share2,{className:"w-6 h-6 text-primary"})}),(0,b.jsx)("div",{children:(0,b.jsxs)("p",{className:"text-sm sm:text-base",children:["Spread the word with your unique code:"," ",(0,b.jsx)("span",{className:"font-mono font-semibold text-primary",children:w})]})})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,b.jsx)(k.Gift,{className:"w-6 h-6 text-primary"})}),(0,b.jsx)("div",{children:(0,b.jsx)("p",{className:"text-sm sm:text-base",children:"Each friend that books their first Shalean clean gets R150 off"})})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,b.jsx)(l.Ticket,{className:"w-6 h-6 text-primary"})}),(0,b.jsx)("div",{children:(0,b.jsx)("p",{className:"text-sm sm:text-base",children:"For each referral you earn R150 ShaleanCred"})})]})]}),(0,b.jsx)("div",{className:"pt-2",children:(0,b.jsx)("a",{href:"/terms",className:"text-sm text-primary hover:underline",children:"T&C's apply."})})]})})]}):(0,b.jsxs)("div",{className:"space-y-4 sm:space-y-6 w-full max-w-full overflow-x-hidden",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold",children:"Refer & Earn"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Earn R150 ShaleanCred per friend referral"})]}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 sm:p-6",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Please log in to access the Refer & Earn program."}),(0,b.jsx)(h.Button,{onClick:()=>window.location.href="/login?redirect=/dashboard/refer",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Log In"})]})})]})}a.s(["default",()=>u],67947)}];

//# sourceMappingURL=_a5ef52bc._.js.map