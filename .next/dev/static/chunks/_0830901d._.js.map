{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/27825/shalean-v2/shalean-reimagined/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"rounded-lg border bg-card text-card-foreground shadow-sm\", className)} {...props} />\r\n));\r\nCard.displayName = \"Card\";\r\n\r\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\r\n  ({ className, ...props }, ref) => (\r\n    <div ref={ref} className={cn(\"flex flex-col space-y-1.5 p-6\", className)} {...props} />\r\n  ),\r\n);\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\nconst CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\r\n  ({ className, ...props }, ref) => (\r\n    <h3 ref={ref} className={cn(\"text-2xl font-semibold leading-none tracking-tight\", className)} {...props} />\r\n  ),\r\n);\r\nCardTitle.displayName = \"CardTitle\";\r\n\r\nconst CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\r\n  ({ className, ...props }, ref) => (\r\n    <p ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\r\n  ),\r\n);\r\nCardDescription.displayName = \"CardDescription\";\r\n\r\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\r\n  ({ className, ...props }, ref) => <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />,\r\n);\r\nCardContent.displayName = \"CardContent\";\r\n\r\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\r\n  ({ className, ...props }, ref) => (\r\n    <div ref={ref} className={cn(\"flex items-center p-6 pt-0\", className)} {...props} />\r\n  ),\r\n);\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAAuD,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC5G,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,4DAA4D;QAAa,GAAG,KAAK;;;;;;;AAEhH,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OACjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;;AAGvF,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAChC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC;QAAG,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,sDAAsD;QAAa,GAAG,KAAK;;;;;;;AAG3G,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OACtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC;QAAE,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;;AAGrF,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAClC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAAQ,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAElG,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QACjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,8BAA8B;QAAa,GAAG,KAAK;;;;;;;AAGpF,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/27825/shalean-v2/shalean-reimagined/src/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Select = SelectPrimitive.Root;\r\n\r\nconst SelectGroup = SelectPrimitive.Group;\r\n\r\nconst SelectValue = SelectPrimitive.Value;\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n));\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n));\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n));\r\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className,\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\",\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n));\r\nSelectContent.displayName = SelectPrimitive.Content.displayName;\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label ref={ref} className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)} {...props} />\r\n));\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n));\r\nSelectItem.displayName = SelectPrimitive.Item.displayName;\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator ref={ref} className={cn(\"-mx-1 my-1 h-px bg-muted\", className)} {...props} />\r\n));\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;AAEA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,sOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,2KAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,6LAAC,gOAAS;YAAC,WAAU;;;;;;;;;;;MATnB;AAYN,qBAAqB,WAAW,GAAG,uLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,2KAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,6LAAC,sOAAW;YAAC,WAAU;;;;;;;;;;;MATrB;AAYN,uBAAuB,WAAW,GAAG,yLAAgC,CAAC,WAAW;AAEjF,MAAM,8BAAgB,2KAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,KAAK;YACL,WAAW,IAAA,4HAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,4HAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QAAC,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,0CAA0C;QAAa,GAAG,KAAK;;;;;;;AAEhH,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,6KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,gNAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,6KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,2KAAgB,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,kLAAyB;QAAC,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,4BAA4B;QAAa,GAAG,KAAK;;;;;;;AAEtG,gBAAgB,WAAW,GAAG,kLAAyB,CAAC,WAAW"}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/27825/shalean-v2/shalean-reimagined/app/dashboard/shaleancred/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { ChevronLeft, ChevronRight, Plus, Wallet } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { createClient } from '@/lib/supabase/client';\r\n\r\ninterface Transaction {\r\n  id: string;\r\n  date: string;\r\n  description: string;\r\n  amount: number;\r\n  type: 'credit' | 'debit';\r\n  transactionType: string;\r\n  paymentStatus: string;\r\n  balanceBefore: number;\r\n  balanceAfter: number;\r\n  paymentMethod?: string;\r\n}\r\n\r\nexport default function ShaleanCredPage() {\r\n  const [mounted, setMounted] = useState(false);\r\n  const [itemsPerPage, setItemsPerPage] = useState(25);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [balance, setBalance] = useState(0);\r\n  const [email, setEmail] = useState('');\r\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [totalItems, setTotalItems] = useState(0);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    \r\n    // Get email from authenticated user\r\n    const supabase = createClient();\r\n    supabase.auth.getUser().then(({ data: { user } }) => {\r\n      if (user?.email) {\r\n        setEmail(user.email);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const loadBalance = useCallback(async (userEmail: string) => {\r\n    if (!userEmail) return;\r\n    try {\r\n      const response = await fetch('/api/profile/balance');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (data.success) {\r\n          setBalance(data.balance || 0);\r\n        }\r\n      } else if (response.status === 401) {\r\n        console.error('Unauthorized - user not authenticated');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading balance:', error);\r\n    }\r\n  }, []);\r\n\r\n  const loadTransactions = useCallback(async (userEmail: string, page: number, limit: number) => {\r\n    if (!userEmail) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(\r\n        `/api/credit/transactions?page=${page}&limit=${limit}`\r\n      );\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (data.success) {\r\n          setTransactions(data.transactions || []);\r\n          setTotalItems(data.total || 0);\r\n        }\r\n      } else if (response.status === 401) {\r\n        console.error('Unauthorized - user not authenticated');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading transactions:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const checkPendingCredits = useCallback(async (userEmail: string) => {\r\n    if (!userEmail) return;\r\n    try {\r\n      const response = await fetch('/api/credit/retry', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({}),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        if (result.success && result.results && result.results.length > 0) {\r\n          const successCount = result.results.filter((r: any) => r.success).length;\r\n          if (successCount > 0) {\r\n            toast.success(`Credited ${successCount} pending purchase(s) to your account!`);\r\n            // Reload balance and transactions\r\n            loadBalance(userEmail);\r\n            loadTransactions(userEmail, currentPage, itemsPerPage);\r\n          }\r\n        }\r\n      } else if (response.status === 401) {\r\n        console.error('Unauthorized - user not authenticated');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error checking pending credits:', error);\r\n      // Silently fail - don't show error to user for background checks\r\n    }\r\n  }, [loadBalance, loadTransactions, currentPage, itemsPerPage]);\r\n\r\n  // Load data when email is available\r\n  useEffect(() => {\r\n    if (email) {\r\n      // Load balance first\r\n      loadBalance(email);\r\n      \r\n      // Load transactions\r\n      loadTransactions(email, currentPage, itemsPerPage);\r\n      \r\n      // Check for pending credits automatically (this runs in background)\r\n      checkPendingCredits(email);\r\n    }\r\n  }, [email, currentPage, itemsPerPage, loadBalance, loadTransactions, checkPendingCredits]);\r\n\r\n  // Set up periodic checking\r\n  useEffect(() => {\r\n    if (!email) return;\r\n\r\n    // Check periodically in case credits arrive later (every 30 seconds for 2 minutes)\r\n    let checkCount = 0;\r\n    const maxChecks = 4;\r\n    const intervalId = setInterval(() => {\r\n      checkCount++;\r\n      if (checkCount <= maxChecks) {\r\n        checkPendingCredits(email);\r\n        loadBalance(email); // Reload balance after each check\r\n        loadTransactions(email, currentPage, itemsPerPage); // Reload transactions\r\n      } else {\r\n        clearInterval(intervalId);\r\n      }\r\n    }, 30000); // Check every 30 seconds\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, [email, currentPage, itemsPerPage, loadBalance, loadTransactions, checkPendingCredits]);\r\n\r\n\r\n  const totalPages = Math.ceil(totalItems / itemsPerPage) || 1;\r\n  const startItem = totalItems === 0 ? 0 : (currentPage - 1) * itemsPerPage + 1;\r\n  const endItem = Math.min(currentPage * itemsPerPage, totalItems);\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-ZA', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n    });\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return <span className=\"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800\">Completed</span>;\r\n      case 'pending':\r\n        return <span className=\"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800\">Pending</span>;\r\n      case 'failed':\r\n        return <span className=\"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800\">Failed</span>;\r\n      default:\r\n        return <span className=\"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800\">{status}</span>;\r\n    }\r\n  };\r\n\r\n  const handlePreviousPage = () => {\r\n    if (currentPage > 1) {\r\n      const newPage = currentPage - 1;\r\n      setCurrentPage(newPage);\r\n      if (email) {\r\n        loadTransactions(email, newPage, itemsPerPage);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleNextPage = () => {\r\n    if (currentPage < totalPages) {\r\n      const newPage = currentPage + 1;\r\n      setCurrentPage(newPage);\r\n      if (email) {\r\n        loadTransactions(email, newPage, itemsPerPage);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4 sm:space-y-6 w-full max-w-full overflow-x-hidden\">\r\n      {/* Page Header */}\r\n      <div>\r\n        <h1 className=\"text-2xl sm:text-3xl md:text-4xl font-bold\">ShaleanCred</h1>\r\n      </div>\r\n\r\n      {/* Buy ShaleanCred Button and Balance Card */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4 items-start sm:items-center\">\r\n        {/* Buy ShaleanCred Button */}\r\n        <Button\r\n          variant=\"default\"\r\n          size=\"lg\"\r\n          className=\"bg-primary-light hover:bg-primary-light/90 text-primary font-semibold h-auto py-4 px-6 text-lg\"\r\n          onClick={() => {\r\n            window.location.href = '/dashboard/shaleancred/buy';\r\n          }}\r\n        >\r\n          <Plus className=\"h-5 w-5 mr-2\" />\r\n          Buy ShaleanCred\r\n        </Button>\r\n\r\n        {/* ShaleanCred Balance Card */}\r\n        <Card className=\"flex-1 sm:max-w-sm\">\r\n          <CardHeader className=\"pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              ShaleanCred Balance\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"flex items-center gap-3\">\r\n            <Wallet className=\"h-6 w-6 text-muted-foreground\" />\r\n            <span className=\"text-2xl font-bold\">R{balance.toFixed(2)}</span>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Pagination Controls */}\r\n      <div className=\"flex items-center justify-between\">\r\n        {/* Items per page selector */}\r\n        <div className=\"flex items-center gap-2\">\r\n          {mounted ? (\r\n            <Select\r\n              value={itemsPerPage.toString()}\r\n              onValueChange={(value) => {\r\n                const newItemsPerPage = Number(value);\r\n                setItemsPerPage(newItemsPerPage);\r\n                setCurrentPage(1);\r\n                if (email) {\r\n                  loadTransactions(email, 1, newItemsPerPage);\r\n                }\r\n              }}\r\n            >\r\n              <SelectTrigger className=\"w-[120px] h-9\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"10\">10 Items</SelectItem>\r\n                <SelectItem value=\"25\">25 Items</SelectItem>\r\n                <SelectItem value=\"50\">50 Items</SelectItem>\r\n                <SelectItem value=\"100\">100 Items</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          ) : (\r\n            <div className=\"w-[120px] h-9 flex items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm\">\r\n              <span>{itemsPerPage} Items</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Pagination */}\r\n        <div className=\"flex items-center gap-2\">\r\n          <Button\r\n            variant=\"default\"\r\n            size=\"sm\"\r\n            onClick={handlePreviousPage}\r\n            disabled={currentPage === 1}\r\n            className=\"h-9\"\r\n          >\r\n            <ChevronLeft className=\"h-4 w-4\" />\r\n          </Button>\r\n          <span className=\"text-sm text-muted-foreground px-2\">\r\n            {currentPage}\r\n          </span>\r\n          <Button\r\n            variant=\"default\"\r\n            size=\"sm\"\r\n            onClick={handleNextPage}\r\n            disabled={currentPage >= totalPages}\r\n            className=\"h-9\"\r\n          >\r\n            <ChevronRight className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Transaction History */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Transaction History</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {loading ? (\r\n            <div className=\"py-12 text-center\">\r\n              <p className=\"text-muted-foreground\">Loading transactions...</p>\r\n            </div>\r\n          ) : totalItems === 0 ? (\r\n            <div className=\"py-12 text-center\">\r\n              <p className=\"text-muted-foreground\">No transactions to display</p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full\">\r\n                  <thead>\r\n                    <tr className=\"border-b\">\r\n                      <th className=\"text-left py-3 px-4 font-semibold text-sm\">Date</th>\r\n                      <th className=\"text-left py-3 px-4 font-semibold text-sm\">Description</th>\r\n                      <th className=\"text-left py-3 px-4 font-semibold text-sm\">Type</th>\r\n                      <th className=\"text-right py-3 px-4 font-semibold text-sm\">Amount</th>\r\n                      <th className=\"text-right py-3 px-4 font-semibold text-sm\">Balance After</th>\r\n                      <th className=\"text-center py-3 px-4 font-semibold text-sm\">Status</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {transactions.map((transaction) => (\r\n                      <tr key={transaction.id} className=\"border-b hover:bg-accent/50\">\r\n                        <td className=\"py-3 px-4 text-sm text-muted-foreground\">\r\n                          {formatDate(transaction.date)}\r\n                        </td>\r\n                        <td className=\"py-3 px-4 text-sm\">{transaction.description}</td>\r\n                        <td className=\"py-3 px-4 text-sm\">\r\n                          <span\r\n                            className={`font-medium ${\r\n                              transaction.type === 'credit'\r\n                                ? 'text-green-600'\r\n                                : 'text-red-600'\r\n                            }`}\r\n                          >\r\n                            {transaction.type === 'credit' ? '+' : '-'}\r\n                          </span>\r\n                          {transaction.transactionType === 'purchase' && ' Purchase'}\r\n                          {transaction.transactionType === 'usage' && ' Usage'}\r\n                          {transaction.transactionType === 'refund' && ' Refund'}\r\n                          {transaction.transactionType === 'referral_reward' && ' Referral Reward'}\r\n                        </td>\r\n                        <td className=\"py-3 px-4 text-sm text-right font-medium\">\r\n                          <span\r\n                            className={\r\n                              transaction.type === 'credit' ? 'text-green-600' : 'text-red-600'\r\n                            }\r\n                          >\r\n                            {transaction.type === 'credit' ? '+' : '-'}R\r\n                            {transaction.amount.toFixed(2)}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"py-3 px-4 text-sm text-right text-muted-foreground\">\r\n                          R{transaction.balanceAfter.toFixed(2)}\r\n                        </td>\r\n                        <td className=\"py-3 px-4 text-sm text-center\">\r\n                          {getStatusBadge(transaction.paymentStatus)}\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              {totalItems > 0 && (\r\n                <div className=\"mt-4 text-sm text-muted-foreground text-center\">\r\n                  Showing {startItem} to {endItem} of {totalItems} transactions\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}