(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([typeof document === "object" ? document.currentScript : undefined,
"[project]/src/components/ui/tabs.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Tabs",
    ()=>Tabs,
    "TabsContent",
    ()=>TabsContent,
    "TabsList",
    ()=>TabsList,
    "TabsTrigger",
    ()=>TabsTrigger
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$tabs$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@radix-ui/react-tabs/dist/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/utils.ts [app-client] (ecmascript)");
;
;
;
;
const Tabs = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$tabs$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Root"];
const TabsList = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$tabs$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["List"], {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/tabs.tsx",
        lineNumber: 12,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c1 = TabsList;
TabsList.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$tabs$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["List"].displayName;
const TabsTrigger = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c2 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$tabs$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Trigger"], {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/tabs.tsx",
        lineNumber: 27,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c3 = TabsTrigger;
TabsTrigger.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$tabs$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Trigger"].displayName;
const TabsContent = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c4 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$tabs$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Content"], {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/tabs.tsx",
        lineNumber: 42,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c5 = TabsContent;
TabsContent.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$tabs$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Content"].displayName;
;
var _c, _c1, _c2, _c3, _c4, _c5;
__turbopack_context__.k.register(_c, "TabsList$React.forwardRef");
__turbopack_context__.k.register(_c1, "TabsList");
__turbopack_context__.k.register(_c2, "TabsTrigger$React.forwardRef");
__turbopack_context__.k.register(_c3, "TabsTrigger");
__turbopack_context__.k.register(_c4, "TabsContent$React.forwardRef");
__turbopack_context__.k.register(_c5, "TabsContent");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/src/components/ui/table.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Table",
    ()=>Table,
    "TableBody",
    ()=>TableBody,
    "TableCaption",
    ()=>TableCaption,
    "TableCell",
    ()=>TableCell,
    "TableFooter",
    ()=>TableFooter,
    "TableHead",
    ()=>TableHead,
    "TableHeader",
    ()=>TableHeader,
    "TableRow",
    ()=>TableRow
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/utils.ts [app-client] (ecmascript)");
;
;
;
const Table = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "relative w-full overflow-auto",
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("table", {
            ref: ref,
            className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("w-full caption-bottom text-sm", className),
            ...props
        }, void 0, false, {
            fileName: "[project]/src/components/ui/table.tsx",
            lineNumber: 8,
            columnNumber: 7
        }, ("TURBOPACK compile-time value", void 0))
    }, void 0, false, {
        fileName: "[project]/src/components/ui/table.tsx",
        lineNumber: 7,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0)));
_c1 = Table;
Table.displayName = "Table";
const TableHeader = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c2 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("thead", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("[&_tr]:border-b", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/table.tsx",
        lineNumber: 15,
        columnNumber: 37
    }, ("TURBOPACK compile-time value", void 0)));
_c3 = TableHeader;
TableHeader.displayName = "TableHeader";
const TableBody = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c4 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("tbody", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("[&_tr:last-child]:border-0", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/table.tsx",
        lineNumber: 21,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0)));
_c5 = TableBody;
TableBody.displayName = "TableBody";
const TableFooter = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c6 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("tfoot", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/table.tsx",
        lineNumber: 28,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0)));
_c7 = TableFooter;
TableFooter.displayName = "TableFooter";
const TableRow = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c8 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("tr", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/table.tsx",
        lineNumber: 35,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0)));
_c9 = TableRow;
TableRow.displayName = "TableRow";
const TableHead = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c10 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("th", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/table.tsx",
        lineNumber: 46,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0)));
_c11 = TableHead;
TableHead.displayName = "TableHead";
const TableCell = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c12 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("td", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("p-4 align-middle [&:has([role=checkbox])]:pr-0", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/table.tsx",
        lineNumber: 60,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0)));
_c13 = TableCell;
TableCell.displayName = "TableCell";
const TableCaption = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c14 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("caption", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("mt-4 text-sm text-muted-foreground", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/table.tsx",
        lineNumber: 67,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0)));
_c15 = TableCaption;
TableCaption.displayName = "TableCaption";
;
var _c, _c1, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15;
__turbopack_context__.k.register(_c, "Table$React.forwardRef");
__turbopack_context__.k.register(_c1, "Table");
__turbopack_context__.k.register(_c2, "TableHeader$React.forwardRef");
__turbopack_context__.k.register(_c3, "TableHeader");
__turbopack_context__.k.register(_c4, "TableBody$React.forwardRef");
__turbopack_context__.k.register(_c5, "TableBody");
__turbopack_context__.k.register(_c6, "TableFooter$React.forwardRef");
__turbopack_context__.k.register(_c7, "TableFooter");
__turbopack_context__.k.register(_c8, "TableRow$React.forwardRef");
__turbopack_context__.k.register(_c9, "TableRow");
__turbopack_context__.k.register(_c10, "TableHead$React.forwardRef");
__turbopack_context__.k.register(_c11, "TableHead");
__turbopack_context__.k.register(_c12, "TableCell$React.forwardRef");
__turbopack_context__.k.register(_c13, "TableCell");
__turbopack_context__.k.register(_c14, "TableCaption$React.forwardRef");
__turbopack_context__.k.register(_c15, "TableCaption");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/src/components/ui/card.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Card",
    ()=>Card,
    "CardContent",
    ()=>CardContent,
    "CardDescription",
    ()=>CardDescription,
    "CardFooter",
    ()=>CardFooter,
    "CardHeader",
    ()=>CardHeader,
    "CardTitle",
    ()=>CardTitle
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/utils.ts [app-client] (ecmascript)");
;
;
;
const Card = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("rounded-lg border bg-card text-card-foreground shadow-sm", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/card.tsx",
        lineNumber: 6,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c1 = Card;
Card.displayName = "Card";
const CardHeader = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c2 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("flex flex-col space-y-1.5 p-6", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/card.tsx",
        lineNumber: 12,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0)));
_c3 = CardHeader;
CardHeader.displayName = "CardHeader";
const CardTitle = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c4 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h3", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("text-2xl font-semibold leading-none tracking-tight", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/card.tsx",
        lineNumber: 19,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0)));
_c5 = CardTitle;
CardTitle.displayName = "CardTitle";
const CardDescription = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c6 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("text-sm text-muted-foreground", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/card.tsx",
        lineNumber: 26,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0)));
_c7 = CardDescription;
CardDescription.displayName = "CardDescription";
const CardContent = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c8 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("p-6 pt-0", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/card.tsx",
        lineNumber: 32,
        columnNumber: 37
    }, ("TURBOPACK compile-time value", void 0)));
_c9 = CardContent;
CardContent.displayName = "CardContent";
const CardFooter = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c10 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("flex items-center p-6 pt-0", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/card.tsx",
        lineNumber: 38,
        columnNumber: 5
    }, ("TURBOPACK compile-time value", void 0)));
_c11 = CardFooter;
CardFooter.displayName = "CardFooter";
;
var _c, _c1, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;
__turbopack_context__.k.register(_c, "Card$React.forwardRef");
__turbopack_context__.k.register(_c1, "Card");
__turbopack_context__.k.register(_c2, "CardHeader$React.forwardRef");
__turbopack_context__.k.register(_c3, "CardHeader");
__turbopack_context__.k.register(_c4, "CardTitle$React.forwardRef");
__turbopack_context__.k.register(_c5, "CardTitle");
__turbopack_context__.k.register(_c6, "CardDescription$React.forwardRef");
__turbopack_context__.k.register(_c7, "CardDescription");
__turbopack_context__.k.register(_c8, "CardContent$React.forwardRef");
__turbopack_context__.k.register(_c9, "CardContent");
__turbopack_context__.k.register(_c10, "CardFooter$React.forwardRef");
__turbopack_context__.k.register(_c11, "CardFooter");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/src/components/ui/select.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Select",
    ()=>Select,
    "SelectContent",
    ()=>SelectContent,
    "SelectGroup",
    ()=>SelectGroup,
    "SelectItem",
    ()=>SelectItem,
    "SelectLabel",
    ()=>SelectLabel,
    "SelectScrollDownButton",
    ()=>SelectScrollDownButton,
    "SelectScrollUpButton",
    ()=>SelectScrollUpButton,
    "SelectSeparator",
    ()=>SelectSeparator,
    "SelectTrigger",
    ()=>SelectTrigger,
    "SelectValue",
    ()=>SelectValue
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@radix-ui/react-select/dist/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$check$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Check$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/check.js [app-client] (ecmascript) <export default as Check>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$down$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronDown$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/chevron-down.js [app-client] (ecmascript) <export default as ChevronDown>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$up$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronUp$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/chevron-up.js [app-client] (ecmascript) <export default as ChevronUp>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/utils.ts [app-client] (ecmascript)");
;
;
;
;
;
const Select = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Root"];
const SelectGroup = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Group"];
const SelectValue = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Value"];
const SelectTrigger = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c = ({ className, children, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Trigger"], {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1", className),
        ...props,
        children: [
            children,
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Icon"], {
                asChild: true,
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$down$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronDown$3e$__["ChevronDown"], {
                    className: "h-4 w-4 opacity-50"
                }, void 0, false, {
                    fileName: "[project]/src/components/ui/select.tsx",
                    lineNumber: 27,
                    columnNumber: 7
                }, ("TURBOPACK compile-time value", void 0))
            }, void 0, false, {
                fileName: "[project]/src/components/ui/select.tsx",
                lineNumber: 26,
                columnNumber: 5
            }, ("TURBOPACK compile-time value", void 0))
        ]
    }, void 0, true, {
        fileName: "[project]/src/components/ui/select.tsx",
        lineNumber: 17,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c1 = SelectTrigger;
SelectTrigger.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Trigger"].displayName;
const SelectScrollUpButton = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ScrollUpButton"], {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("flex cursor-default items-center justify-center py-1", className),
        ...props,
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$up$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronUp$3e$__["ChevronUp"], {
            className: "h-4 w-4"
        }, void 0, false, {
            fileName: "[project]/src/components/ui/select.tsx",
            lineNumber: 42,
            columnNumber: 5
        }, ("TURBOPACK compile-time value", void 0))
    }, void 0, false, {
        fileName: "[project]/src/components/ui/select.tsx",
        lineNumber: 37,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c2 = SelectScrollUpButton;
SelectScrollUpButton.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ScrollUpButton"].displayName;
const SelectScrollDownButton = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ScrollDownButton"], {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("flex cursor-default items-center justify-center py-1", className),
        ...props,
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$down$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronDown$3e$__["ChevronDown"], {
            className: "h-4 w-4"
        }, void 0, false, {
            fileName: "[project]/src/components/ui/select.tsx",
            lineNumber: 56,
            columnNumber: 5
        }, ("TURBOPACK compile-time value", void 0))
    }, void 0, false, {
        fileName: "[project]/src/components/ui/select.tsx",
        lineNumber: 51,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c3 = SelectScrollDownButton;
SelectScrollDownButton.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ScrollDownButton"].displayName;
const SelectContent = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c4 = ({ className, children, position = "popper", ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Portal"], {
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Content"], {
            ref: ref,
            className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2", position === "popper" && "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1", className),
            position: position,
            ...props,
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(SelectScrollUpButton, {}, void 0, false, {
                    fileName: "[project]/src/components/ui/select.tsx",
                    lineNumber: 77,
                    columnNumber: 7
                }, ("TURBOPACK compile-time value", void 0)),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Viewport"], {
                    className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("p-1", position === "popper" && "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),
                    children: children
                }, void 0, false, {
                    fileName: "[project]/src/components/ui/select.tsx",
                    lineNumber: 78,
                    columnNumber: 7
                }, ("TURBOPACK compile-time value", void 0)),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(SelectScrollDownButton, {}, void 0, false, {
                    fileName: "[project]/src/components/ui/select.tsx",
                    lineNumber: 87,
                    columnNumber: 7
                }, ("TURBOPACK compile-time value", void 0))
            ]
        }, void 0, true, {
            fileName: "[project]/src/components/ui/select.tsx",
            lineNumber: 66,
            columnNumber: 5
        }, ("TURBOPACK compile-time value", void 0))
    }, void 0, false, {
        fileName: "[project]/src/components/ui/select.tsx",
        lineNumber: 65,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c5 = SelectContent;
SelectContent.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Content"].displayName;
const SelectLabel = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c6 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Label"], {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("py-1.5 pl-8 pr-2 text-sm font-semibold", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/select.tsx",
        lineNumber: 97,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c7 = SelectLabel;
SelectLabel.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Label"].displayName;
const SelectItem = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c8 = ({ className, children, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Item"], {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground", className),
        ...props,
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                className: "absolute left-2 flex h-3.5 w-3.5 items-center justify-center",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ItemIndicator"], {
                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$check$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Check$3e$__["Check"], {
                        className: "h-4 w-4"
                    }, void 0, false, {
                        fileName: "[project]/src/components/ui/select.tsx",
                        lineNumber: 115,
                        columnNumber: 9
                    }, ("TURBOPACK compile-time value", void 0))
                }, void 0, false, {
                    fileName: "[project]/src/components/ui/select.tsx",
                    lineNumber: 114,
                    columnNumber: 7
                }, ("TURBOPACK compile-time value", void 0))
            }, void 0, false, {
                fileName: "[project]/src/components/ui/select.tsx",
                lineNumber: 113,
                columnNumber: 5
            }, ("TURBOPACK compile-time value", void 0)),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ItemText"], {
                children: children
            }, void 0, false, {
                fileName: "[project]/src/components/ui/select.tsx",
                lineNumber: 119,
                columnNumber: 5
            }, ("TURBOPACK compile-time value", void 0))
        ]
    }, void 0, true, {
        fileName: "[project]/src/components/ui/select.tsx",
        lineNumber: 105,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c9 = SelectItem;
SelectItem.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Item"].displayName;
const SelectSeparator = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c10 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Separator"], {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("-mx-1 my-1 h-px bg-muted", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/select.tsx",
        lineNumber: 128,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c11 = SelectSeparator;
SelectSeparator.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$select$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Separator"].displayName;
;
var _c, _c1, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;
__turbopack_context__.k.register(_c, "SelectTrigger$React.forwardRef");
__turbopack_context__.k.register(_c1, "SelectTrigger");
__turbopack_context__.k.register(_c2, "SelectScrollUpButton");
__turbopack_context__.k.register(_c3, "SelectScrollDownButton");
__turbopack_context__.k.register(_c4, "SelectContent$React.forwardRef");
__turbopack_context__.k.register(_c5, "SelectContent");
__turbopack_context__.k.register(_c6, "SelectLabel$React.forwardRef");
__turbopack_context__.k.register(_c7, "SelectLabel");
__turbopack_context__.k.register(_c8, "SelectItem$React.forwardRef");
__turbopack_context__.k.register(_c9, "SelectItem");
__turbopack_context__.k.register(_c10, "SelectSeparator$React.forwardRef");
__turbopack_context__.k.register(_c11, "SelectSeparator");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/src/components/ui/label.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Label",
    ()=>Label
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$label$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@radix-ui/react-label/dist/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$class$2d$variance$2d$authority$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/class-variance-authority/dist/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/utils.ts [app-client] (ecmascript)");
;
;
;
;
;
const labelVariants = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$class$2d$variance$2d$authority$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cva"])("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70");
const Label = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$label$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Root"], {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])(labelVariants(), className),
        ...props
    }, void 0, false, {
        fileName: "[project]/src/components/ui/label.tsx",
        lineNumber: 13,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c1 = Label;
Label.displayName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$radix$2d$ui$2f$react$2d$label$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Root"].displayName;
;
var _c, _c1;
__turbopack_context__.k.register(_c, "Label$React.forwardRef");
__turbopack_context__.k.register(_c1, "Label");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/app/dashboard/data:3a7d19 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "redeemVoucher",
    ()=>$$RSC_SERVER_ACTION_17
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"7032c6fc970b5856d307d2ab8f2c100b4169d00f8c":"redeemVoucher"},"app/dashboard/actions.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_17 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("7032c6fc970b5856d307d2ab8f2c100b4169d00f8c", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "redeemVoucher");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBCb29raW5nIH0gZnJvbSAnQC90eXBlcy9ib29raW5nJztcclxuaW1wb3J0IHsgUHJvZmlsZSwgUHJvZmlsZVVwZGF0ZUlucHV0IH0gZnJvbSAnQC90eXBlcy9wcm9maWxlJztcclxuaW1wb3J0IHsgTG9jYXRpb24sIExvY2F0aW9uQ3JlYXRlSW5wdXQsIExvY2F0aW9uVXBkYXRlSW5wdXQgfSBmcm9tICdAL3R5cGVzL2xvY2F0aW9uJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdXRoZW50aWNhdGVkVXNlcigpOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGVtYWlsPzogc3RyaW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XHJcblxyXG4gICAgaWYgKGVycm9yIHx8ICF1c2VyKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vdCBhdXRoZW50aWNhdGVkJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGVtYWlsOiB1c2VyLmVtYWlsIHx8IHVuZGVmaW5lZCB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRBdXRoZW50aWNhdGVkVXNlcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBnZXQgdXNlcicsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1c3RvbWVyQm9va2luZ3MoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwaG9uZT86IHN0cmluZyxcclxuICBmaWx0ZXI/OiAnYWxsJyB8ICd1cGNvbWluZycgfCAnY29tcGxldGVkJyB8ICdjYW5jZWxsZWQnXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgYm9va2luZ3M/OiBCb29raW5nW107XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnYm9va2luZ3MnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLm9yZGVyKCdzZXJ2aWNlX2RhdGUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICAgIC8vIEJ1aWxkIHF1ZXJ5IGZvciBlbWFpbC9waG9uZSBsb29rdXBcclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKGBjdXN0b21lcl9lbWFpbC5lcS4ke2VtYWlsfSxjdXN0b21lcl9waG9uZS5lcS4ke3Bob25lfWApO1xyXG4gICAgfSBlbHNlIGlmIChlbWFpbCkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBvciBwaG9uZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBcHBseSBzdGF0dXMgZmlsdGVyXHJcbiAgICBpZiAoZmlsdGVyICYmIGZpbHRlciAhPT0gJ2FsbCcpIHtcclxuICAgICAgaWYgKGZpbHRlciA9PT0gJ3VwY29taW5nJykge1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuaW4oJ3N0YXR1cycsIFsncGVuZGluZycsICdjb25maXJtZWQnXSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnc3RhdHVzJywgZmlsdGVyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBib29raW5nczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGJvb2tpbmdzOiBkYXRhIHx8IFtdIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldEN1c3RvbWVyQm9va2luZ3M6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggYm9va2luZ3MnLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXN0b21lckJvb2tpbmdTdGF0cyhcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIHBob25lPzogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgc3RhdHM/OiB7XHJcbiAgICB0b3RhbDogbnVtYmVyO1xyXG4gICAgdXBjb21pbmc6IG51bWJlcjtcclxuICAgIGNvbXBsZXRlZDogbnVtYmVyO1xyXG4gICAgY2FuY2VsbGVkOiBudW1iZXI7XHJcbiAgICB0b3RhbFNwZW50OiBudW1iZXI7XHJcbiAgfTtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdib29raW5ncycpXHJcbiAgICAgIC5zZWxlY3QoJ3N0YXR1cywgdG90YWxfYW1vdW50LCBwYXltZW50X3N0YXR1cycpO1xyXG5cclxuICAgIC8vIEJ1aWxkIHF1ZXJ5IGZvciBlbWFpbC9waG9uZSBsb29rdXBcclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKGBjdXN0b21lcl9lbWFpbC5lcS4ke2VtYWlsfSxjdXN0b21lcl9waG9uZS5lcS4ke3Bob25lfWApO1xyXG4gICAgfSBlbHNlIGlmIChlbWFpbCkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBvciBwaG9uZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RhdHMgPSB7XHJcbiAgICAgIHRvdGFsOiBkYXRhPy5sZW5ndGggfHwgMCxcclxuICAgICAgdXBjb21pbmc6IGRhdGE/LmZpbHRlcigoYikgPT4gYi5zdGF0dXMgPT09ICdwZW5kaW5nJyB8fCBiLnN0YXR1cyA9PT0gJ2NvbmZpcm1lZCcpLmxlbmd0aCB8fCAwLFxyXG4gICAgICBjb21wbGV0ZWQ6IGRhdGE/LmZpbHRlcigoYikgPT4gYi5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKS5sZW5ndGggfHwgMCxcclxuICAgICAgY2FuY2VsbGVkOiBkYXRhPy5maWx0ZXIoKGIpID0+IGIuc3RhdHVzID09PSAnY2FuY2VsbGVkJykubGVuZ3RoIHx8IDAsXHJcbiAgICAgIHRvdGFsU3BlbnQ6IGRhdGFcclxuICAgICAgICA/LmZpbHRlcigoYikgPT4gYi5wYXltZW50X3N0YXR1cyA9PT0gJ3BhaWQnKVxyXG4gICAgICAgIC5yZWR1Y2UoKHN1bSwgYikgPT4gc3VtICsgKGIudG90YWxfYW1vdW50IHx8IDApLCAwKSB8fCAwLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBzdGF0cyB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBmZXRjaCBzdGF0cycsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJvb2tpbmdCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGJvb2tpbmc/OiBCb29raW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2Jvb2tpbmdzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnaWQnLCBpZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBib29raW5nOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQm9va2luZyBub3QgZm91bmQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgYm9va2luZzogZGF0YSB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIGZldGNoaW5nIGJvb2tpbmc6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJQcm9maWxlKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGhvbmU/OiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBwcm9maWxlPzogUHJvZmlsZTtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIC8vIEZpcnN0LCB0cnkgdG8gZ2V0IHByb2ZpbGUgZnJvbSBwcm9maWxlcyB0YWJsZVxyXG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJyonKTtcclxuXHJcbiAgICBpZiAoZW1haWwpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnZW1haWwnLCBlbWFpbCk7XHJcbiAgICB9IGVsc2UgaWYgKHBob25lKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3Bob25lJywgcGhvbmUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRW1haWwgb3IgcGhvbmUgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhOiBwcm9maWxlRGF0YSwgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgcXVlcnkubWF5YmVTaW5nbGUoKTtcclxuXHJcbiAgICAvLyBJZiBwcm9maWxlIGV4aXN0cywgcmV0dXJuIGl0XHJcbiAgICBpZiAocHJvZmlsZURhdGEgJiYgIXByb2ZpbGVFcnJvcikge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBwcm9maWxlOiBwcm9maWxlRGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIG5vIHByb2ZpbGUgZXhpc3RzLCBkZXJpdmUgZnJvbSBtb3N0IHJlY2VudCBib29raW5nXHJcbiAgICBsZXQgYm9va2luZ1F1ZXJ5ID0gc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2Jvb2tpbmdzJylcclxuICAgICAgLnNlbGVjdCgnY3VzdG9tZXJfZmlyc3RfbmFtZSwgY3VzdG9tZXJfbGFzdF9uYW1lLCBjdXN0b21lcl9lbWFpbCwgY3VzdG9tZXJfcGhvbmUnKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLmxpbWl0KDEpO1xyXG5cclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICBib29raW5nUXVlcnkgPSBib29raW5nUXVlcnkub3IoYGN1c3RvbWVyX2VtYWlsLmVxLiR7ZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7cGhvbmV9YCk7XHJcbiAgICB9IGVsc2UgaWYgKGVtYWlsKSB7XHJcbiAgICAgIGJvb2tpbmdRdWVyeSA9IGJvb2tpbmdRdWVyeS5lcSgnY3VzdG9tZXJfZW1haWwnLCBlbWFpbCk7XHJcbiAgICB9IGVsc2UgaWYgKHBob25lKSB7XHJcbiAgICAgIGJvb2tpbmdRdWVyeSA9IGJvb2tpbmdRdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhOiBib29raW5nRGF0YSwgZXJyb3I6IGJvb2tpbmdFcnJvciB9ID0gYXdhaXQgYm9va2luZ1F1ZXJ5Lm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGJvb2tpbmdFcnJvciB8fCAhYm9va2luZ0RhdGEpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ05vIHByb2ZpbGUgb3IgYm9va2luZyBmb3VuZC4gUGxlYXNlIGNyZWF0ZSBhIGJvb2tpbmcgZmlyc3QuJyxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgYSBwcm9maWxlIG9iamVjdCBmcm9tIGJvb2tpbmcgZGF0YVxyXG4gICAgY29uc3QgZGVyaXZlZFByb2ZpbGU6IFByb2ZpbGUgPSB7XHJcbiAgICAgIGlkOiAnJywgLy8gV2lsbCBiZSBnZW5lcmF0ZWQgd2hlbiBzYXZlZFxyXG4gICAgICBlbWFpbDogYm9va2luZ0RhdGEuY3VzdG9tZXJfZW1haWwsXHJcbiAgICAgIHBob25lOiBib29raW5nRGF0YS5jdXN0b21lcl9waG9uZSB8fCBudWxsLFxyXG4gICAgICBmaXJzdF9uYW1lOiBib29raW5nRGF0YS5jdXN0b21lcl9maXJzdF9uYW1lLFxyXG4gICAgICBsYXN0X25hbWU6IGJvb2tpbmdEYXRhLmN1c3RvbWVyX2xhc3RfbmFtZSxcclxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHByb2ZpbGU6IGRlcml2ZWRQcm9maWxlIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldEN1c3RvbWVyUHJvZmlsZTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBmZXRjaCBwcm9maWxlJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBsb2FkUHJvZmlsZVBpY3R1cmUoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBmaWxlRGF0YTogc3RyaW5nLCAvLyBiYXNlNjQgZW5jb2RlZCBzdHJpbmdcclxuICBmaWxlTmFtZTogc3RyaW5nLFxyXG4gIGZpbGVUeXBlOiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICB1cmw/OiBzdHJpbmc7XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBmaWxlIHR5cGVcclxuICAgIGNvbnN0IHZhbGlkSW1hZ2VUeXBlcyA9IFsnaW1hZ2UvanBlZycsICdpbWFnZS9qcGcnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL3dlYnAnXTtcclxuICAgIGlmICghdmFsaWRJbWFnZVR5cGVzLmluY2x1ZGVzKGZpbGVUeXBlKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGZpbGUgdHlwZS4gUGxlYXNlIHVwbG9hZCBhIEpQRUcsIFBORywgb3IgV2ViUCBpbWFnZS4nIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVjb2RlIGJhc2U2NCBkYXRhXHJcbiAgICBjb25zdCBiYXNlNjREYXRhID0gZmlsZURhdGEucmVwbGFjZSgvXmRhdGE6aW1hZ2VcXC9cXHcrO2Jhc2U2NCwvLCAnJyk7XHJcbiAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShiYXNlNjREYXRhLCAnYmFzZTY0Jyk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgZmlsZSBzaXplIChtYXggNU1CKVxyXG4gICAgY29uc3QgbWF4U2l6ZSA9IDUgKiAxMDI0ICogMTAyNDsgLy8gNU1CIGluIGJ5dGVzXHJcbiAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IG1heFNpemUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmlsZSBzaXplIHRvbyBsYXJnZS4gUGxlYXNlIHVwbG9hZCBhbiBpbWFnZSBzbWFsbGVyIHRoYW4gNU1CLicgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgZmlsZW5hbWUgdXNpbmcgZW1haWwgYW5kIHRpbWVzdGFtcFxyXG4gICAgY29uc3QgZmlsZUV4dCA9IGZpbGVOYW1lLnNwbGl0KCcuJykucG9wKCkgfHwgJ2pwZyc7XHJcbiAgICBjb25zdCBzYW5pdGl6ZWRFbWFpbCA9IGVtYWlsLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpO1xyXG4gICAgY29uc3QgdW5pcXVlRmlsZU5hbWUgPSBgJHtzYW5pdGl6ZWRFbWFpbH1fJHtEYXRlLm5vdygpfS4ke2ZpbGVFeHR9YDtcclxuICAgIGNvbnN0IGZpbGVQYXRoID0gYGF2YXRhcnMvJHt1bmlxdWVGaWxlTmFtZX1gO1xyXG5cclxuICAgIC8vIFVwbG9hZCB0byBTdXBhYmFzZSBTdG9yYWdlXHJcbiAgICBjb25zdCB7IGRhdGE6IHVwbG9hZERhdGEsIGVycm9yOiB1cGxvYWRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZVxyXG4gICAgICAuZnJvbSgncHJvZmlsZS1waWN0dXJlcycpXHJcbiAgICAgIC51cGxvYWQoZmlsZVBhdGgsIGJ1ZmZlciwge1xyXG4gICAgICAgIGNvbnRlbnRUeXBlOiBmaWxlVHlwZSxcclxuICAgICAgICB1cHNlcnQ6IGZhbHNlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAodXBsb2FkRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGZpbGU6JywgdXBsb2FkRXJyb3IpO1xyXG4gICAgICAvLyBJZiBidWNrZXQgZG9lc24ndCBleGlzdCwgcmV0dXJuIGhlbHBmdWwgZXJyb3JcclxuICAgICAgaWYgKHVwbG9hZEVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBmb3VuZCcpIHx8IHVwbG9hZEVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0J1Y2tldCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICBlcnJvcjogJ1N0b3JhZ2UgYnVja2V0IG5vdCBjb25maWd1cmVkLiBQbGVhc2UgY3JlYXRlIGEgXCJwcm9maWxlLXBpY3R1cmVzXCIgYnVja2V0IGluIFN1cGFiYXNlIFN0b3JhZ2UuJyBcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogdXBsb2FkRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCBwdWJsaWMgVVJMXHJcbiAgICBjb25zdCB7IGRhdGE6IHVybERhdGEgfSA9IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgICAgLmZyb20oJ3Byb2ZpbGUtcGljdHVyZXMnKVxyXG4gICAgICAuZ2V0UHVibGljVXJsKGZpbGVQYXRoKTtcclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1cmw6IHVybERhdGEucHVibGljVXJsIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHVwbG9hZFByb2ZpbGVQaWN0dXJlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHVwbG9hZCBwcm9maWxlIHBpY3R1cmUnLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQcm9maWxlUGljdHVyZShlbWFpbDogc3RyaW5nLCBhdmF0YXJVcmw6IHN0cmluZyk6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBFeHRyYWN0IGZpbGUgcGF0aCBmcm9tIFVSTFxyXG4gICAgY29uc3QgdXJsUGFydHMgPSBhdmF0YXJVcmwuc3BsaXQoJy9wcm9maWxlLXBpY3R1cmVzLycpO1xyXG4gICAgaWYgKHVybFBhcnRzLmxlbmd0aCA8IDIpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBhdmF0YXIgVVJMJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbGVQYXRoID0gYGF2YXRhcnMvJHt1cmxQYXJ0c1sxXS5zcGxpdCgnLycpLnBvcCgpfWA7XHJcblxyXG4gICAgLy8gRGVsZXRlIGZyb20gc3RvcmFnZVxyXG4gICAgY29uc3QgeyBlcnJvcjogZGVsZXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgICAgLmZyb20oJ3Byb2ZpbGUtcGljdHVyZXMnKVxyXG4gICAgICAucmVtb3ZlKFtmaWxlUGF0aF0pO1xyXG5cclxuICAgIGlmIChkZWxldGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBmaWxlOicsIGRlbGV0ZUVycm9yKTtcclxuICAgICAgLy8gRG9uJ3QgZmFpbCBpZiBmaWxlIGRvZXNuJ3QgZXhpc3RcclxuICAgICAgaWYgKGRlbGV0ZUVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBmb3VuZCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZGVsZXRlRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZGVsZXRlUHJvZmlsZVBpY3R1cmU6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZGVsZXRlIHByb2ZpbGUgcGljdHVyZScsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUN1c3RvbWVyUHJvZmlsZShcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIGRhdGE6IFByb2ZpbGVVcGRhdGVJbnB1dFxyXG4pOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIHByb2ZpbGU/OiBQcm9maWxlO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgaW5wdXRcclxuICAgIGlmICghZGF0YS5maXJzdF9uYW1lPy50cmltKCkpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmlyc3QgbmFtZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuICAgIGlmICghZGF0YS5sYXN0X25hbWU/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdMYXN0IG5hbWUgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAoIWRhdGEuZW1haWw/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuICAgIGlmICghL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC8udGVzdChkYXRhLmVtYWlsKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGVtYWlsIGZvcm1hdCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiBwcm9maWxlIGV4aXN0c1xyXG4gICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1Byb2ZpbGUgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgIC5tYXliZVNpbmdsZSgpO1xyXG5cclxuICAgIC8vIElmIGF2YXRhcl91cmwgaXMgYmVpbmcgcmVtb3ZlZCwgZGVsZXRlIHRoZSBvbGQgZmlsZVxyXG4gICAgaWYgKGV4aXN0aW5nUHJvZmlsZT8uYXZhdGFyX3VybCAmJiBkYXRhLmF2YXRhcl91cmwgPT09IG51bGwpIHtcclxuICAgICAgYXdhaXQgZGVsZXRlUHJvZmlsZVBpY3R1cmUoZW1haWwsIGV4aXN0aW5nUHJvZmlsZS5hdmF0YXJfdXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gICAgaWYgKGV4aXN0aW5nUHJvZmlsZSkge1xyXG4gICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgcHJvZmlsZVxyXG4gICAgICAvLyBJZiBlbWFpbCBjaGFuZ2VkLCB3ZSBuZWVkIHRvIGhhbmRsZSBpdCBjYXJlZnVsbHlcclxuICAgICAgaWYgKGRhdGEuZW1haWwgIT09IGVtYWlsKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgbmV3IGVtYWlsIGFscmVhZHkgZXhpc3RzXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBlbWFpbENoZWNrIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAgIC5lcSgnZW1haWwnLCBkYXRhLmVtYWlsKVxyXG4gICAgICAgICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgICAgIGlmIChlbWFpbENoZWNrKSB7XHJcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBhbHJlYWR5IGV4aXN0cycgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHtcclxuICAgICAgICBmaXJzdF9uYW1lOiBkYXRhLmZpcnN0X25hbWUudHJpbSgpLFxyXG4gICAgICAgIGxhc3RfbmFtZTogZGF0YS5sYXN0X25hbWUudHJpbSgpLFxyXG4gICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLnRyaW0oKSxcclxuICAgICAgICBwaG9uZTogZGF0YS5waG9uZT8udHJpbSgpIHx8IG51bGwsXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gT25seSB1cGRhdGUgYXZhdGFyX3VybCBpZiBpdCdzIHByb3ZpZGVkXHJcbiAgICAgIGlmIChkYXRhLmF2YXRhcl91cmwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHVwZGF0ZURhdGEuYXZhdGFyX3VybCA9IGRhdGEuYXZhdGFyX3VybDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkUHJvZmlsZSwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgLnVwZGF0ZSh1cGRhdGVEYXRhKVxyXG4gICAgICAgIC5lcSgnZW1haWwnLCBlbWFpbClcclxuICAgICAgICAuc2VsZWN0KClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwcm9maWxlOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHVwZGF0ZUVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzdWx0ID0gdXBkYXRlZFByb2ZpbGU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBDcmVhdGUgbmV3IHByb2ZpbGVcclxuICAgICAgY29uc3QgaW5zZXJ0RGF0YTogYW55ID0ge1xyXG4gICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLnRyaW0oKSxcclxuICAgICAgICBwaG9uZTogZGF0YS5waG9uZT8udHJpbSgpIHx8IG51bGwsXHJcbiAgICAgICAgZmlyc3RfbmFtZTogZGF0YS5maXJzdF9uYW1lLnRyaW0oKSxcclxuICAgICAgICBsYXN0X25hbWU6IGRhdGEubGFzdF9uYW1lLnRyaW0oKSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIE9ubHkgc2V0IGF2YXRhcl91cmwgaWYgaXQncyBwcm92aWRlZFxyXG4gICAgICBpZiAoZGF0YS5hdmF0YXJfdXJsKSB7XHJcbiAgICAgICAgaW5zZXJ0RGF0YS5hdmF0YXJfdXJsID0gZGF0YS5hdmF0YXJfdXJsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7IGRhdGE6IG5ld1Byb2ZpbGUsIGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgICAgIC5pbnNlcnQoaW5zZXJ0RGF0YSlcclxuICAgICAgICAuc2VsZWN0KClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBwcm9maWxlOicsIGluc2VydEVycm9yKTtcclxuICAgICAgICAvLyBDaGVjayBpZiBpdCdzIGEgdW5pcXVlIGNvbnN0cmFpbnQgdmlvbGF0aW9uXHJcbiAgICAgICAgaWYgKGluc2VydEVycm9yLmNvZGUgPT09ICcyMzUwNScpIHtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0VtYWlsIGFscmVhZHkgZXhpc3RzJyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGluc2VydEVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzdWx0ID0gbmV3UHJvZmlsZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBwcm9maWxlOiByZXN1bHQgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gdXBkYXRlQ3VzdG9tZXJQcm9maWxlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHVwZGF0ZSBwcm9maWxlJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJMb2NhdGlvbnMoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwaG9uZT86IHN0cmluZ1xyXG4pOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGxvY2F0aW9ucz86IExvY2F0aW9uW107XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbG9jYXRpb25zJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5vcmRlcignaXNfZGVmYXVsdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcblxyXG4gICAgLy8gQnVpbGQgcXVlcnkgZm9yIGVtYWlsL3Bob25lIGxvb2t1cFxyXG4gICAgaWYgKGVtYWlsICYmIHBob25lKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkub3IoYGN1c3RvbWVyX2VtYWlsLmVxLiR7ZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7cGhvbmV9YCk7XHJcbiAgICB9IGVsc2UgaWYgKGVtYWlsKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ2N1c3RvbWVyX2VtYWlsJywgZW1haWwpO1xyXG4gICAgfSBlbHNlIGlmIChwaG9uZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjdXN0b21lcl9waG9uZScsIHBob25lKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0VtYWlsIG9yIHBob25lIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBsb2NhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBsb2NhdGlvbnM6IGRhdGEgfHwgW10gfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0Q3VzdG9tZXJMb2NhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggbG9jYXRpb25zJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTG9jYXRpb24oXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwaG9uZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxyXG4gIGxvY2F0aW9uRGF0YTogTG9jYXRpb25DcmVhdGVJbnB1dFxyXG4pOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGxvY2F0aW9uPzogTG9jYXRpb247XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBpbnB1dFxyXG4gICAgaWYgKCFsb2NhdGlvbkRhdGEubmlja25hbWU/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdOaWNrbmFtZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuICAgIGlmICghbG9jYXRpb25EYXRhLmFkZHJlc3M/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBZGRyZXNzIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG4gICAgaWYgKCFsb2NhdGlvbkRhdGEuc3VidXJiPy50cmltKCkpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnU3VidXJiIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG4gICAgaWYgKCFsb2NhdGlvbkRhdGEuY2l0eT8udHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0NpdHkgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgc2V0dGluZyBhcyBkZWZhdWx0LCB1bnNldCBhbGwgb3RoZXIgZGVmYXVsdHMgZm9yIHRoaXMgY3VzdG9tZXJcclxuICAgIGlmIChsb2NhdGlvbkRhdGEuaXNfZGVmYXVsdCkge1xyXG4gICAgICBsZXQgdXBkYXRlUXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAgIC51cGRhdGUoeyBpc19kZWZhdWx0OiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkub3IoYGN1c3RvbWVyX2VtYWlsLmVxLiR7ZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7cGhvbmV9YCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZW1haWwpIHtcclxuICAgICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgICAgfSBlbHNlIGlmIChwaG9uZSkge1xyXG4gICAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkuZXEoJ2N1c3RvbWVyX3Bob25lJywgcGhvbmUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVRdWVyeTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGE6IG5ld0xvY2F0aW9uLCBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBjdXN0b21lcl9lbWFpbDogZW1haWwsXHJcbiAgICAgICAgY3VzdG9tZXJfcGhvbmU6IHBob25lIHx8IG51bGwsXHJcbiAgICAgICAgbmlja25hbWU6IGxvY2F0aW9uRGF0YS5uaWNrbmFtZS50cmltKCksXHJcbiAgICAgICAgYWRkcmVzczogbG9jYXRpb25EYXRhLmFkZHJlc3MudHJpbSgpLFxyXG4gICAgICAgIGFwdF91bml0OiBsb2NhdGlvbkRhdGEuYXB0X3VuaXQ/LnRyaW0oKSB8fCBudWxsLFxyXG4gICAgICAgIHN1YnVyYjogbG9jYXRpb25EYXRhLnN1YnVyYi50cmltKCksXHJcbiAgICAgICAgY2l0eTogbG9jYXRpb25EYXRhLmNpdHkudHJpbSgpLFxyXG4gICAgICAgIHBvc3RhbF9jb2RlOiBsb2NhdGlvbkRhdGEucG9zdGFsX2NvZGU/LnRyaW0oKSB8fCBudWxsLFxyXG4gICAgICAgIGlzX2RlZmF1bHQ6IGxvY2F0aW9uRGF0YS5pc19kZWZhdWx0IHx8IGZhbHNlLFxyXG4gICAgICB9KVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChpbnNlcnRFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBsb2NhdGlvbjonLCBpbnNlcnRFcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogaW5zZXJ0RXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGxvY2F0aW9uOiBuZXdMb2NhdGlvbiB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBjcmVhdGVMb2NhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBjcmVhdGUgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVMb2NhdGlvbihcclxuICBsb2NhdGlvbklkOiBzdHJpbmcsXHJcbiAgbG9jYXRpb25EYXRhOiBMb2NhdGlvblVwZGF0ZUlucHV0XHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgbG9jYXRpb24/OiBMb2NhdGlvbjtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIGlucHV0IGlmIHByb3ZpZGVkXHJcbiAgICBpZiAobG9jYXRpb25EYXRhLm5pY2tuYW1lICE9PSB1bmRlZmluZWQgJiYgIWxvY2F0aW9uRGF0YS5uaWNrbmFtZS50cmltKCkpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTmlja25hbWUgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25EYXRhLmFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiAhbG9jYXRpb25EYXRhLmFkZHJlc3MudHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FkZHJlc3MgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25EYXRhLnN1YnVyYiAhPT0gdW5kZWZpbmVkICYmICFsb2NhdGlvbkRhdGEuc3VidXJiLnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdTdWJ1cmIgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25EYXRhLmNpdHkgIT09IHVuZGVmaW5lZCAmJiAhbG9jYXRpb25EYXRhLmNpdHkudHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0NpdHkgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IGN1cnJlbnQgbG9jYXRpb24gdG8gY2hlY2sgY3VzdG9tZXIgZW1haWxcclxuICAgIGNvbnN0IHsgZGF0YTogY3VycmVudExvY2F0aW9uLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2xvY2F0aW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJ2N1c3RvbWVyX2VtYWlsLCBjdXN0b21lcl9waG9uZScpXHJcbiAgICAgIC5lcSgnaWQnLCBsb2NhdGlvbklkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGZldGNoRXJyb3IgfHwgIWN1cnJlbnRMb2NhdGlvbikge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdMb2NhdGlvbiBub3QgZm91bmQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgc2V0dGluZyBhcyBkZWZhdWx0LCB1bnNldCBhbGwgb3RoZXIgZGVmYXVsdHMgZm9yIHRoaXMgY3VzdG9tZXJcclxuICAgIGlmIChsb2NhdGlvbkRhdGEuaXNfZGVmYXVsdCkge1xyXG4gICAgICBsZXQgdXBkYXRlUXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAgIC51cGRhdGUoeyBpc19kZWZhdWx0OiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIGlmIChjdXJyZW50TG9jYXRpb24uY3VzdG9tZXJfZW1haWwgJiYgY3VycmVudExvY2F0aW9uLmN1c3RvbWVyX3Bob25lKSB7XHJcbiAgICAgICAgdXBkYXRlUXVlcnkgPSB1cGRhdGVRdWVyeS5vcihgY3VzdG9tZXJfZW1haWwuZXEuJHtjdXJyZW50TG9jYXRpb24uY3VzdG9tZXJfZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7Y3VycmVudExvY2F0aW9uLmN1c3RvbWVyX3Bob25lfWApO1xyXG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9lbWFpbCkge1xyXG4gICAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkuZXEoJ2N1c3RvbWVyX2VtYWlsJywgY3VycmVudExvY2F0aW9uLmN1c3RvbWVyX2VtYWlsKTtcclxuICAgICAgfSBlbHNlIGlmIChjdXJyZW50TG9jYXRpb24uY3VzdG9tZXJfcGhvbmUpIHtcclxuICAgICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5LmVxKCdjdXN0b21lcl9waG9uZScsIGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9waG9uZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIERvbid0IHVuc2V0IHRoZSBjdXJyZW50IGxvY2F0aW9uXHJcbiAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkubmVxKCdpZCcsIGxvY2F0aW9uSWQpO1xyXG5cclxuICAgICAgYXdhaXQgdXBkYXRlUXVlcnk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQnVpbGQgdXBkYXRlIG9iamVjdCB3aXRoIG9ubHkgcHJvdmlkZWQgZmllbGRzXHJcbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7XHJcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5uaWNrbmFtZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHVwZGF0ZURhdGEubmlja25hbWUgPSBsb2NhdGlvbkRhdGEubmlja25hbWUudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5hZGRyZXNzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXBkYXRlRGF0YS5hZGRyZXNzID0gbG9jYXRpb25EYXRhLmFkZHJlc3MudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5hcHRfdW5pdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHVwZGF0ZURhdGEuYXB0X3VuaXQgPSBsb2NhdGlvbkRhdGEuYXB0X3VuaXQ/LnRyaW0oKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5zdWJ1cmIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB1cGRhdGVEYXRhLnN1YnVyYiA9IGxvY2F0aW9uRGF0YS5zdWJ1cmIudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5jaXR5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXBkYXRlRGF0YS5jaXR5ID0gbG9jYXRpb25EYXRhLmNpdHkudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5wb3N0YWxfY29kZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHVwZGF0ZURhdGEucG9zdGFsX2NvZGUgPSBsb2NhdGlvbkRhdGEucG9zdGFsX2NvZGU/LnRyaW0oKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5pc19kZWZhdWx0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXBkYXRlRGF0YS5pc19kZWZhdWx0ID0gbG9jYXRpb25EYXRhLmlzX2RlZmF1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkTG9jYXRpb24sIGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2xvY2F0aW9ucycpXHJcbiAgICAgIC51cGRhdGUodXBkYXRlRGF0YSlcclxuICAgICAgLmVxKCdpZCcsIGxvY2F0aW9uSWQpXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKHVwZGF0ZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGxvY2F0aW9uOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB1cGRhdGVFcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbG9jYXRpb246IHVwZGF0ZWRMb2NhdGlvbiB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiB1cGRhdGVMb2NhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB1cGRhdGUgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVMb2NhdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2xvY2F0aW9ucycpXHJcbiAgICAgIC5kZWxldGUoKVxyXG4gICAgICAuZXEoJ2lkJywgbG9jYXRpb25JZCk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGxvY2F0aW9uOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBkZWxldGVMb2NhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBkZWxldGUgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXREZWZhdWx0TG9jYXRpb24oXHJcbiAgbG9jYXRpb25JZDogc3RyaW5nLFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGhvbmU/OiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBsb2NhdGlvbj86IExvY2F0aW9uO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gR2V0IGN1cnJlbnQgbG9jYXRpb24gdG8gdmVyaWZ5IG93bmVyc2hpcFxyXG4gICAgY29uc3QgeyBkYXRhOiBjdXJyZW50TG9jYXRpb24sIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbG9jYXRpb25zJylcclxuICAgICAgLnNlbGVjdCgnY3VzdG9tZXJfZW1haWwsIGN1c3RvbWVyX3Bob25lJylcclxuICAgICAgLmVxKCdpZCcsIGxvY2F0aW9uSWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZmV0Y2hFcnJvciB8fCAhY3VycmVudExvY2F0aW9uKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0xvY2F0aW9uIG5vdCBmb3VuZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgb3duZXJzaGlwXHJcbiAgICBjb25zdCBpc093bmVyID0gXHJcbiAgICAgIGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9lbWFpbCA9PT0gZW1haWwgfHxcclxuICAgICAgKHBob25lICYmIGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9waG9uZSA9PT0gcGhvbmUpO1xyXG5cclxuICAgIGlmICghaXNPd25lcikge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVW5zZXQgYWxsIG90aGVyIGRlZmF1bHRzIGZvciB0aGlzIGN1c3RvbWVyXHJcbiAgICBsZXQgdXBkYXRlUXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbG9jYXRpb25zJylcclxuICAgICAgLnVwZGF0ZSh7IGlzX2RlZmF1bHQ6IGZhbHNlIH0pO1xyXG5cclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5Lm9yKGBjdXN0b21lcl9lbWFpbC5lcS4ke2VtYWlsfSxjdXN0b21lcl9waG9uZS5lcS4ke3Bob25lfWApO1xyXG4gICAgfSBlbHNlIGlmIChlbWFpbCkge1xyXG4gICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgdXBkYXRlUXVlcnkgPSB1cGRhdGVRdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRG9uJ3QgdW5zZXQgdGhlIGN1cnJlbnQgbG9jYXRpb25cclxuICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkubmVxKCdpZCcsIGxvY2F0aW9uSWQpO1xyXG5cclxuICAgIGF3YWl0IHVwZGF0ZVF1ZXJ5O1xyXG5cclxuICAgIC8vIFNldCB0aGlzIGxvY2F0aW9uIGFzIGRlZmF1bHRcclxuICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZExvY2F0aW9uLCBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAudXBkYXRlKHsgaXNfZGVmYXVsdDogdHJ1ZSB9KVxyXG4gICAgICAuZXEoJ2lkJywgbG9jYXRpb25JZClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyBkZWZhdWx0IGxvY2F0aW9uOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB1cGRhdGVFcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbG9jYXRpb246IHVwZGF0ZWRMb2NhdGlvbiB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBzZXREZWZhdWx0TG9jYXRpb246JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2V0IGRlZmF1bHQgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVJlZmVycmFsQ29kZShcclxuICBlbWFpbDogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgcmVmZXJyYWxDb2RlPzogc3RyaW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgcHJvZmlsZSBleGlzdHMgYW5kIGhhcyBhIHJlZmVycmFsIGNvZGVcclxuICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgncmVmZXJyYWxfY29kZScpXHJcbiAgICAgIC5lcSgnZW1haWwnLCBlbWFpbClcclxuICAgICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKHByb2ZpbGVFcnJvciAmJiBwcm9maWxlRXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9maWxlOicsIHByb2ZpbGVFcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcHJvZmlsZUVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBwcm9maWxlIGV4aXN0cyBhbmQgaGFzIGEgcmVmZXJyYWwgY29kZSwgcmV0dXJuIGl0XHJcbiAgICBpZiAocHJvZmlsZT8ucmVmZXJyYWxfY29kZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZWZlcnJhbENvZGU6IHByb2ZpbGUucmVmZXJyYWxfY29kZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYXRlIGEgbmV3IHJlZmVycmFsIGNvZGVcclxuICAgIC8vIFRyeSB1c2luZyB0aGUgZGF0YWJhc2UgZnVuY3Rpb24gZmlyc3QsIGJ1dCBmYWxsYmFjayB0byBjbGllbnQtc2lkZSBnZW5lcmF0aW9uXHJcbiAgICBsZXQgZ2VuZXJhdGVkQ29kZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YTogZGJDb2RlLCBlcnJvcjogY29kZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5ycGMoJ2dlbmVyYXRlX3JlZmVycmFsX2NvZGUnKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghY29kZUVycm9yICYmIGRiQ29kZSkge1xyXG4gICAgICAgIGdlbmVyYXRlZENvZGUgPSBkYkNvZGU7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKHJwY0Vycm9yKSB7XHJcbiAgICAgIC8vIFJQQyBmdW5jdGlvbiBtaWdodCBub3QgZXhpc3QgeWV0LCB0aGF0J3Mgb2theVxyXG4gICAgICBjb25zb2xlLmxvZygnUlBDIGZ1bmN0aW9uIG5vdCBhdmFpbGFibGUsIHVzaW5nIGZhbGxiYWNrJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFnZW5lcmF0ZWRDb2RlKSB7XHJcbiAgICAgIC8vIEZhbGxiYWNrOiBnZW5lcmF0ZSBjb2RlIGNsaWVudC1zaWRlIHN0eWxlXHJcbiAgICAgIGNvbnN0IGZhbGxiYWNrQ29kZSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgaWYgZmFsbGJhY2sgY29kZSBleGlzdHMsIHJldHJ5IGlmIGl0IGRvZXNcclxuICAgICAgbGV0IGZpbmFsQ29kZSA9IGZhbGxiYWNrQ29kZTtcclxuICAgICAgbGV0IGF0dGVtcHRzID0gMDtcclxuICAgICAgY29uc3QgbWF4QXR0ZW1wdHMgPSA1O1xyXG5cclxuICAgICAgd2hpbGUgKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcclxuICAgICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAgIC5lcSgncmVmZXJyYWxfY29kZScsIGZpbmFsQ29kZSlcclxuICAgICAgICAgIC5tYXliZVNpbmdsZSgpO1xyXG5cclxuICAgICAgICBpZiAoIWV4aXN0aW5nKSB7XHJcbiAgICAgICAgICBicmVhazsgLy8gQ29kZSBpcyB1bmlxdWVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IGNvZGVcclxuICAgICAgICBmaW5hbENvZGUgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOCkudG9VcHBlckNhc2UoKTtcclxuICAgICAgICBhdHRlbXB0cysrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVcGRhdGUgb3IgaW5zZXJ0IHByb2ZpbGUgd2l0aCByZWZlcnJhbCBjb2RlXHJcbiAgICAgIC8vIEZpcnN0LCB0cnkgdG8gdXBkYXRlIGV4aXN0aW5nIHByb2ZpbGVcclxuICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1Byb2ZpbGUgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAuc2VsZWN0KCdpZCwgZmlyc3RfbmFtZSwgbGFzdF9uYW1lJylcclxuICAgICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgICBsZXQgdXBkYXRlZFByb2ZpbGU7XHJcbiAgICAgIGlmIChleGlzdGluZ1Byb2ZpbGUpIHtcclxuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgcHJvZmlsZVxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZCwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgICAgICByZWZlcnJhbF9jb2RlOiBmaW5hbENvZGUsXHJcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgICAgICAuc2VsZWN0KCdyZWZlcnJhbF9jb2RlJylcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZUVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyByZWZlcnJhbCBjb2RlOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogdXBkYXRlRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cGRhdGVkUHJvZmlsZSA9IHVwZGF0ZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSW5zZXJ0IG5ldyBwcm9maWxlIHdpdGggcmVmZXJyYWwgY29kZVxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogaW5zZXJ0ZWQsIGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgICAuaW5zZXJ0KHtcclxuICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgIHJlZmVycmFsX2NvZGU6IGZpbmFsQ29kZSxcclxuICAgICAgICAgICAgZmlyc3RfbmFtZTogZW1haWwuc3BsaXQoJ0AnKVswXSxcclxuICAgICAgICAgICAgbGFzdF9uYW1lOiAnJyxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuc2VsZWN0KCdyZWZlcnJhbF9jb2RlJylcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgICAgaWYgKGluc2VydEVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyByZWZlcnJhbCBjb2RlOicsIGluc2VydEVycm9yKTtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogaW5zZXJ0RXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cGRhdGVkUHJvZmlsZSA9IGluc2VydGVkO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZWZlcnJhbENvZGU6IHVwZGF0ZWRQcm9maWxlPy5yZWZlcnJhbF9jb2RlIHx8IGZpbmFsQ29kZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVzZSB0aGUgZ2VuZXJhdGVkIGNvZGUgZnJvbSBkYXRhYmFzZSBmdW5jdGlvblxyXG4gICAgLy8gVXBkYXRlIG9yIGluc2VydCBwcm9maWxlIHdpdGggZ2VuZXJhdGVkIGNvZGVcclxuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdQcm9maWxlIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCwgZmlyc3RfbmFtZSwgbGFzdF9uYW1lJylcclxuICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsKVxyXG4gICAgICAubWF5YmVTaW5nbGUoKTtcclxuXHJcbiAgICBsZXQgdXBkYXRlZFByb2ZpbGU7XHJcbiAgICBpZiAoZXhpc3RpbmdQcm9maWxlKSB7XHJcbiAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBwcm9maWxlXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZCwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgICByZWZlcnJhbF9jb2RlOiBnZW5lcmF0ZWRDb2RlLFxyXG4gICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsKVxyXG4gICAgICAgIC5zZWxlY3QoJ3JlZmVycmFsX2NvZGUnKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmICh1cGRhdGVFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHJlZmVycmFsIGNvZGU6JywgdXBkYXRlRXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogdXBkYXRlRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICB9XHJcbiAgICAgIHVwZGF0ZWRQcm9maWxlID0gdXBkYXRlZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEluc2VydCBuZXcgcHJvZmlsZSB3aXRoIHJlZmVycmFsIGNvZGVcclxuICAgICAgY29uc3QgeyBkYXRhOiBpbnNlcnRlZCwgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgICBlbWFpbCxcclxuICAgICAgICAgIHJlZmVycmFsX2NvZGU6IGdlbmVyYXRlZENvZGUsXHJcbiAgICAgICAgICBmaXJzdF9uYW1lOiBlbWFpbC5zcGxpdCgnQCcpWzBdLFxyXG4gICAgICAgICAgbGFzdF9uYW1lOiAnJyxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zZWxlY3QoJ3JlZmVycmFsX2NvZGUnKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChpbnNlcnRFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHJlZmVycmFsIGNvZGU6JywgaW5zZXJ0RXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogaW5zZXJ0RXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICB9XHJcbiAgICAgIHVwZGF0ZWRQcm9maWxlID0gaW5zZXJ0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcmVmZXJyYWxDb2RlOiB1cGRhdGVkUHJvZmlsZT8ucmVmZXJyYWxfY29kZSB8fCBnZW5lcmF0ZWRDb2RlIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldE9yQ3JlYXRlUmVmZXJyYWxDb2RlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGdldCByZWZlcnJhbCBjb2RlJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZFJlZmVycmFsSW52aXRlcyhcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIGludml0ZUVtYWlsczogc3RyaW5nW10sXHJcbiAgcmVmZXJyYWxDb2RlOiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBzZW50PzogbnVtYmVyO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgZW1haWwgYWRkcmVzc2VzXHJcbiAgICBjb25zdCB2YWxpZEVtYWlscyA9IGludml0ZUVtYWlsc1xyXG4gICAgICAubWFwKChlKSA9PiBlLnRyaW0oKSlcclxuICAgICAgLmZpbHRlcigoZSkgPT4ge1xyXG4gICAgICAgIGlmICghZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLy50ZXN0KGUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAodmFsaWRFbWFpbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIHZhbGlkIGVtYWlsIGFkZHJlc3NlcyBwcm92aWRlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgcmVmZXJyYWwgcmVjb3JkcyBmb3IgdHJhY2tpbmdcclxuICAgIGNvbnN0IHJlZmVycmFsUmVjb3JkcyA9IHZhbGlkRW1haWxzLm1hcCgocmVmZXJyZWRFbWFpbCkgPT4gKHtcclxuICAgICAgcmVmZXJyZXJfZW1haWw6IGVtYWlsLFxyXG4gICAgICByZWZlcnJlZF9lbWFpbDogcmVmZXJyZWRFbWFpbCxcclxuICAgICAgcmVmZXJyYWxfY29kZTogcmVmZXJyYWxDb2RlLFxyXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgIH0pKTtcclxuXHJcbiAgICBjb25zdCB7IGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3JlZmVycmFscycpXHJcbiAgICAgIC5pbnNlcnQocmVmZXJyYWxSZWNvcmRzKTtcclxuXHJcbiAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcmVmZXJyYWwgcmVjb3JkczonLCBpbnNlcnRFcnJvcik7XHJcbiAgICAgIC8vIENvbnRpbnVlIGV2ZW4gaWYgaW5zZXJ0IGZhaWxzIC0gd2Ugc3RpbGwgd2FudCB0byBzZW5kIGVtYWlsc1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYXRlIHJlZmVycmFsIGxpbmtcclxuICAgIGNvbnN0IGJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TSVRFX1VSTCB8fCAnaHR0cHM6Ly9zaGFsZWFuLmNvLnphJztcclxuICAgIGNvbnN0IHJlZmVycmFsTGluayA9IGAke2Jhc2VVcmx9L2Jvb2tpbmcvZGV0YWlscz9yZWY9JHtyZWZlcnJhbENvZGV9YDtcclxuXHJcbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWN0dWFsIGVtYWlsIHNlbmRpbmcgdXNpbmcgeW91ciBlbWFpbCBzZXJ2aWNlIChSZXNlbmQsIFNlbmRHcmlkLCBldGMuKVxyXG4gICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCBsb2cgdGhlIGVtYWlscyB0aGF0IHdvdWxkIGJlIHNlbnRcclxuICAgIGNvbnNvbGUubG9nKCdSZWZlcnJhbCBpbnZpdGVzIHRvIHNlbmQ6Jywge1xyXG4gICAgICBmcm9tOiBlbWFpbCxcclxuICAgICAgdG86IHZhbGlkRW1haWxzLFxyXG4gICAgICByZWZlcnJhbENvZGUsXHJcbiAgICAgIHJlZmVycmFsTGluayxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgeW91IHdvdWxkIHNlbmQgZW1haWxzIGhlcmVcclxuICAgIC8vIEV4YW1wbGUgd2l0aCBSZXNlbmQ6XHJcbiAgICAvLyBhd2FpdCByZXNlbmQuZW1haWxzLnNlbmQoe1xyXG4gICAgLy8gICBmcm9tOiAnU2hhbGVhbiA8bm9yZXBseUBzaGFsZWFuLmNvLnphPicsXHJcbiAgICAvLyAgIHRvOiB2YWxpZEVtYWlscyxcclxuICAgIC8vICAgc3ViamVjdDogJ1lvdVxcJ3ZlIGJlZW4gaW52aXRlZCB0byB0cnkgU2hhbGVhbiBDbGVhbmluZyBTZXJ2aWNlcyEnLFxyXG4gICAgLy8gICBodG1sOiBgPHA+WW91ciBmcmllbmQgaGFzIGludml0ZWQgeW91IHRvIHRyeSBTaGFsZWFuLiBVc2UgY29kZSAke3JlZmVycmFsQ29kZX0gdG8gZ2V0IFIxNTAgb2ZmIHlvdXIgZmlyc3QgYm9va2luZyE8L3A+PHA+PGEgaHJlZj1cIiR7cmVmZXJyYWxMaW5rfVwiPkJvb2sgTm93PC9hPjwvcD5gLFxyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgc2VudDogdmFsaWRFbWFpbHMubGVuZ3RoIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHNlbmRSZWZlcnJhbEludml0ZXM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VuZCBpbnZpdGVzJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVmZXJyYWxTdGF0cyhcclxuICBlbWFpbDogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgc3RhdHM/OiB7XHJcbiAgICB0b3RhbFJlZmVycmFsczogbnVtYmVyO1xyXG4gICAgY29tcGxldGVkUmVmZXJyYWxzOiBudW1iZXI7XHJcbiAgICBwZW5kaW5nUmV3YXJkczogbnVtYmVyO1xyXG4gICAgdG90YWxSZXdhcmRzOiBudW1iZXI7XHJcbiAgfTtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIGNvbnN0IHsgZGF0YTogcmVmZXJyYWxzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3JlZmVycmFscycpXHJcbiAgICAgIC5zZWxlY3QoJ3N0YXR1cywgcmVmZXJyZXJfcmV3YXJkX2Ftb3VudCwgcmVmZXJyZXJfcmV3YXJkX3N0YXR1cycpXHJcbiAgICAgIC5lcSgncmVmZXJyZXJfZW1haWwnLCBlbWFpbCk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHJlZmVycmFsIHN0YXRzOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RhdHMgPSB7XHJcbiAgICAgIHRvdGFsUmVmZXJyYWxzOiByZWZlcnJhbHM/Lmxlbmd0aCB8fCAwLFxyXG4gICAgICBjb21wbGV0ZWRSZWZlcnJhbHM6XHJcbiAgICAgICAgcmVmZXJyYWxzPy5maWx0ZXIoKHIpID0+IHIuc3RhdHVzID09PSAnY29tcGxldGVkJykubGVuZ3RoIHx8IDAsXHJcbiAgICAgIHBlbmRpbmdSZXdhcmRzOlxyXG4gICAgICAgIHJlZmVycmFscz8uZmlsdGVyKChyKSA9PiByLnJlZmVycmVyX3Jld2FyZF9zdGF0dXMgPT09ICdwZW5kaW5nJykubGVuZ3RoIHx8IDAsXHJcbiAgICAgIHRvdGFsUmV3YXJkczpcclxuICAgICAgICByZWZlcnJhbHNcclxuICAgICAgICAgID8uZmlsdGVyKChyKSA9PiByLnJlZmVycmVyX3Jld2FyZF9zdGF0dXMgPT09ICdjcmVkaXRlZCcpXHJcbiAgICAgICAgICAucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIChyLnJlZmVycmVyX3Jld2FyZF9hbW91bnQgfHwgMCksIDApIHx8IDAsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHN0YXRzIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldFJlZmVycmFsU3RhdHM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggcmVmZXJyYWwgc3RhdHMnLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGEgY3JlZGl0IHB1cmNoYXNlIHdpdGggUGF5c3RhY2tcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplQ3JlZGl0UHVyY2hhc2UoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBhbW91bnQ6IG51bWJlcixcclxuICBwYXltZW50TWV0aG9kOiAnY3JlZGl0X2NhcmQnIHwgJ2VmdCdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBhdXRob3JpemF0aW9uVXJsPzogc3RyaW5nO1xyXG4gIHJlZmVyZW5jZT86IHN0cmluZztcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoYW1vdW50IDwgMjAgfHwgYW1vdW50ID4gNTAwMCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnQW1vdW50IG11c3QgYmUgYmV0d2VlbiBSMjAgYW5kIFI1MDAwJyxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSByZWZlcmVuY2UgZm9yIHRoaXMgY3JlZGl0IHB1cmNoYXNlXHJcbiAgICBjb25zdCByZWZlcmVuY2UgPSBgQ1JFRElUXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOSl9YDtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSBwZW5kaW5nIGNyZWRpdCB0cmFuc2FjdGlvblxyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuICAgIFxyXG4gICAgLy8gR2V0IG9yIGNyZWF0ZSBwcm9maWxlXHJcbiAgICBsZXQgeyBkYXRhOiBwcm9maWxlIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCwgY3JlZGl0X2JhbGFuY2UnKVxyXG4gICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgIC5tYXliZVNpbmdsZSgpO1xyXG5cclxuICAgIGlmICghcHJvZmlsZSkge1xyXG4gICAgICAvLyBDcmVhdGUgYSBiYXNpYyBwcm9maWxlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcclxuICAgICAgY29uc3QgeyBkYXRhOiBuZXdQcm9maWxlLCBlcnJvcjogY3JlYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAuaW5zZXJ0KHtcclxuICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgY3JlZGl0X2JhbGFuY2U6IDAsXHJcbiAgICAgICAgICBmaXJzdF9uYW1lOiAnJyxcclxuICAgICAgICAgIGxhc3RfbmFtZTogJycsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc2VsZWN0KCdpZCwgY3JlZGl0X2JhbGFuY2UnKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChjcmVhdGVFcnJvciB8fCAhbmV3UHJvZmlsZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBwcm9maWxlJyxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIHByb2ZpbGUgPSBuZXdQcm9maWxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSBwZW5kaW5nIGNyZWRpdCB0cmFuc2FjdGlvblxyXG4gICAgY29uc3QgeyBlcnJvcjogdHJhbnNhY3Rpb25FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2NyZWRpdF90cmFuc2FjdGlvbnMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBwcm9maWxlX2lkOiBwcm9maWxlLmlkLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHRyYW5zYWN0aW9uX3R5cGU6ICdwdXJjaGFzZScsXHJcbiAgICAgICAgYW1vdW50LFxyXG4gICAgICAgIGJhbGFuY2VfYmVmb3JlOiBwcm9maWxlLmNyZWRpdF9iYWxhbmNlIHx8IDAsXHJcbiAgICAgICAgYmFsYW5jZV9hZnRlcjogcHJvZmlsZS5jcmVkaXRfYmFsYW5jZSB8fCAwLCAvLyBXb24ndCB1cGRhdGUgdW50aWwgcGF5bWVudCBzdWNjZWVkc1xyXG4gICAgICAgIHBheW1lbnRfbWV0aG9kOiBwYXltZW50TWV0aG9kLFxyXG4gICAgICAgIHBheXN0YWNrX3JlZmVyZW5jZTogcmVmZXJlbmNlLFxyXG4gICAgICAgIHBheW1lbnRfc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IGBQdXJjaGFzZSBvZiBSJHthbW91bnR9IFNoYWxlYW5DcmVkYCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKHRyYW5zYWN0aW9uRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgY3JlZGl0IHRyYW5zYWN0aW9uOicsIHRyYW5zYWN0aW9uRXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSB0cmFuc2FjdGlvbiByZWNvcmQnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluaXRpYWxpemUgUGF5c3RhY2sgcGF5bWVudFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9wYXlzdGFjay9pbml0aWFsaXplJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICBhbW91bnQsXHJcbiAgICAgICAgcmVmZXJlbmNlLFxyXG4gICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiAnY3JlZGl0X3B1cmNoYXNlJyxcclxuICAgICAgICAgIHBheW1lbnRfbWV0aG9kOiBwYXltZW50TWV0aG9kLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IuZXJyb3IgfHwgJ0ZhaWxlZCB0byBpbml0aWFsaXplIHBheW1lbnQnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBheW1lbnREYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgIGlmICghcGF5bWVudERhdGEuc3RhdHVzKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHBheW1lbnREYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBpbml0aWFsaXplIHBheW1lbnQnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGF1dGhvcml6YXRpb25Vcmw6IHBheW1lbnREYXRhLmRhdGEuYXV0aG9yaXphdGlvbl91cmwsXHJcbiAgICAgIHJlZmVyZW5jZTogcGF5bWVudERhdGEuZGF0YS5yZWZlcmVuY2UsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgY3JlZGl0IHB1cmNoYXNlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGluaXRpYWxpemUgcGF5bWVudCcsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWb3VjaGVyUmVkZW1wdGlvbiB7XHJcbiAgaWQ6IHN0cmluZztcclxuICB2b3VjaGVyX2NvZGU6IHN0cmluZztcclxuICBhbW91bnQ6IG51bWJlcjtcclxuICByZWRlZW1lZF9hdDogc3RyaW5nO1xyXG4gIGJvb2tpbmdfaWQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWRlZW1Wb3VjaGVyKFxyXG4gIGNvZGU6IHN0cmluZyxcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIHBob25lPzogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgYW1vdW50PzogbnVtYmVyO1xyXG4gIG5ld0JhbGFuY2U/OiBudW1iZXI7XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBDYWxsIHRoZSBkYXRhYmFzZSBmdW5jdGlvbiB0byByZWRlZW0gdGhlIHZvdWNoZXJcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygncmVkZWVtX3ZvdWNoZXInLCB7XHJcbiAgICAgIHBfY29kZTogY29kZS50cmltKCkudG9VcHBlckNhc2UoKSxcclxuICAgICAgcF9lbWFpbDogZW1haWwudHJpbSgpLFxyXG4gICAgICBwX3Bob25lOiBwaG9uZT8udHJpbSgpIHx8IG51bGwsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVkZWVtaW5nIHZvdWNoZXI6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gcmVkZWVtIHZvdWNoZXInLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFBhcnNlIHRoZSByZXN1bHQgZnJvbSB0aGUgZnVuY3Rpb24gKGhhbmRsZSBib3RoIG9iamVjdCBhbmQgc3RyaW5nIEpTT05CKVxyXG4gICAgbGV0IHJlc3VsdCA9IGRhdGE7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgdm91Y2hlciByZWRlbXB0aW9uIHJlc3VsdDonLCBwYXJzZUVycm9yKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgcmVzcG9uc2UgZnJvbSBzZXJ2ZXInLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnICYmICdzdWNjZXNzJyBpbiByZXN1bHQpIHtcclxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzID09PSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiByZXN1bHQuZXJyb3IgfHwgJ0ZhaWxlZCB0byByZWRlZW0gdm91Y2hlcicsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGFtb3VudDogcmVzdWx0LmFtb3VudCxcclxuICAgICAgICBuZXdCYWxhbmNlOiByZXN1bHQubmV3X2JhbGFuY2UsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiAnVW5leHBlY3RlZCByZXNwb25zZSBmcm9tIHNlcnZlcicsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiByZWRlZW1Wb3VjaGVyOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHJlZGVlbSB2b3VjaGVyJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Vm91Y2hlclJlZGVtcHRpb25zKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGhvbmU/OiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICByZWRlbXB0aW9ucz86IFZvdWNoZXJSZWRlbXB0aW9uW107XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndm91Y2hlcl9yZWRlbXB0aW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJ2lkLCB2b3VjaGVyX2NvZGUsIGFtb3VudCwgcmVkZWVtZWRfYXQsIGJvb2tpbmdfaWQnKVxyXG4gICAgICAub3JkZXIoJ3JlZGVlbWVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICAgIC8vIEJ1aWxkIHF1ZXJ5IGZvciBlbWFpbC9waG9uZSBsb29rdXBcclxuICAgIC8vIFByaW9yaXRpemUgZW1haWwgYXMgaXQncyB0aGUgcHJpbWFyeSBpZGVudGlmaWVyIHRvIHByZXZlbnQgY3Jvc3MtYWNjb3VudCB2aXNpYmlsaXR5XHJcbiAgICBpZiAoZW1haWwpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnZW1haWwnLCBlbWFpbCk7XHJcbiAgICAgIC8vIElmIHBob25lIGlzIGFsc28gcHJvdmlkZWQsIHdlIGNhbiBvcHRpb25hbGx5IGZpbHRlciBieSBib3RoIGZvciBleHRyYSBzZWN1cml0eVxyXG4gICAgICAvLyBidXQgZW1haWwgYWxvbmUgc2hvdWxkIGJlIHN1ZmZpY2llbnQgc2luY2UgaXQncyB1bmlxdWVcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgncGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBvciBwaG9uZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdm91Y2hlciByZWRlbXB0aW9uczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRyYW5zZm9ybSB0aGUgZGF0YSB0byBtYXRjaCB0aGUgaW50ZXJmYWNlXHJcbiAgICBjb25zdCByZWRlbXB0aW9uczogVm91Y2hlclJlZGVtcHRpb25bXSA9IChkYXRhIHx8IFtdKS5tYXAoKHJlZGVtcHRpb24pID0+ICh7XHJcbiAgICAgIGlkOiByZWRlbXB0aW9uLmlkLFxyXG4gICAgICB2b3VjaGVyX2NvZGU6IHJlZGVtcHRpb24udm91Y2hlcl9jb2RlLFxyXG4gICAgICBhbW91bnQ6IHJlZGVtcHRpb24uYW1vdW50LFxyXG4gICAgICByZWRlZW1lZF9hdDogcmVkZW1wdGlvbi5yZWRlZW1lZF9hdCxcclxuICAgICAgYm9va2luZ19pZDogcmVkZW1wdGlvbi5ib29raW5nX2lkIHx8IHVuZGVmaW5lZCxcclxuICAgIH0pKTtcclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZWRlbXB0aW9ucyB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRWb3VjaGVyUmVkZW1wdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggdm91Y2hlciByZWRlbXB0aW9ucycsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiIwUkE2c0NzQiw0TEFBQSJ9
}),
"[project]/app/dashboard/data:a16329 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getVoucherRedemptions",
    ()=>$$RSC_SERVER_ACTION_18
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"6050106d1c885f0bc767b31e0e9a58abb1a5ff399d":"getVoucherRedemptions"},"app/dashboard/actions.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_18 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("6050106d1c885f0bc767b31e0e9a58abb1a5ff399d", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "getVoucherRedemptions");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBCb29raW5nIH0gZnJvbSAnQC90eXBlcy9ib29raW5nJztcclxuaW1wb3J0IHsgUHJvZmlsZSwgUHJvZmlsZVVwZGF0ZUlucHV0IH0gZnJvbSAnQC90eXBlcy9wcm9maWxlJztcclxuaW1wb3J0IHsgTG9jYXRpb24sIExvY2F0aW9uQ3JlYXRlSW5wdXQsIExvY2F0aW9uVXBkYXRlSW5wdXQgfSBmcm9tICdAL3R5cGVzL2xvY2F0aW9uJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdXRoZW50aWNhdGVkVXNlcigpOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGVtYWlsPzogc3RyaW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XHJcblxyXG4gICAgaWYgKGVycm9yIHx8ICF1c2VyKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vdCBhdXRoZW50aWNhdGVkJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGVtYWlsOiB1c2VyLmVtYWlsIHx8IHVuZGVmaW5lZCB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRBdXRoZW50aWNhdGVkVXNlcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBnZXQgdXNlcicsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1c3RvbWVyQm9va2luZ3MoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwaG9uZT86IHN0cmluZyxcclxuICBmaWx0ZXI/OiAnYWxsJyB8ICd1cGNvbWluZycgfCAnY29tcGxldGVkJyB8ICdjYW5jZWxsZWQnXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgYm9va2luZ3M/OiBCb29raW5nW107XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnYm9va2luZ3MnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLm9yZGVyKCdzZXJ2aWNlX2RhdGUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICAgIC8vIEJ1aWxkIHF1ZXJ5IGZvciBlbWFpbC9waG9uZSBsb29rdXBcclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKGBjdXN0b21lcl9lbWFpbC5lcS4ke2VtYWlsfSxjdXN0b21lcl9waG9uZS5lcS4ke3Bob25lfWApO1xyXG4gICAgfSBlbHNlIGlmIChlbWFpbCkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBvciBwaG9uZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBcHBseSBzdGF0dXMgZmlsdGVyXHJcbiAgICBpZiAoZmlsdGVyICYmIGZpbHRlciAhPT0gJ2FsbCcpIHtcclxuICAgICAgaWYgKGZpbHRlciA9PT0gJ3VwY29taW5nJykge1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuaW4oJ3N0YXR1cycsIFsncGVuZGluZycsICdjb25maXJtZWQnXSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnc3RhdHVzJywgZmlsdGVyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBib29raW5nczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGJvb2tpbmdzOiBkYXRhIHx8IFtdIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldEN1c3RvbWVyQm9va2luZ3M6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggYm9va2luZ3MnLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXN0b21lckJvb2tpbmdTdGF0cyhcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIHBob25lPzogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgc3RhdHM/OiB7XHJcbiAgICB0b3RhbDogbnVtYmVyO1xyXG4gICAgdXBjb21pbmc6IG51bWJlcjtcclxuICAgIGNvbXBsZXRlZDogbnVtYmVyO1xyXG4gICAgY2FuY2VsbGVkOiBudW1iZXI7XHJcbiAgICB0b3RhbFNwZW50OiBudW1iZXI7XHJcbiAgfTtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdib29raW5ncycpXHJcbiAgICAgIC5zZWxlY3QoJ3N0YXR1cywgdG90YWxfYW1vdW50LCBwYXltZW50X3N0YXR1cycpO1xyXG5cclxuICAgIC8vIEJ1aWxkIHF1ZXJ5IGZvciBlbWFpbC9waG9uZSBsb29rdXBcclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKGBjdXN0b21lcl9lbWFpbC5lcS4ke2VtYWlsfSxjdXN0b21lcl9waG9uZS5lcS4ke3Bob25lfWApO1xyXG4gICAgfSBlbHNlIGlmIChlbWFpbCkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBvciBwaG9uZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RhdHMgPSB7XHJcbiAgICAgIHRvdGFsOiBkYXRhPy5sZW5ndGggfHwgMCxcclxuICAgICAgdXBjb21pbmc6IGRhdGE/LmZpbHRlcigoYikgPT4gYi5zdGF0dXMgPT09ICdwZW5kaW5nJyB8fCBiLnN0YXR1cyA9PT0gJ2NvbmZpcm1lZCcpLmxlbmd0aCB8fCAwLFxyXG4gICAgICBjb21wbGV0ZWQ6IGRhdGE/LmZpbHRlcigoYikgPT4gYi5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKS5sZW5ndGggfHwgMCxcclxuICAgICAgY2FuY2VsbGVkOiBkYXRhPy5maWx0ZXIoKGIpID0+IGIuc3RhdHVzID09PSAnY2FuY2VsbGVkJykubGVuZ3RoIHx8IDAsXHJcbiAgICAgIHRvdGFsU3BlbnQ6IGRhdGFcclxuICAgICAgICA/LmZpbHRlcigoYikgPT4gYi5wYXltZW50X3N0YXR1cyA9PT0gJ3BhaWQnKVxyXG4gICAgICAgIC5yZWR1Y2UoKHN1bSwgYikgPT4gc3VtICsgKGIudG90YWxfYW1vdW50IHx8IDApLCAwKSB8fCAwLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBzdGF0cyB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBmZXRjaCBzdGF0cycsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJvb2tpbmdCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGJvb2tpbmc/OiBCb29raW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2Jvb2tpbmdzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnaWQnLCBpZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBib29raW5nOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQm9va2luZyBub3QgZm91bmQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgYm9va2luZzogZGF0YSB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIGZldGNoaW5nIGJvb2tpbmc6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJQcm9maWxlKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGhvbmU/OiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBwcm9maWxlPzogUHJvZmlsZTtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIC8vIEZpcnN0LCB0cnkgdG8gZ2V0IHByb2ZpbGUgZnJvbSBwcm9maWxlcyB0YWJsZVxyXG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJyonKTtcclxuXHJcbiAgICBpZiAoZW1haWwpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnZW1haWwnLCBlbWFpbCk7XHJcbiAgICB9IGVsc2UgaWYgKHBob25lKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3Bob25lJywgcGhvbmUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRW1haWwgb3IgcGhvbmUgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhOiBwcm9maWxlRGF0YSwgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgcXVlcnkubWF5YmVTaW5nbGUoKTtcclxuXHJcbiAgICAvLyBJZiBwcm9maWxlIGV4aXN0cywgcmV0dXJuIGl0XHJcbiAgICBpZiAocHJvZmlsZURhdGEgJiYgIXByb2ZpbGVFcnJvcikge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBwcm9maWxlOiBwcm9maWxlRGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIG5vIHByb2ZpbGUgZXhpc3RzLCBkZXJpdmUgZnJvbSBtb3N0IHJlY2VudCBib29raW5nXHJcbiAgICBsZXQgYm9va2luZ1F1ZXJ5ID0gc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2Jvb2tpbmdzJylcclxuICAgICAgLnNlbGVjdCgnY3VzdG9tZXJfZmlyc3RfbmFtZSwgY3VzdG9tZXJfbGFzdF9uYW1lLCBjdXN0b21lcl9lbWFpbCwgY3VzdG9tZXJfcGhvbmUnKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLmxpbWl0KDEpO1xyXG5cclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICBib29raW5nUXVlcnkgPSBib29raW5nUXVlcnkub3IoYGN1c3RvbWVyX2VtYWlsLmVxLiR7ZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7cGhvbmV9YCk7XHJcbiAgICB9IGVsc2UgaWYgKGVtYWlsKSB7XHJcbiAgICAgIGJvb2tpbmdRdWVyeSA9IGJvb2tpbmdRdWVyeS5lcSgnY3VzdG9tZXJfZW1haWwnLCBlbWFpbCk7XHJcbiAgICB9IGVsc2UgaWYgKHBob25lKSB7XHJcbiAgICAgIGJvb2tpbmdRdWVyeSA9IGJvb2tpbmdRdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhOiBib29raW5nRGF0YSwgZXJyb3I6IGJvb2tpbmdFcnJvciB9ID0gYXdhaXQgYm9va2luZ1F1ZXJ5Lm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGJvb2tpbmdFcnJvciB8fCAhYm9va2luZ0RhdGEpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ05vIHByb2ZpbGUgb3IgYm9va2luZyBmb3VuZC4gUGxlYXNlIGNyZWF0ZSBhIGJvb2tpbmcgZmlyc3QuJyxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgYSBwcm9maWxlIG9iamVjdCBmcm9tIGJvb2tpbmcgZGF0YVxyXG4gICAgY29uc3QgZGVyaXZlZFByb2ZpbGU6IFByb2ZpbGUgPSB7XHJcbiAgICAgIGlkOiAnJywgLy8gV2lsbCBiZSBnZW5lcmF0ZWQgd2hlbiBzYXZlZFxyXG4gICAgICBlbWFpbDogYm9va2luZ0RhdGEuY3VzdG9tZXJfZW1haWwsXHJcbiAgICAgIHBob25lOiBib29raW5nRGF0YS5jdXN0b21lcl9waG9uZSB8fCBudWxsLFxyXG4gICAgICBmaXJzdF9uYW1lOiBib29raW5nRGF0YS5jdXN0b21lcl9maXJzdF9uYW1lLFxyXG4gICAgICBsYXN0X25hbWU6IGJvb2tpbmdEYXRhLmN1c3RvbWVyX2xhc3RfbmFtZSxcclxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHByb2ZpbGU6IGRlcml2ZWRQcm9maWxlIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldEN1c3RvbWVyUHJvZmlsZTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBmZXRjaCBwcm9maWxlJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBsb2FkUHJvZmlsZVBpY3R1cmUoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBmaWxlRGF0YTogc3RyaW5nLCAvLyBiYXNlNjQgZW5jb2RlZCBzdHJpbmdcclxuICBmaWxlTmFtZTogc3RyaW5nLFxyXG4gIGZpbGVUeXBlOiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICB1cmw/OiBzdHJpbmc7XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBmaWxlIHR5cGVcclxuICAgIGNvbnN0IHZhbGlkSW1hZ2VUeXBlcyA9IFsnaW1hZ2UvanBlZycsICdpbWFnZS9qcGcnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL3dlYnAnXTtcclxuICAgIGlmICghdmFsaWRJbWFnZVR5cGVzLmluY2x1ZGVzKGZpbGVUeXBlKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGZpbGUgdHlwZS4gUGxlYXNlIHVwbG9hZCBhIEpQRUcsIFBORywgb3IgV2ViUCBpbWFnZS4nIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVjb2RlIGJhc2U2NCBkYXRhXHJcbiAgICBjb25zdCBiYXNlNjREYXRhID0gZmlsZURhdGEucmVwbGFjZSgvXmRhdGE6aW1hZ2VcXC9cXHcrO2Jhc2U2NCwvLCAnJyk7XHJcbiAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShiYXNlNjREYXRhLCAnYmFzZTY0Jyk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgZmlsZSBzaXplIChtYXggNU1CKVxyXG4gICAgY29uc3QgbWF4U2l6ZSA9IDUgKiAxMDI0ICogMTAyNDsgLy8gNU1CIGluIGJ5dGVzXHJcbiAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IG1heFNpemUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmlsZSBzaXplIHRvbyBsYXJnZS4gUGxlYXNlIHVwbG9hZCBhbiBpbWFnZSBzbWFsbGVyIHRoYW4gNU1CLicgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgZmlsZW5hbWUgdXNpbmcgZW1haWwgYW5kIHRpbWVzdGFtcFxyXG4gICAgY29uc3QgZmlsZUV4dCA9IGZpbGVOYW1lLnNwbGl0KCcuJykucG9wKCkgfHwgJ2pwZyc7XHJcbiAgICBjb25zdCBzYW5pdGl6ZWRFbWFpbCA9IGVtYWlsLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpO1xyXG4gICAgY29uc3QgdW5pcXVlRmlsZU5hbWUgPSBgJHtzYW5pdGl6ZWRFbWFpbH1fJHtEYXRlLm5vdygpfS4ke2ZpbGVFeHR9YDtcclxuICAgIGNvbnN0IGZpbGVQYXRoID0gYGF2YXRhcnMvJHt1bmlxdWVGaWxlTmFtZX1gO1xyXG5cclxuICAgIC8vIFVwbG9hZCB0byBTdXBhYmFzZSBTdG9yYWdlXHJcbiAgICBjb25zdCB7IGRhdGE6IHVwbG9hZERhdGEsIGVycm9yOiB1cGxvYWRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZVxyXG4gICAgICAuZnJvbSgncHJvZmlsZS1waWN0dXJlcycpXHJcbiAgICAgIC51cGxvYWQoZmlsZVBhdGgsIGJ1ZmZlciwge1xyXG4gICAgICAgIGNvbnRlbnRUeXBlOiBmaWxlVHlwZSxcclxuICAgICAgICB1cHNlcnQ6IGZhbHNlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAodXBsb2FkRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGZpbGU6JywgdXBsb2FkRXJyb3IpO1xyXG4gICAgICAvLyBJZiBidWNrZXQgZG9lc24ndCBleGlzdCwgcmV0dXJuIGhlbHBmdWwgZXJyb3JcclxuICAgICAgaWYgKHVwbG9hZEVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBmb3VuZCcpIHx8IHVwbG9hZEVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0J1Y2tldCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICBlcnJvcjogJ1N0b3JhZ2UgYnVja2V0IG5vdCBjb25maWd1cmVkLiBQbGVhc2UgY3JlYXRlIGEgXCJwcm9maWxlLXBpY3R1cmVzXCIgYnVja2V0IGluIFN1cGFiYXNlIFN0b3JhZ2UuJyBcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogdXBsb2FkRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCBwdWJsaWMgVVJMXHJcbiAgICBjb25zdCB7IGRhdGE6IHVybERhdGEgfSA9IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgICAgLmZyb20oJ3Byb2ZpbGUtcGljdHVyZXMnKVxyXG4gICAgICAuZ2V0UHVibGljVXJsKGZpbGVQYXRoKTtcclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1cmw6IHVybERhdGEucHVibGljVXJsIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHVwbG9hZFByb2ZpbGVQaWN0dXJlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHVwbG9hZCBwcm9maWxlIHBpY3R1cmUnLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQcm9maWxlUGljdHVyZShlbWFpbDogc3RyaW5nLCBhdmF0YXJVcmw6IHN0cmluZyk6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBFeHRyYWN0IGZpbGUgcGF0aCBmcm9tIFVSTFxyXG4gICAgY29uc3QgdXJsUGFydHMgPSBhdmF0YXJVcmwuc3BsaXQoJy9wcm9maWxlLXBpY3R1cmVzLycpO1xyXG4gICAgaWYgKHVybFBhcnRzLmxlbmd0aCA8IDIpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBhdmF0YXIgVVJMJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbGVQYXRoID0gYGF2YXRhcnMvJHt1cmxQYXJ0c1sxXS5zcGxpdCgnLycpLnBvcCgpfWA7XHJcblxyXG4gICAgLy8gRGVsZXRlIGZyb20gc3RvcmFnZVxyXG4gICAgY29uc3QgeyBlcnJvcjogZGVsZXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgICAgLmZyb20oJ3Byb2ZpbGUtcGljdHVyZXMnKVxyXG4gICAgICAucmVtb3ZlKFtmaWxlUGF0aF0pO1xyXG5cclxuICAgIGlmIChkZWxldGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBmaWxlOicsIGRlbGV0ZUVycm9yKTtcclxuICAgICAgLy8gRG9uJ3QgZmFpbCBpZiBmaWxlIGRvZXNuJ3QgZXhpc3RcclxuICAgICAgaWYgKGRlbGV0ZUVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBmb3VuZCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZGVsZXRlRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZGVsZXRlUHJvZmlsZVBpY3R1cmU6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZGVsZXRlIHByb2ZpbGUgcGljdHVyZScsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUN1c3RvbWVyUHJvZmlsZShcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIGRhdGE6IFByb2ZpbGVVcGRhdGVJbnB1dFxyXG4pOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIHByb2ZpbGU/OiBQcm9maWxlO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgaW5wdXRcclxuICAgIGlmICghZGF0YS5maXJzdF9uYW1lPy50cmltKCkpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmlyc3QgbmFtZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuICAgIGlmICghZGF0YS5sYXN0X25hbWU/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdMYXN0IG5hbWUgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAoIWRhdGEuZW1haWw/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuICAgIGlmICghL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC8udGVzdChkYXRhLmVtYWlsKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGVtYWlsIGZvcm1hdCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiBwcm9maWxlIGV4aXN0c1xyXG4gICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1Byb2ZpbGUgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgIC5tYXliZVNpbmdsZSgpO1xyXG5cclxuICAgIC8vIElmIGF2YXRhcl91cmwgaXMgYmVpbmcgcmVtb3ZlZCwgZGVsZXRlIHRoZSBvbGQgZmlsZVxyXG4gICAgaWYgKGV4aXN0aW5nUHJvZmlsZT8uYXZhdGFyX3VybCAmJiBkYXRhLmF2YXRhcl91cmwgPT09IG51bGwpIHtcclxuICAgICAgYXdhaXQgZGVsZXRlUHJvZmlsZVBpY3R1cmUoZW1haWwsIGV4aXN0aW5nUHJvZmlsZS5hdmF0YXJfdXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gICAgaWYgKGV4aXN0aW5nUHJvZmlsZSkge1xyXG4gICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgcHJvZmlsZVxyXG4gICAgICAvLyBJZiBlbWFpbCBjaGFuZ2VkLCB3ZSBuZWVkIHRvIGhhbmRsZSBpdCBjYXJlZnVsbHlcclxuICAgICAgaWYgKGRhdGEuZW1haWwgIT09IGVtYWlsKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgbmV3IGVtYWlsIGFscmVhZHkgZXhpc3RzXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBlbWFpbENoZWNrIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAgIC5lcSgnZW1haWwnLCBkYXRhLmVtYWlsKVxyXG4gICAgICAgICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgICAgIGlmIChlbWFpbENoZWNrKSB7XHJcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBhbHJlYWR5IGV4aXN0cycgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHtcclxuICAgICAgICBmaXJzdF9uYW1lOiBkYXRhLmZpcnN0X25hbWUudHJpbSgpLFxyXG4gICAgICAgIGxhc3RfbmFtZTogZGF0YS5sYXN0X25hbWUudHJpbSgpLFxyXG4gICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLnRyaW0oKSxcclxuICAgICAgICBwaG9uZTogZGF0YS5waG9uZT8udHJpbSgpIHx8IG51bGwsXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gT25seSB1cGRhdGUgYXZhdGFyX3VybCBpZiBpdCdzIHByb3ZpZGVkXHJcbiAgICAgIGlmIChkYXRhLmF2YXRhcl91cmwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHVwZGF0ZURhdGEuYXZhdGFyX3VybCA9IGRhdGEuYXZhdGFyX3VybDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkUHJvZmlsZSwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgLnVwZGF0ZSh1cGRhdGVEYXRhKVxyXG4gICAgICAgIC5lcSgnZW1haWwnLCBlbWFpbClcclxuICAgICAgICAuc2VsZWN0KClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwcm9maWxlOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHVwZGF0ZUVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzdWx0ID0gdXBkYXRlZFByb2ZpbGU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBDcmVhdGUgbmV3IHByb2ZpbGVcclxuICAgICAgY29uc3QgaW5zZXJ0RGF0YTogYW55ID0ge1xyXG4gICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLnRyaW0oKSxcclxuICAgICAgICBwaG9uZTogZGF0YS5waG9uZT8udHJpbSgpIHx8IG51bGwsXHJcbiAgICAgICAgZmlyc3RfbmFtZTogZGF0YS5maXJzdF9uYW1lLnRyaW0oKSxcclxuICAgICAgICBsYXN0X25hbWU6IGRhdGEubGFzdF9uYW1lLnRyaW0oKSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIE9ubHkgc2V0IGF2YXRhcl91cmwgaWYgaXQncyBwcm92aWRlZFxyXG4gICAgICBpZiAoZGF0YS5hdmF0YXJfdXJsKSB7XHJcbiAgICAgICAgaW5zZXJ0RGF0YS5hdmF0YXJfdXJsID0gZGF0YS5hdmF0YXJfdXJsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7IGRhdGE6IG5ld1Byb2ZpbGUsIGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgICAgIC5pbnNlcnQoaW5zZXJ0RGF0YSlcclxuICAgICAgICAuc2VsZWN0KClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBwcm9maWxlOicsIGluc2VydEVycm9yKTtcclxuICAgICAgICAvLyBDaGVjayBpZiBpdCdzIGEgdW5pcXVlIGNvbnN0cmFpbnQgdmlvbGF0aW9uXHJcbiAgICAgICAgaWYgKGluc2VydEVycm9yLmNvZGUgPT09ICcyMzUwNScpIHtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0VtYWlsIGFscmVhZHkgZXhpc3RzJyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGluc2VydEVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzdWx0ID0gbmV3UHJvZmlsZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBwcm9maWxlOiByZXN1bHQgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gdXBkYXRlQ3VzdG9tZXJQcm9maWxlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHVwZGF0ZSBwcm9maWxlJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJMb2NhdGlvbnMoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwaG9uZT86IHN0cmluZ1xyXG4pOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGxvY2F0aW9ucz86IExvY2F0aW9uW107XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbG9jYXRpb25zJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5vcmRlcignaXNfZGVmYXVsdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcblxyXG4gICAgLy8gQnVpbGQgcXVlcnkgZm9yIGVtYWlsL3Bob25lIGxvb2t1cFxyXG4gICAgaWYgKGVtYWlsICYmIHBob25lKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkub3IoYGN1c3RvbWVyX2VtYWlsLmVxLiR7ZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7cGhvbmV9YCk7XHJcbiAgICB9IGVsc2UgaWYgKGVtYWlsKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ2N1c3RvbWVyX2VtYWlsJywgZW1haWwpO1xyXG4gICAgfSBlbHNlIGlmIChwaG9uZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjdXN0b21lcl9waG9uZScsIHBob25lKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0VtYWlsIG9yIHBob25lIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBsb2NhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBsb2NhdGlvbnM6IGRhdGEgfHwgW10gfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0Q3VzdG9tZXJMb2NhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggbG9jYXRpb25zJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTG9jYXRpb24oXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwaG9uZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxyXG4gIGxvY2F0aW9uRGF0YTogTG9jYXRpb25DcmVhdGVJbnB1dFxyXG4pOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGxvY2F0aW9uPzogTG9jYXRpb247XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBpbnB1dFxyXG4gICAgaWYgKCFsb2NhdGlvbkRhdGEubmlja25hbWU/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdOaWNrbmFtZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuICAgIGlmICghbG9jYXRpb25EYXRhLmFkZHJlc3M/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBZGRyZXNzIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG4gICAgaWYgKCFsb2NhdGlvbkRhdGEuc3VidXJiPy50cmltKCkpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnU3VidXJiIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG4gICAgaWYgKCFsb2NhdGlvbkRhdGEuY2l0eT8udHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0NpdHkgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgc2V0dGluZyBhcyBkZWZhdWx0LCB1bnNldCBhbGwgb3RoZXIgZGVmYXVsdHMgZm9yIHRoaXMgY3VzdG9tZXJcclxuICAgIGlmIChsb2NhdGlvbkRhdGEuaXNfZGVmYXVsdCkge1xyXG4gICAgICBsZXQgdXBkYXRlUXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAgIC51cGRhdGUoeyBpc19kZWZhdWx0OiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkub3IoYGN1c3RvbWVyX2VtYWlsLmVxLiR7ZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7cGhvbmV9YCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZW1haWwpIHtcclxuICAgICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgICAgfSBlbHNlIGlmIChwaG9uZSkge1xyXG4gICAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkuZXEoJ2N1c3RvbWVyX3Bob25lJywgcGhvbmUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVRdWVyeTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGE6IG5ld0xvY2F0aW9uLCBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBjdXN0b21lcl9lbWFpbDogZW1haWwsXHJcbiAgICAgICAgY3VzdG9tZXJfcGhvbmU6IHBob25lIHx8IG51bGwsXHJcbiAgICAgICAgbmlja25hbWU6IGxvY2F0aW9uRGF0YS5uaWNrbmFtZS50cmltKCksXHJcbiAgICAgICAgYWRkcmVzczogbG9jYXRpb25EYXRhLmFkZHJlc3MudHJpbSgpLFxyXG4gICAgICAgIGFwdF91bml0OiBsb2NhdGlvbkRhdGEuYXB0X3VuaXQ/LnRyaW0oKSB8fCBudWxsLFxyXG4gICAgICAgIHN1YnVyYjogbG9jYXRpb25EYXRhLnN1YnVyYi50cmltKCksXHJcbiAgICAgICAgY2l0eTogbG9jYXRpb25EYXRhLmNpdHkudHJpbSgpLFxyXG4gICAgICAgIHBvc3RhbF9jb2RlOiBsb2NhdGlvbkRhdGEucG9zdGFsX2NvZGU/LnRyaW0oKSB8fCBudWxsLFxyXG4gICAgICAgIGlzX2RlZmF1bHQ6IGxvY2F0aW9uRGF0YS5pc19kZWZhdWx0IHx8IGZhbHNlLFxyXG4gICAgICB9KVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChpbnNlcnRFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBsb2NhdGlvbjonLCBpbnNlcnRFcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogaW5zZXJ0RXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGxvY2F0aW9uOiBuZXdMb2NhdGlvbiB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBjcmVhdGVMb2NhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBjcmVhdGUgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVMb2NhdGlvbihcclxuICBsb2NhdGlvbklkOiBzdHJpbmcsXHJcbiAgbG9jYXRpb25EYXRhOiBMb2NhdGlvblVwZGF0ZUlucHV0XHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgbG9jYXRpb24/OiBMb2NhdGlvbjtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIGlucHV0IGlmIHByb3ZpZGVkXHJcbiAgICBpZiAobG9jYXRpb25EYXRhLm5pY2tuYW1lICE9PSB1bmRlZmluZWQgJiYgIWxvY2F0aW9uRGF0YS5uaWNrbmFtZS50cmltKCkpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTmlja25hbWUgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25EYXRhLmFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiAhbG9jYXRpb25EYXRhLmFkZHJlc3MudHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FkZHJlc3MgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25EYXRhLnN1YnVyYiAhPT0gdW5kZWZpbmVkICYmICFsb2NhdGlvbkRhdGEuc3VidXJiLnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdTdWJ1cmIgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25EYXRhLmNpdHkgIT09IHVuZGVmaW5lZCAmJiAhbG9jYXRpb25EYXRhLmNpdHkudHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0NpdHkgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IGN1cnJlbnQgbG9jYXRpb24gdG8gY2hlY2sgY3VzdG9tZXIgZW1haWxcclxuICAgIGNvbnN0IHsgZGF0YTogY3VycmVudExvY2F0aW9uLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2xvY2F0aW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJ2N1c3RvbWVyX2VtYWlsLCBjdXN0b21lcl9waG9uZScpXHJcbiAgICAgIC5lcSgnaWQnLCBsb2NhdGlvbklkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGZldGNoRXJyb3IgfHwgIWN1cnJlbnRMb2NhdGlvbikge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdMb2NhdGlvbiBub3QgZm91bmQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgc2V0dGluZyBhcyBkZWZhdWx0LCB1bnNldCBhbGwgb3RoZXIgZGVmYXVsdHMgZm9yIHRoaXMgY3VzdG9tZXJcclxuICAgIGlmIChsb2NhdGlvbkRhdGEuaXNfZGVmYXVsdCkge1xyXG4gICAgICBsZXQgdXBkYXRlUXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAgIC51cGRhdGUoeyBpc19kZWZhdWx0OiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIGlmIChjdXJyZW50TG9jYXRpb24uY3VzdG9tZXJfZW1haWwgJiYgY3VycmVudExvY2F0aW9uLmN1c3RvbWVyX3Bob25lKSB7XHJcbiAgICAgICAgdXBkYXRlUXVlcnkgPSB1cGRhdGVRdWVyeS5vcihgY3VzdG9tZXJfZW1haWwuZXEuJHtjdXJyZW50TG9jYXRpb24uY3VzdG9tZXJfZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7Y3VycmVudExvY2F0aW9uLmN1c3RvbWVyX3Bob25lfWApO1xyXG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9lbWFpbCkge1xyXG4gICAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkuZXEoJ2N1c3RvbWVyX2VtYWlsJywgY3VycmVudExvY2F0aW9uLmN1c3RvbWVyX2VtYWlsKTtcclxuICAgICAgfSBlbHNlIGlmIChjdXJyZW50TG9jYXRpb24uY3VzdG9tZXJfcGhvbmUpIHtcclxuICAgICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5LmVxKCdjdXN0b21lcl9waG9uZScsIGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9waG9uZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIERvbid0IHVuc2V0IHRoZSBjdXJyZW50IGxvY2F0aW9uXHJcbiAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkubmVxKCdpZCcsIGxvY2F0aW9uSWQpO1xyXG5cclxuICAgICAgYXdhaXQgdXBkYXRlUXVlcnk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQnVpbGQgdXBkYXRlIG9iamVjdCB3aXRoIG9ubHkgcHJvdmlkZWQgZmllbGRzXHJcbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7XHJcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5uaWNrbmFtZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHVwZGF0ZURhdGEubmlja25hbWUgPSBsb2NhdGlvbkRhdGEubmlja25hbWUudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5hZGRyZXNzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXBkYXRlRGF0YS5hZGRyZXNzID0gbG9jYXRpb25EYXRhLmFkZHJlc3MudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5hcHRfdW5pdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHVwZGF0ZURhdGEuYXB0X3VuaXQgPSBsb2NhdGlvbkRhdGEuYXB0X3VuaXQ/LnRyaW0oKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5zdWJ1cmIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB1cGRhdGVEYXRhLnN1YnVyYiA9IGxvY2F0aW9uRGF0YS5zdWJ1cmIudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5jaXR5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXBkYXRlRGF0YS5jaXR5ID0gbG9jYXRpb25EYXRhLmNpdHkudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5wb3N0YWxfY29kZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHVwZGF0ZURhdGEucG9zdGFsX2NvZGUgPSBsb2NhdGlvbkRhdGEucG9zdGFsX2NvZGU/LnRyaW0oKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5pc19kZWZhdWx0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXBkYXRlRGF0YS5pc19kZWZhdWx0ID0gbG9jYXRpb25EYXRhLmlzX2RlZmF1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkTG9jYXRpb24sIGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2xvY2F0aW9ucycpXHJcbiAgICAgIC51cGRhdGUodXBkYXRlRGF0YSlcclxuICAgICAgLmVxKCdpZCcsIGxvY2F0aW9uSWQpXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKHVwZGF0ZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGxvY2F0aW9uOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB1cGRhdGVFcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbG9jYXRpb246IHVwZGF0ZWRMb2NhdGlvbiB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiB1cGRhdGVMb2NhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB1cGRhdGUgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVMb2NhdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2xvY2F0aW9ucycpXHJcbiAgICAgIC5kZWxldGUoKVxyXG4gICAgICAuZXEoJ2lkJywgbG9jYXRpb25JZCk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGxvY2F0aW9uOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBkZWxldGVMb2NhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBkZWxldGUgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXREZWZhdWx0TG9jYXRpb24oXHJcbiAgbG9jYXRpb25JZDogc3RyaW5nLFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGhvbmU/OiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBsb2NhdGlvbj86IExvY2F0aW9uO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gR2V0IGN1cnJlbnQgbG9jYXRpb24gdG8gdmVyaWZ5IG93bmVyc2hpcFxyXG4gICAgY29uc3QgeyBkYXRhOiBjdXJyZW50TG9jYXRpb24sIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbG9jYXRpb25zJylcclxuICAgICAgLnNlbGVjdCgnY3VzdG9tZXJfZW1haWwsIGN1c3RvbWVyX3Bob25lJylcclxuICAgICAgLmVxKCdpZCcsIGxvY2F0aW9uSWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZmV0Y2hFcnJvciB8fCAhY3VycmVudExvY2F0aW9uKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0xvY2F0aW9uIG5vdCBmb3VuZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgb3duZXJzaGlwXHJcbiAgICBjb25zdCBpc093bmVyID0gXHJcbiAgICAgIGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9lbWFpbCA9PT0gZW1haWwgfHxcclxuICAgICAgKHBob25lICYmIGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9waG9uZSA9PT0gcGhvbmUpO1xyXG5cclxuICAgIGlmICghaXNPd25lcikge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVW5zZXQgYWxsIG90aGVyIGRlZmF1bHRzIGZvciB0aGlzIGN1c3RvbWVyXHJcbiAgICBsZXQgdXBkYXRlUXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbG9jYXRpb25zJylcclxuICAgICAgLnVwZGF0ZSh7IGlzX2RlZmF1bHQ6IGZhbHNlIH0pO1xyXG5cclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5Lm9yKGBjdXN0b21lcl9lbWFpbC5lcS4ke2VtYWlsfSxjdXN0b21lcl9waG9uZS5lcS4ke3Bob25lfWApO1xyXG4gICAgfSBlbHNlIGlmIChlbWFpbCkge1xyXG4gICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgdXBkYXRlUXVlcnkgPSB1cGRhdGVRdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRG9uJ3QgdW5zZXQgdGhlIGN1cnJlbnQgbG9jYXRpb25cclxuICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkubmVxKCdpZCcsIGxvY2F0aW9uSWQpO1xyXG5cclxuICAgIGF3YWl0IHVwZGF0ZVF1ZXJ5O1xyXG5cclxuICAgIC8vIFNldCB0aGlzIGxvY2F0aW9uIGFzIGRlZmF1bHRcclxuICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZExvY2F0aW9uLCBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAudXBkYXRlKHsgaXNfZGVmYXVsdDogdHJ1ZSB9KVxyXG4gICAgICAuZXEoJ2lkJywgbG9jYXRpb25JZClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyBkZWZhdWx0IGxvY2F0aW9uOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB1cGRhdGVFcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbG9jYXRpb246IHVwZGF0ZWRMb2NhdGlvbiB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBzZXREZWZhdWx0TG9jYXRpb246JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2V0IGRlZmF1bHQgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVJlZmVycmFsQ29kZShcclxuICBlbWFpbDogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgcmVmZXJyYWxDb2RlPzogc3RyaW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgcHJvZmlsZSBleGlzdHMgYW5kIGhhcyBhIHJlZmVycmFsIGNvZGVcclxuICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgncmVmZXJyYWxfY29kZScpXHJcbiAgICAgIC5lcSgnZW1haWwnLCBlbWFpbClcclxuICAgICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKHByb2ZpbGVFcnJvciAmJiBwcm9maWxlRXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9maWxlOicsIHByb2ZpbGVFcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcHJvZmlsZUVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBwcm9maWxlIGV4aXN0cyBhbmQgaGFzIGEgcmVmZXJyYWwgY29kZSwgcmV0dXJuIGl0XHJcbiAgICBpZiAocHJvZmlsZT8ucmVmZXJyYWxfY29kZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZWZlcnJhbENvZGU6IHByb2ZpbGUucmVmZXJyYWxfY29kZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYXRlIGEgbmV3IHJlZmVycmFsIGNvZGVcclxuICAgIC8vIFRyeSB1c2luZyB0aGUgZGF0YWJhc2UgZnVuY3Rpb24gZmlyc3QsIGJ1dCBmYWxsYmFjayB0byBjbGllbnQtc2lkZSBnZW5lcmF0aW9uXHJcbiAgICBsZXQgZ2VuZXJhdGVkQ29kZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YTogZGJDb2RlLCBlcnJvcjogY29kZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5ycGMoJ2dlbmVyYXRlX3JlZmVycmFsX2NvZGUnKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghY29kZUVycm9yICYmIGRiQ29kZSkge1xyXG4gICAgICAgIGdlbmVyYXRlZENvZGUgPSBkYkNvZGU7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKHJwY0Vycm9yKSB7XHJcbiAgICAgIC8vIFJQQyBmdW5jdGlvbiBtaWdodCBub3QgZXhpc3QgeWV0LCB0aGF0J3Mgb2theVxyXG4gICAgICBjb25zb2xlLmxvZygnUlBDIGZ1bmN0aW9uIG5vdCBhdmFpbGFibGUsIHVzaW5nIGZhbGxiYWNrJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFnZW5lcmF0ZWRDb2RlKSB7XHJcbiAgICAgIC8vIEZhbGxiYWNrOiBnZW5lcmF0ZSBjb2RlIGNsaWVudC1zaWRlIHN0eWxlXHJcbiAgICAgIGNvbnN0IGZhbGxiYWNrQ29kZSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgaWYgZmFsbGJhY2sgY29kZSBleGlzdHMsIHJldHJ5IGlmIGl0IGRvZXNcclxuICAgICAgbGV0IGZpbmFsQ29kZSA9IGZhbGxiYWNrQ29kZTtcclxuICAgICAgbGV0IGF0dGVtcHRzID0gMDtcclxuICAgICAgY29uc3QgbWF4QXR0ZW1wdHMgPSA1O1xyXG5cclxuICAgICAgd2hpbGUgKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcclxuICAgICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAgIC5lcSgncmVmZXJyYWxfY29kZScsIGZpbmFsQ29kZSlcclxuICAgICAgICAgIC5tYXliZVNpbmdsZSgpO1xyXG5cclxuICAgICAgICBpZiAoIWV4aXN0aW5nKSB7XHJcbiAgICAgICAgICBicmVhazsgLy8gQ29kZSBpcyB1bmlxdWVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IGNvZGVcclxuICAgICAgICBmaW5hbENvZGUgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOCkudG9VcHBlckNhc2UoKTtcclxuICAgICAgICBhdHRlbXB0cysrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVcGRhdGUgb3IgaW5zZXJ0IHByb2ZpbGUgd2l0aCByZWZlcnJhbCBjb2RlXHJcbiAgICAgIC8vIEZpcnN0LCB0cnkgdG8gdXBkYXRlIGV4aXN0aW5nIHByb2ZpbGVcclxuICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1Byb2ZpbGUgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAuc2VsZWN0KCdpZCwgZmlyc3RfbmFtZSwgbGFzdF9uYW1lJylcclxuICAgICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgICBsZXQgdXBkYXRlZFByb2ZpbGU7XHJcbiAgICAgIGlmIChleGlzdGluZ1Byb2ZpbGUpIHtcclxuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgcHJvZmlsZVxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZCwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgICAgICByZWZlcnJhbF9jb2RlOiBmaW5hbENvZGUsXHJcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgICAgICAuc2VsZWN0KCdyZWZlcnJhbF9jb2RlJylcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZUVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyByZWZlcnJhbCBjb2RlOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogdXBkYXRlRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cGRhdGVkUHJvZmlsZSA9IHVwZGF0ZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSW5zZXJ0IG5ldyBwcm9maWxlIHdpdGggcmVmZXJyYWwgY29kZVxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogaW5zZXJ0ZWQsIGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgICAuaW5zZXJ0KHtcclxuICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgIHJlZmVycmFsX2NvZGU6IGZpbmFsQ29kZSxcclxuICAgICAgICAgICAgZmlyc3RfbmFtZTogZW1haWwuc3BsaXQoJ0AnKVswXSxcclxuICAgICAgICAgICAgbGFzdF9uYW1lOiAnJyxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuc2VsZWN0KCdyZWZlcnJhbF9jb2RlJylcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgICAgaWYgKGluc2VydEVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyByZWZlcnJhbCBjb2RlOicsIGluc2VydEVycm9yKTtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogaW5zZXJ0RXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cGRhdGVkUHJvZmlsZSA9IGluc2VydGVkO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZWZlcnJhbENvZGU6IHVwZGF0ZWRQcm9maWxlPy5yZWZlcnJhbF9jb2RlIHx8IGZpbmFsQ29kZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVzZSB0aGUgZ2VuZXJhdGVkIGNvZGUgZnJvbSBkYXRhYmFzZSBmdW5jdGlvblxyXG4gICAgLy8gVXBkYXRlIG9yIGluc2VydCBwcm9maWxlIHdpdGggZ2VuZXJhdGVkIGNvZGVcclxuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdQcm9maWxlIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCwgZmlyc3RfbmFtZSwgbGFzdF9uYW1lJylcclxuICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsKVxyXG4gICAgICAubWF5YmVTaW5nbGUoKTtcclxuXHJcbiAgICBsZXQgdXBkYXRlZFByb2ZpbGU7XHJcbiAgICBpZiAoZXhpc3RpbmdQcm9maWxlKSB7XHJcbiAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBwcm9maWxlXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZCwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgICByZWZlcnJhbF9jb2RlOiBnZW5lcmF0ZWRDb2RlLFxyXG4gICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsKVxyXG4gICAgICAgIC5zZWxlY3QoJ3JlZmVycmFsX2NvZGUnKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmICh1cGRhdGVFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHJlZmVycmFsIGNvZGU6JywgdXBkYXRlRXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogdXBkYXRlRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICB9XHJcbiAgICAgIHVwZGF0ZWRQcm9maWxlID0gdXBkYXRlZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEluc2VydCBuZXcgcHJvZmlsZSB3aXRoIHJlZmVycmFsIGNvZGVcclxuICAgICAgY29uc3QgeyBkYXRhOiBpbnNlcnRlZCwgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgICBlbWFpbCxcclxuICAgICAgICAgIHJlZmVycmFsX2NvZGU6IGdlbmVyYXRlZENvZGUsXHJcbiAgICAgICAgICBmaXJzdF9uYW1lOiBlbWFpbC5zcGxpdCgnQCcpWzBdLFxyXG4gICAgICAgICAgbGFzdF9uYW1lOiAnJyxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zZWxlY3QoJ3JlZmVycmFsX2NvZGUnKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChpbnNlcnRFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHJlZmVycmFsIGNvZGU6JywgaW5zZXJ0RXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogaW5zZXJ0RXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICB9XHJcbiAgICAgIHVwZGF0ZWRQcm9maWxlID0gaW5zZXJ0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcmVmZXJyYWxDb2RlOiB1cGRhdGVkUHJvZmlsZT8ucmVmZXJyYWxfY29kZSB8fCBnZW5lcmF0ZWRDb2RlIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldE9yQ3JlYXRlUmVmZXJyYWxDb2RlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGdldCByZWZlcnJhbCBjb2RlJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZFJlZmVycmFsSW52aXRlcyhcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIGludml0ZUVtYWlsczogc3RyaW5nW10sXHJcbiAgcmVmZXJyYWxDb2RlOiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBzZW50PzogbnVtYmVyO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgZW1haWwgYWRkcmVzc2VzXHJcbiAgICBjb25zdCB2YWxpZEVtYWlscyA9IGludml0ZUVtYWlsc1xyXG4gICAgICAubWFwKChlKSA9PiBlLnRyaW0oKSlcclxuICAgICAgLmZpbHRlcigoZSkgPT4ge1xyXG4gICAgICAgIGlmICghZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLy50ZXN0KGUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAodmFsaWRFbWFpbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIHZhbGlkIGVtYWlsIGFkZHJlc3NlcyBwcm92aWRlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgcmVmZXJyYWwgcmVjb3JkcyBmb3IgdHJhY2tpbmdcclxuICAgIGNvbnN0IHJlZmVycmFsUmVjb3JkcyA9IHZhbGlkRW1haWxzLm1hcCgocmVmZXJyZWRFbWFpbCkgPT4gKHtcclxuICAgICAgcmVmZXJyZXJfZW1haWw6IGVtYWlsLFxyXG4gICAgICByZWZlcnJlZF9lbWFpbDogcmVmZXJyZWRFbWFpbCxcclxuICAgICAgcmVmZXJyYWxfY29kZTogcmVmZXJyYWxDb2RlLFxyXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgIH0pKTtcclxuXHJcbiAgICBjb25zdCB7IGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3JlZmVycmFscycpXHJcbiAgICAgIC5pbnNlcnQocmVmZXJyYWxSZWNvcmRzKTtcclxuXHJcbiAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcmVmZXJyYWwgcmVjb3JkczonLCBpbnNlcnRFcnJvcik7XHJcbiAgICAgIC8vIENvbnRpbnVlIGV2ZW4gaWYgaW5zZXJ0IGZhaWxzIC0gd2Ugc3RpbGwgd2FudCB0byBzZW5kIGVtYWlsc1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYXRlIHJlZmVycmFsIGxpbmtcclxuICAgIGNvbnN0IGJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TSVRFX1VSTCB8fCAnaHR0cHM6Ly9zaGFsZWFuLmNvLnphJztcclxuICAgIGNvbnN0IHJlZmVycmFsTGluayA9IGAke2Jhc2VVcmx9L2Jvb2tpbmcvZGV0YWlscz9yZWY9JHtyZWZlcnJhbENvZGV9YDtcclxuXHJcbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWN0dWFsIGVtYWlsIHNlbmRpbmcgdXNpbmcgeW91ciBlbWFpbCBzZXJ2aWNlIChSZXNlbmQsIFNlbmRHcmlkLCBldGMuKVxyXG4gICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCBsb2cgdGhlIGVtYWlscyB0aGF0IHdvdWxkIGJlIHNlbnRcclxuICAgIGNvbnNvbGUubG9nKCdSZWZlcnJhbCBpbnZpdGVzIHRvIHNlbmQ6Jywge1xyXG4gICAgICBmcm9tOiBlbWFpbCxcclxuICAgICAgdG86IHZhbGlkRW1haWxzLFxyXG4gICAgICByZWZlcnJhbENvZGUsXHJcbiAgICAgIHJlZmVycmFsTGluayxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgeW91IHdvdWxkIHNlbmQgZW1haWxzIGhlcmVcclxuICAgIC8vIEV4YW1wbGUgd2l0aCBSZXNlbmQ6XHJcbiAgICAvLyBhd2FpdCByZXNlbmQuZW1haWxzLnNlbmQoe1xyXG4gICAgLy8gICBmcm9tOiAnU2hhbGVhbiA8bm9yZXBseUBzaGFsZWFuLmNvLnphPicsXHJcbiAgICAvLyAgIHRvOiB2YWxpZEVtYWlscyxcclxuICAgIC8vICAgc3ViamVjdDogJ1lvdVxcJ3ZlIGJlZW4gaW52aXRlZCB0byB0cnkgU2hhbGVhbiBDbGVhbmluZyBTZXJ2aWNlcyEnLFxyXG4gICAgLy8gICBodG1sOiBgPHA+WW91ciBmcmllbmQgaGFzIGludml0ZWQgeW91IHRvIHRyeSBTaGFsZWFuLiBVc2UgY29kZSAke3JlZmVycmFsQ29kZX0gdG8gZ2V0IFIxNTAgb2ZmIHlvdXIgZmlyc3QgYm9va2luZyE8L3A+PHA+PGEgaHJlZj1cIiR7cmVmZXJyYWxMaW5rfVwiPkJvb2sgTm93PC9hPjwvcD5gLFxyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgc2VudDogdmFsaWRFbWFpbHMubGVuZ3RoIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHNlbmRSZWZlcnJhbEludml0ZXM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VuZCBpbnZpdGVzJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVmZXJyYWxTdGF0cyhcclxuICBlbWFpbDogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgc3RhdHM/OiB7XHJcbiAgICB0b3RhbFJlZmVycmFsczogbnVtYmVyO1xyXG4gICAgY29tcGxldGVkUmVmZXJyYWxzOiBudW1iZXI7XHJcbiAgICBwZW5kaW5nUmV3YXJkczogbnVtYmVyO1xyXG4gICAgdG90YWxSZXdhcmRzOiBudW1iZXI7XHJcbiAgfTtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIGNvbnN0IHsgZGF0YTogcmVmZXJyYWxzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3JlZmVycmFscycpXHJcbiAgICAgIC5zZWxlY3QoJ3N0YXR1cywgcmVmZXJyZXJfcmV3YXJkX2Ftb3VudCwgcmVmZXJyZXJfcmV3YXJkX3N0YXR1cycpXHJcbiAgICAgIC5lcSgncmVmZXJyZXJfZW1haWwnLCBlbWFpbCk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHJlZmVycmFsIHN0YXRzOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RhdHMgPSB7XHJcbiAgICAgIHRvdGFsUmVmZXJyYWxzOiByZWZlcnJhbHM/Lmxlbmd0aCB8fCAwLFxyXG4gICAgICBjb21wbGV0ZWRSZWZlcnJhbHM6XHJcbiAgICAgICAgcmVmZXJyYWxzPy5maWx0ZXIoKHIpID0+IHIuc3RhdHVzID09PSAnY29tcGxldGVkJykubGVuZ3RoIHx8IDAsXHJcbiAgICAgIHBlbmRpbmdSZXdhcmRzOlxyXG4gICAgICAgIHJlZmVycmFscz8uZmlsdGVyKChyKSA9PiByLnJlZmVycmVyX3Jld2FyZF9zdGF0dXMgPT09ICdwZW5kaW5nJykubGVuZ3RoIHx8IDAsXHJcbiAgICAgIHRvdGFsUmV3YXJkczpcclxuICAgICAgICByZWZlcnJhbHNcclxuICAgICAgICAgID8uZmlsdGVyKChyKSA9PiByLnJlZmVycmVyX3Jld2FyZF9zdGF0dXMgPT09ICdjcmVkaXRlZCcpXHJcbiAgICAgICAgICAucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIChyLnJlZmVycmVyX3Jld2FyZF9hbW91bnQgfHwgMCksIDApIHx8IDAsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHN0YXRzIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldFJlZmVycmFsU3RhdHM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggcmVmZXJyYWwgc3RhdHMnLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGEgY3JlZGl0IHB1cmNoYXNlIHdpdGggUGF5c3RhY2tcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplQ3JlZGl0UHVyY2hhc2UoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBhbW91bnQ6IG51bWJlcixcclxuICBwYXltZW50TWV0aG9kOiAnY3JlZGl0X2NhcmQnIHwgJ2VmdCdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBhdXRob3JpemF0aW9uVXJsPzogc3RyaW5nO1xyXG4gIHJlZmVyZW5jZT86IHN0cmluZztcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoYW1vdW50IDwgMjAgfHwgYW1vdW50ID4gNTAwMCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnQW1vdW50IG11c3QgYmUgYmV0d2VlbiBSMjAgYW5kIFI1MDAwJyxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSByZWZlcmVuY2UgZm9yIHRoaXMgY3JlZGl0IHB1cmNoYXNlXHJcbiAgICBjb25zdCByZWZlcmVuY2UgPSBgQ1JFRElUXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOSl9YDtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSBwZW5kaW5nIGNyZWRpdCB0cmFuc2FjdGlvblxyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuICAgIFxyXG4gICAgLy8gR2V0IG9yIGNyZWF0ZSBwcm9maWxlXHJcbiAgICBsZXQgeyBkYXRhOiBwcm9maWxlIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCwgY3JlZGl0X2JhbGFuY2UnKVxyXG4gICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgIC5tYXliZVNpbmdsZSgpO1xyXG5cclxuICAgIGlmICghcHJvZmlsZSkge1xyXG4gICAgICAvLyBDcmVhdGUgYSBiYXNpYyBwcm9maWxlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcclxuICAgICAgY29uc3QgeyBkYXRhOiBuZXdQcm9maWxlLCBlcnJvcjogY3JlYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAuaW5zZXJ0KHtcclxuICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgY3JlZGl0X2JhbGFuY2U6IDAsXHJcbiAgICAgICAgICBmaXJzdF9uYW1lOiAnJyxcclxuICAgICAgICAgIGxhc3RfbmFtZTogJycsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc2VsZWN0KCdpZCwgY3JlZGl0X2JhbGFuY2UnKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChjcmVhdGVFcnJvciB8fCAhbmV3UHJvZmlsZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBwcm9maWxlJyxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIHByb2ZpbGUgPSBuZXdQcm9maWxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSBwZW5kaW5nIGNyZWRpdCB0cmFuc2FjdGlvblxyXG4gICAgY29uc3QgeyBlcnJvcjogdHJhbnNhY3Rpb25FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2NyZWRpdF90cmFuc2FjdGlvbnMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBwcm9maWxlX2lkOiBwcm9maWxlLmlkLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHRyYW5zYWN0aW9uX3R5cGU6ICdwdXJjaGFzZScsXHJcbiAgICAgICAgYW1vdW50LFxyXG4gICAgICAgIGJhbGFuY2VfYmVmb3JlOiBwcm9maWxlLmNyZWRpdF9iYWxhbmNlIHx8IDAsXHJcbiAgICAgICAgYmFsYW5jZV9hZnRlcjogcHJvZmlsZS5jcmVkaXRfYmFsYW5jZSB8fCAwLCAvLyBXb24ndCB1cGRhdGUgdW50aWwgcGF5bWVudCBzdWNjZWVkc1xyXG4gICAgICAgIHBheW1lbnRfbWV0aG9kOiBwYXltZW50TWV0aG9kLFxyXG4gICAgICAgIHBheXN0YWNrX3JlZmVyZW5jZTogcmVmZXJlbmNlLFxyXG4gICAgICAgIHBheW1lbnRfc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IGBQdXJjaGFzZSBvZiBSJHthbW91bnR9IFNoYWxlYW5DcmVkYCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKHRyYW5zYWN0aW9uRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgY3JlZGl0IHRyYW5zYWN0aW9uOicsIHRyYW5zYWN0aW9uRXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSB0cmFuc2FjdGlvbiByZWNvcmQnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluaXRpYWxpemUgUGF5c3RhY2sgcGF5bWVudFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9wYXlzdGFjay9pbml0aWFsaXplJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICBhbW91bnQsXHJcbiAgICAgICAgcmVmZXJlbmNlLFxyXG4gICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiAnY3JlZGl0X3B1cmNoYXNlJyxcclxuICAgICAgICAgIHBheW1lbnRfbWV0aG9kOiBwYXltZW50TWV0aG9kLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IuZXJyb3IgfHwgJ0ZhaWxlZCB0byBpbml0aWFsaXplIHBheW1lbnQnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBheW1lbnREYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgIGlmICghcGF5bWVudERhdGEuc3RhdHVzKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHBheW1lbnREYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBpbml0aWFsaXplIHBheW1lbnQnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGF1dGhvcml6YXRpb25Vcmw6IHBheW1lbnREYXRhLmRhdGEuYXV0aG9yaXphdGlvbl91cmwsXHJcbiAgICAgIHJlZmVyZW5jZTogcGF5bWVudERhdGEuZGF0YS5yZWZlcmVuY2UsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgY3JlZGl0IHB1cmNoYXNlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGluaXRpYWxpemUgcGF5bWVudCcsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWb3VjaGVyUmVkZW1wdGlvbiB7XHJcbiAgaWQ6IHN0cmluZztcclxuICB2b3VjaGVyX2NvZGU6IHN0cmluZztcclxuICBhbW91bnQ6IG51bWJlcjtcclxuICByZWRlZW1lZF9hdDogc3RyaW5nO1xyXG4gIGJvb2tpbmdfaWQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWRlZW1Wb3VjaGVyKFxyXG4gIGNvZGU6IHN0cmluZyxcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIHBob25lPzogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgYW1vdW50PzogbnVtYmVyO1xyXG4gIG5ld0JhbGFuY2U/OiBudW1iZXI7XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBDYWxsIHRoZSBkYXRhYmFzZSBmdW5jdGlvbiB0byByZWRlZW0gdGhlIHZvdWNoZXJcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygncmVkZWVtX3ZvdWNoZXInLCB7XHJcbiAgICAgIHBfY29kZTogY29kZS50cmltKCkudG9VcHBlckNhc2UoKSxcclxuICAgICAgcF9lbWFpbDogZW1haWwudHJpbSgpLFxyXG4gICAgICBwX3Bob25lOiBwaG9uZT8udHJpbSgpIHx8IG51bGwsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVkZWVtaW5nIHZvdWNoZXI6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gcmVkZWVtIHZvdWNoZXInLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFBhcnNlIHRoZSByZXN1bHQgZnJvbSB0aGUgZnVuY3Rpb24gKGhhbmRsZSBib3RoIG9iamVjdCBhbmQgc3RyaW5nIEpTT05CKVxyXG4gICAgbGV0IHJlc3VsdCA9IGRhdGE7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgdm91Y2hlciByZWRlbXB0aW9uIHJlc3VsdDonLCBwYXJzZUVycm9yKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgcmVzcG9uc2UgZnJvbSBzZXJ2ZXInLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnICYmICdzdWNjZXNzJyBpbiByZXN1bHQpIHtcclxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzID09PSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiByZXN1bHQuZXJyb3IgfHwgJ0ZhaWxlZCB0byByZWRlZW0gdm91Y2hlcicsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGFtb3VudDogcmVzdWx0LmFtb3VudCxcclxuICAgICAgICBuZXdCYWxhbmNlOiByZXN1bHQubmV3X2JhbGFuY2UsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiAnVW5leHBlY3RlZCByZXNwb25zZSBmcm9tIHNlcnZlcicsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiByZWRlZW1Wb3VjaGVyOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHJlZGVlbSB2b3VjaGVyJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Vm91Y2hlclJlZGVtcHRpb25zKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGhvbmU/OiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICByZWRlbXB0aW9ucz86IFZvdWNoZXJSZWRlbXB0aW9uW107XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndm91Y2hlcl9yZWRlbXB0aW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJ2lkLCB2b3VjaGVyX2NvZGUsIGFtb3VudCwgcmVkZWVtZWRfYXQsIGJvb2tpbmdfaWQnKVxyXG4gICAgICAub3JkZXIoJ3JlZGVlbWVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICAgIC8vIEJ1aWxkIHF1ZXJ5IGZvciBlbWFpbC9waG9uZSBsb29rdXBcclxuICAgIC8vIFByaW9yaXRpemUgZW1haWwgYXMgaXQncyB0aGUgcHJpbWFyeSBpZGVudGlmaWVyIHRvIHByZXZlbnQgY3Jvc3MtYWNjb3VudCB2aXNpYmlsaXR5XHJcbiAgICBpZiAoZW1haWwpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnZW1haWwnLCBlbWFpbCk7XHJcbiAgICAgIC8vIElmIHBob25lIGlzIGFsc28gcHJvdmlkZWQsIHdlIGNhbiBvcHRpb25hbGx5IGZpbHRlciBieSBib3RoIGZvciBleHRyYSBzZWN1cml0eVxyXG4gICAgICAvLyBidXQgZW1haWwgYWxvbmUgc2hvdWxkIGJlIHN1ZmZpY2llbnQgc2luY2UgaXQncyB1bmlxdWVcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgncGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBvciBwaG9uZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdm91Y2hlciByZWRlbXB0aW9uczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRyYW5zZm9ybSB0aGUgZGF0YSB0byBtYXRjaCB0aGUgaW50ZXJmYWNlXHJcbiAgICBjb25zdCByZWRlbXB0aW9uczogVm91Y2hlclJlZGVtcHRpb25bXSA9IChkYXRhIHx8IFtdKS5tYXAoKHJlZGVtcHRpb24pID0+ICh7XHJcbiAgICAgIGlkOiByZWRlbXB0aW9uLmlkLFxyXG4gICAgICB2b3VjaGVyX2NvZGU6IHJlZGVtcHRpb24udm91Y2hlcl9jb2RlLFxyXG4gICAgICBhbW91bnQ6IHJlZGVtcHRpb24uYW1vdW50LFxyXG4gICAgICByZWRlZW1lZF9hdDogcmVkZW1wdGlvbi5yZWRlZW1lZF9hdCxcclxuICAgICAgYm9va2luZ19pZDogcmVkZW1wdGlvbi5ib29raW5nX2lkIHx8IHVuZGVmaW5lZCxcclxuICAgIH0pKTtcclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZWRlbXB0aW9ucyB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRWb3VjaGVyUmVkZW1wdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggdm91Y2hlciByZWRlbXB0aW9ucycsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJrU0FteENzQixvTUFBQSJ9
}),
"[project]/app/dashboard/data:9049d1 [app-client] (ecmascript) <text/javascript>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getAuthenticatedUser",
    ()=>$$RSC_SERVER_ACTION_0
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js [app-client] (ecmascript)");
/* __next_internal_action_entry_do_not_use__ [{"00d62cc413d9b16ce2ea0ff37e9486d3704f49d049":"getAuthenticatedUser"},"app/dashboard/actions.ts",""] */ "use turbopack no side effects";
;
const $$RSC_SERVER_ACTION_0 = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createServerReference"])("00d62cc413d9b16ce2ea0ff37e9486d3704f49d049", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["callServer"], void 0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$webpack$2f$loaders$2f$next$2d$flight$2d$loader$2f$action$2d$client$2d$wrapper$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["findSourceMapURL"], "getAuthenticatedUser");
;
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
 //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4vYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcic7XHJcblxyXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBCb29raW5nIH0gZnJvbSAnQC90eXBlcy9ib29raW5nJztcclxuaW1wb3J0IHsgUHJvZmlsZSwgUHJvZmlsZVVwZGF0ZUlucHV0IH0gZnJvbSAnQC90eXBlcy9wcm9maWxlJztcclxuaW1wb3J0IHsgTG9jYXRpb24sIExvY2F0aW9uQ3JlYXRlSW5wdXQsIExvY2F0aW9uVXBkYXRlSW5wdXQgfSBmcm9tICdAL3R5cGVzL2xvY2F0aW9uJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdXRoZW50aWNhdGVkVXNlcigpOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGVtYWlsPzogc3RyaW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCk7XHJcblxyXG4gICAgaWYgKGVycm9yIHx8ICF1c2VyKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vdCBhdXRoZW50aWNhdGVkJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGVtYWlsOiB1c2VyLmVtYWlsIHx8IHVuZGVmaW5lZCB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRBdXRoZW50aWNhdGVkVXNlcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBnZXQgdXNlcicsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1c3RvbWVyQm9va2luZ3MoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwaG9uZT86IHN0cmluZyxcclxuICBmaWx0ZXI/OiAnYWxsJyB8ICd1cGNvbWluZycgfCAnY29tcGxldGVkJyB8ICdjYW5jZWxsZWQnXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgYm9va2luZ3M/OiBCb29raW5nW107XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnYm9va2luZ3MnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLm9yZGVyKCdzZXJ2aWNlX2RhdGUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICAgIC8vIEJ1aWxkIHF1ZXJ5IGZvciBlbWFpbC9waG9uZSBsb29rdXBcclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKGBjdXN0b21lcl9lbWFpbC5lcS4ke2VtYWlsfSxjdXN0b21lcl9waG9uZS5lcS4ke3Bob25lfWApO1xyXG4gICAgfSBlbHNlIGlmIChlbWFpbCkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBvciBwaG9uZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBcHBseSBzdGF0dXMgZmlsdGVyXHJcbiAgICBpZiAoZmlsdGVyICYmIGZpbHRlciAhPT0gJ2FsbCcpIHtcclxuICAgICAgaWYgKGZpbHRlciA9PT0gJ3VwY29taW5nJykge1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuaW4oJ3N0YXR1cycsIFsncGVuZGluZycsICdjb25maXJtZWQnXSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnc3RhdHVzJywgZmlsdGVyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBib29raW5nczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGJvb2tpbmdzOiBkYXRhIHx8IFtdIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldEN1c3RvbWVyQm9va2luZ3M6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggYm9va2luZ3MnLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDdXN0b21lckJvb2tpbmdTdGF0cyhcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIHBob25lPzogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgc3RhdHM/OiB7XHJcbiAgICB0b3RhbDogbnVtYmVyO1xyXG4gICAgdXBjb21pbmc6IG51bWJlcjtcclxuICAgIGNvbXBsZXRlZDogbnVtYmVyO1xyXG4gICAgY2FuY2VsbGVkOiBudW1iZXI7XHJcbiAgICB0b3RhbFNwZW50OiBudW1iZXI7XHJcbiAgfTtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdib29raW5ncycpXHJcbiAgICAgIC5zZWxlY3QoJ3N0YXR1cywgdG90YWxfYW1vdW50LCBwYXltZW50X3N0YXR1cycpO1xyXG5cclxuICAgIC8vIEJ1aWxkIHF1ZXJ5IGZvciBlbWFpbC9waG9uZSBsb29rdXBcclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKGBjdXN0b21lcl9lbWFpbC5lcS4ke2VtYWlsfSxjdXN0b21lcl9waG9uZS5lcS4ke3Bob25lfWApO1xyXG4gICAgfSBlbHNlIGlmIChlbWFpbCkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBvciBwaG9uZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RhdHMgPSB7XHJcbiAgICAgIHRvdGFsOiBkYXRhPy5sZW5ndGggfHwgMCxcclxuICAgICAgdXBjb21pbmc6IGRhdGE/LmZpbHRlcigoYikgPT4gYi5zdGF0dXMgPT09ICdwZW5kaW5nJyB8fCBiLnN0YXR1cyA9PT0gJ2NvbmZpcm1lZCcpLmxlbmd0aCB8fCAwLFxyXG4gICAgICBjb21wbGV0ZWQ6IGRhdGE/LmZpbHRlcigoYikgPT4gYi5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKS5sZW5ndGggfHwgMCxcclxuICAgICAgY2FuY2VsbGVkOiBkYXRhPy5maWx0ZXIoKGIpID0+IGIuc3RhdHVzID09PSAnY2FuY2VsbGVkJykubGVuZ3RoIHx8IDAsXHJcbiAgICAgIHRvdGFsU3BlbnQ6IGRhdGFcclxuICAgICAgICA/LmZpbHRlcigoYikgPT4gYi5wYXltZW50X3N0YXR1cyA9PT0gJ3BhaWQnKVxyXG4gICAgICAgIC5yZWR1Y2UoKHN1bSwgYikgPT4gc3VtICsgKGIudG90YWxfYW1vdW50IHx8IDApLCAwKSB8fCAwLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBzdGF0cyB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBmZXRjaCBzdGF0cycsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJvb2tpbmdCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGJvb2tpbmc/OiBCb29raW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2Jvb2tpbmdzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnaWQnLCBpZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBib29raW5nOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQm9va2luZyBub3QgZm91bmQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgYm9va2luZzogZGF0YSB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIGZldGNoaW5nIGJvb2tpbmc6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJQcm9maWxlKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGhvbmU/OiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBwcm9maWxlPzogUHJvZmlsZTtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIC8vIEZpcnN0LCB0cnkgdG8gZ2V0IHByb2ZpbGUgZnJvbSBwcm9maWxlcyB0YWJsZVxyXG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2UuZnJvbSgncHJvZmlsZXMnKS5zZWxlY3QoJyonKTtcclxuXHJcbiAgICBpZiAoZW1haWwpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnZW1haWwnLCBlbWFpbCk7XHJcbiAgICB9IGVsc2UgaWYgKHBob25lKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3Bob25lJywgcGhvbmUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRW1haWwgb3IgcGhvbmUgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhOiBwcm9maWxlRGF0YSwgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgcXVlcnkubWF5YmVTaW5nbGUoKTtcclxuXHJcbiAgICAvLyBJZiBwcm9maWxlIGV4aXN0cywgcmV0dXJuIGl0XHJcbiAgICBpZiAocHJvZmlsZURhdGEgJiYgIXByb2ZpbGVFcnJvcikge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBwcm9maWxlOiBwcm9maWxlRGF0YSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIG5vIHByb2ZpbGUgZXhpc3RzLCBkZXJpdmUgZnJvbSBtb3N0IHJlY2VudCBib29raW5nXHJcbiAgICBsZXQgYm9va2luZ1F1ZXJ5ID0gc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2Jvb2tpbmdzJylcclxuICAgICAgLnNlbGVjdCgnY3VzdG9tZXJfZmlyc3RfbmFtZSwgY3VzdG9tZXJfbGFzdF9uYW1lLCBjdXN0b21lcl9lbWFpbCwgY3VzdG9tZXJfcGhvbmUnKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLmxpbWl0KDEpO1xyXG5cclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICBib29raW5nUXVlcnkgPSBib29raW5nUXVlcnkub3IoYGN1c3RvbWVyX2VtYWlsLmVxLiR7ZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7cGhvbmV9YCk7XHJcbiAgICB9IGVsc2UgaWYgKGVtYWlsKSB7XHJcbiAgICAgIGJvb2tpbmdRdWVyeSA9IGJvb2tpbmdRdWVyeS5lcSgnY3VzdG9tZXJfZW1haWwnLCBlbWFpbCk7XHJcbiAgICB9IGVsc2UgaWYgKHBob25lKSB7XHJcbiAgICAgIGJvb2tpbmdRdWVyeSA9IGJvb2tpbmdRdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhOiBib29raW5nRGF0YSwgZXJyb3I6IGJvb2tpbmdFcnJvciB9ID0gYXdhaXQgYm9va2luZ1F1ZXJ5Lm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGJvb2tpbmdFcnJvciB8fCAhYm9va2luZ0RhdGEpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ05vIHByb2ZpbGUgb3IgYm9va2luZyBmb3VuZC4gUGxlYXNlIGNyZWF0ZSBhIGJvb2tpbmcgZmlyc3QuJyxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgYSBwcm9maWxlIG9iamVjdCBmcm9tIGJvb2tpbmcgZGF0YVxyXG4gICAgY29uc3QgZGVyaXZlZFByb2ZpbGU6IFByb2ZpbGUgPSB7XHJcbiAgICAgIGlkOiAnJywgLy8gV2lsbCBiZSBnZW5lcmF0ZWQgd2hlbiBzYXZlZFxyXG4gICAgICBlbWFpbDogYm9va2luZ0RhdGEuY3VzdG9tZXJfZW1haWwsXHJcbiAgICAgIHBob25lOiBib29raW5nRGF0YS5jdXN0b21lcl9waG9uZSB8fCBudWxsLFxyXG4gICAgICBmaXJzdF9uYW1lOiBib29raW5nRGF0YS5jdXN0b21lcl9maXJzdF9uYW1lLFxyXG4gICAgICBsYXN0X25hbWU6IGJvb2tpbmdEYXRhLmN1c3RvbWVyX2xhc3RfbmFtZSxcclxuICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHByb2ZpbGU6IGRlcml2ZWRQcm9maWxlIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldEN1c3RvbWVyUHJvZmlsZTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBmZXRjaCBwcm9maWxlJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBsb2FkUHJvZmlsZVBpY3R1cmUoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBmaWxlRGF0YTogc3RyaW5nLCAvLyBiYXNlNjQgZW5jb2RlZCBzdHJpbmdcclxuICBmaWxlTmFtZTogc3RyaW5nLFxyXG4gIGZpbGVUeXBlOiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICB1cmw/OiBzdHJpbmc7XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBmaWxlIHR5cGVcclxuICAgIGNvbnN0IHZhbGlkSW1hZ2VUeXBlcyA9IFsnaW1hZ2UvanBlZycsICdpbWFnZS9qcGcnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL3dlYnAnXTtcclxuICAgIGlmICghdmFsaWRJbWFnZVR5cGVzLmluY2x1ZGVzKGZpbGVUeXBlKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGZpbGUgdHlwZS4gUGxlYXNlIHVwbG9hZCBhIEpQRUcsIFBORywgb3IgV2ViUCBpbWFnZS4nIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVjb2RlIGJhc2U2NCBkYXRhXHJcbiAgICBjb25zdCBiYXNlNjREYXRhID0gZmlsZURhdGEucmVwbGFjZSgvXmRhdGE6aW1hZ2VcXC9cXHcrO2Jhc2U2NCwvLCAnJyk7XHJcbiAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShiYXNlNjREYXRhLCAnYmFzZTY0Jyk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgZmlsZSBzaXplIChtYXggNU1CKVxyXG4gICAgY29uc3QgbWF4U2l6ZSA9IDUgKiAxMDI0ICogMTAyNDsgLy8gNU1CIGluIGJ5dGVzXHJcbiAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IG1heFNpemUpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmlsZSBzaXplIHRvbyBsYXJnZS4gUGxlYXNlIHVwbG9hZCBhbiBpbWFnZSBzbWFsbGVyIHRoYW4gNU1CLicgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgZmlsZW5hbWUgdXNpbmcgZW1haWwgYW5kIHRpbWVzdGFtcFxyXG4gICAgY29uc3QgZmlsZUV4dCA9IGZpbGVOYW1lLnNwbGl0KCcuJykucG9wKCkgfHwgJ2pwZyc7XHJcbiAgICBjb25zdCBzYW5pdGl6ZWRFbWFpbCA9IGVtYWlsLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpO1xyXG4gICAgY29uc3QgdW5pcXVlRmlsZU5hbWUgPSBgJHtzYW5pdGl6ZWRFbWFpbH1fJHtEYXRlLm5vdygpfS4ke2ZpbGVFeHR9YDtcclxuICAgIGNvbnN0IGZpbGVQYXRoID0gYGF2YXRhcnMvJHt1bmlxdWVGaWxlTmFtZX1gO1xyXG5cclxuICAgIC8vIFVwbG9hZCB0byBTdXBhYmFzZSBTdG9yYWdlXHJcbiAgICBjb25zdCB7IGRhdGE6IHVwbG9hZERhdGEsIGVycm9yOiB1cGxvYWRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZVxyXG4gICAgICAuZnJvbSgncHJvZmlsZS1waWN0dXJlcycpXHJcbiAgICAgIC51cGxvYWQoZmlsZVBhdGgsIGJ1ZmZlciwge1xyXG4gICAgICAgIGNvbnRlbnRUeXBlOiBmaWxlVHlwZSxcclxuICAgICAgICB1cHNlcnQ6IGZhbHNlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAodXBsb2FkRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGZpbGU6JywgdXBsb2FkRXJyb3IpO1xyXG4gICAgICAvLyBJZiBidWNrZXQgZG9lc24ndCBleGlzdCwgcmV0dXJuIGhlbHBmdWwgZXJyb3JcclxuICAgICAgaWYgKHVwbG9hZEVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBmb3VuZCcpIHx8IHVwbG9hZEVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0J1Y2tldCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICBlcnJvcjogJ1N0b3JhZ2UgYnVja2V0IG5vdCBjb25maWd1cmVkLiBQbGVhc2UgY3JlYXRlIGEgXCJwcm9maWxlLXBpY3R1cmVzXCIgYnVja2V0IGluIFN1cGFiYXNlIFN0b3JhZ2UuJyBcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogdXBsb2FkRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCBwdWJsaWMgVVJMXHJcbiAgICBjb25zdCB7IGRhdGE6IHVybERhdGEgfSA9IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgICAgLmZyb20oJ3Byb2ZpbGUtcGljdHVyZXMnKVxyXG4gICAgICAuZ2V0UHVibGljVXJsKGZpbGVQYXRoKTtcclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1cmw6IHVybERhdGEucHVibGljVXJsIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHVwbG9hZFByb2ZpbGVQaWN0dXJlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHVwbG9hZCBwcm9maWxlIHBpY3R1cmUnLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQcm9maWxlUGljdHVyZShlbWFpbDogc3RyaW5nLCBhdmF0YXJVcmw6IHN0cmluZyk6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBFeHRyYWN0IGZpbGUgcGF0aCBmcm9tIFVSTFxyXG4gICAgY29uc3QgdXJsUGFydHMgPSBhdmF0YXJVcmwuc3BsaXQoJy9wcm9maWxlLXBpY3R1cmVzLycpO1xyXG4gICAgaWYgKHVybFBhcnRzLmxlbmd0aCA8IDIpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBhdmF0YXIgVVJMJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbGVQYXRoID0gYGF2YXRhcnMvJHt1cmxQYXJ0c1sxXS5zcGxpdCgnLycpLnBvcCgpfWA7XHJcblxyXG4gICAgLy8gRGVsZXRlIGZyb20gc3RvcmFnZVxyXG4gICAgY29uc3QgeyBlcnJvcjogZGVsZXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgICAgLmZyb20oJ3Byb2ZpbGUtcGljdHVyZXMnKVxyXG4gICAgICAucmVtb3ZlKFtmaWxlUGF0aF0pO1xyXG5cclxuICAgIGlmIChkZWxldGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBmaWxlOicsIGRlbGV0ZUVycm9yKTtcclxuICAgICAgLy8gRG9uJ3QgZmFpbCBpZiBmaWxlIGRvZXNuJ3QgZXhpc3RcclxuICAgICAgaWYgKGRlbGV0ZUVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBmb3VuZCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZGVsZXRlRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZGVsZXRlUHJvZmlsZVBpY3R1cmU6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZGVsZXRlIHByb2ZpbGUgcGljdHVyZScsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUN1c3RvbWVyUHJvZmlsZShcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIGRhdGE6IFByb2ZpbGVVcGRhdGVJbnB1dFxyXG4pOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIHByb2ZpbGU/OiBQcm9maWxlO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgaW5wdXRcclxuICAgIGlmICghZGF0YS5maXJzdF9uYW1lPy50cmltKCkpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmlyc3QgbmFtZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuICAgIGlmICghZGF0YS5sYXN0X25hbWU/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdMYXN0IG5hbWUgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAoIWRhdGEuZW1haWw/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuICAgIGlmICghL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC8udGVzdChkYXRhLmVtYWlsKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIGVtYWlsIGZvcm1hdCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiBwcm9maWxlIGV4aXN0c1xyXG4gICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1Byb2ZpbGUgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgIC5tYXliZVNpbmdsZSgpO1xyXG5cclxuICAgIC8vIElmIGF2YXRhcl91cmwgaXMgYmVpbmcgcmVtb3ZlZCwgZGVsZXRlIHRoZSBvbGQgZmlsZVxyXG4gICAgaWYgKGV4aXN0aW5nUHJvZmlsZT8uYXZhdGFyX3VybCAmJiBkYXRhLmF2YXRhcl91cmwgPT09IG51bGwpIHtcclxuICAgICAgYXdhaXQgZGVsZXRlUHJvZmlsZVBpY3R1cmUoZW1haWwsIGV4aXN0aW5nUHJvZmlsZS5hdmF0YXJfdXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gICAgaWYgKGV4aXN0aW5nUHJvZmlsZSkge1xyXG4gICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgcHJvZmlsZVxyXG4gICAgICAvLyBJZiBlbWFpbCBjaGFuZ2VkLCB3ZSBuZWVkIHRvIGhhbmRsZSBpdCBjYXJlZnVsbHlcclxuICAgICAgaWYgKGRhdGEuZW1haWwgIT09IGVtYWlsKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgbmV3IGVtYWlsIGFscmVhZHkgZXhpc3RzXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBlbWFpbENoZWNrIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAgIC5lcSgnZW1haWwnLCBkYXRhLmVtYWlsKVxyXG4gICAgICAgICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgICAgIGlmIChlbWFpbENoZWNrKSB7XHJcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBhbHJlYWR5IGV4aXN0cycgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHtcclxuICAgICAgICBmaXJzdF9uYW1lOiBkYXRhLmZpcnN0X25hbWUudHJpbSgpLFxyXG4gICAgICAgIGxhc3RfbmFtZTogZGF0YS5sYXN0X25hbWUudHJpbSgpLFxyXG4gICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLnRyaW0oKSxcclxuICAgICAgICBwaG9uZTogZGF0YS5waG9uZT8udHJpbSgpIHx8IG51bGwsXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gT25seSB1cGRhdGUgYXZhdGFyX3VybCBpZiBpdCdzIHByb3ZpZGVkXHJcbiAgICAgIGlmIChkYXRhLmF2YXRhcl91cmwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHVwZGF0ZURhdGEuYXZhdGFyX3VybCA9IGRhdGEuYXZhdGFyX3VybDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkUHJvZmlsZSwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgLnVwZGF0ZSh1cGRhdGVEYXRhKVxyXG4gICAgICAgIC5lcSgnZW1haWwnLCBlbWFpbClcclxuICAgICAgICAuc2VsZWN0KClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBwcm9maWxlOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHVwZGF0ZUVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzdWx0ID0gdXBkYXRlZFByb2ZpbGU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBDcmVhdGUgbmV3IHByb2ZpbGVcclxuICAgICAgY29uc3QgaW5zZXJ0RGF0YTogYW55ID0ge1xyXG4gICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLnRyaW0oKSxcclxuICAgICAgICBwaG9uZTogZGF0YS5waG9uZT8udHJpbSgpIHx8IG51bGwsXHJcbiAgICAgICAgZmlyc3RfbmFtZTogZGF0YS5maXJzdF9uYW1lLnRyaW0oKSxcclxuICAgICAgICBsYXN0X25hbWU6IGRhdGEubGFzdF9uYW1lLnRyaW0oKSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIE9ubHkgc2V0IGF2YXRhcl91cmwgaWYgaXQncyBwcm92aWRlZFxyXG4gICAgICBpZiAoZGF0YS5hdmF0YXJfdXJsKSB7XHJcbiAgICAgICAgaW5zZXJ0RGF0YS5hdmF0YXJfdXJsID0gZGF0YS5hdmF0YXJfdXJsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7IGRhdGE6IG5ld1Byb2ZpbGUsIGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgICAgIC5pbnNlcnQoaW5zZXJ0RGF0YSlcclxuICAgICAgICAuc2VsZWN0KClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBwcm9maWxlOicsIGluc2VydEVycm9yKTtcclxuICAgICAgICAvLyBDaGVjayBpZiBpdCdzIGEgdW5pcXVlIGNvbnN0cmFpbnQgdmlvbGF0aW9uXHJcbiAgICAgICAgaWYgKGluc2VydEVycm9yLmNvZGUgPT09ICcyMzUwNScpIHtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0VtYWlsIGFscmVhZHkgZXhpc3RzJyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGluc2VydEVycm9yLm1lc3NhZ2UgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzdWx0ID0gbmV3UHJvZmlsZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBwcm9maWxlOiByZXN1bHQgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gdXBkYXRlQ3VzdG9tZXJQcm9maWxlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHVwZGF0ZSBwcm9maWxlJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJMb2NhdGlvbnMoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwaG9uZT86IHN0cmluZ1xyXG4pOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGxvY2F0aW9ucz86IExvY2F0aW9uW107XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbG9jYXRpb25zJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5vcmRlcignaXNfZGVmYXVsdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcblxyXG4gICAgLy8gQnVpbGQgcXVlcnkgZm9yIGVtYWlsL3Bob25lIGxvb2t1cFxyXG4gICAgaWYgKGVtYWlsICYmIHBob25lKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkub3IoYGN1c3RvbWVyX2VtYWlsLmVxLiR7ZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7cGhvbmV9YCk7XHJcbiAgICB9IGVsc2UgaWYgKGVtYWlsKSB7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ2N1c3RvbWVyX2VtYWlsJywgZW1haWwpO1xyXG4gICAgfSBlbHNlIGlmIChwaG9uZSkge1xyXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjdXN0b21lcl9waG9uZScsIHBob25lKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0VtYWlsIG9yIHBob25lIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBsb2NhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBsb2NhdGlvbnM6IGRhdGEgfHwgW10gfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0Q3VzdG9tZXJMb2NhdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggbG9jYXRpb25zJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTG9jYXRpb24oXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBwaG9uZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxyXG4gIGxvY2F0aW9uRGF0YTogTG9jYXRpb25DcmVhdGVJbnB1dFxyXG4pOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGxvY2F0aW9uPzogTG9jYXRpb247XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBpbnB1dFxyXG4gICAgaWYgKCFsb2NhdGlvbkRhdGEubmlja25hbWU/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdOaWNrbmFtZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuICAgIGlmICghbG9jYXRpb25EYXRhLmFkZHJlc3M/LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBZGRyZXNzIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG4gICAgaWYgKCFsb2NhdGlvbkRhdGEuc3VidXJiPy50cmltKCkpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnU3VidXJiIGlzIHJlcXVpcmVkJyB9O1xyXG4gICAgfVxyXG4gICAgaWYgKCFsb2NhdGlvbkRhdGEuY2l0eT8udHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0NpdHkgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgc2V0dGluZyBhcyBkZWZhdWx0LCB1bnNldCBhbGwgb3RoZXIgZGVmYXVsdHMgZm9yIHRoaXMgY3VzdG9tZXJcclxuICAgIGlmIChsb2NhdGlvbkRhdGEuaXNfZGVmYXVsdCkge1xyXG4gICAgICBsZXQgdXBkYXRlUXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAgIC51cGRhdGUoeyBpc19kZWZhdWx0OiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkub3IoYGN1c3RvbWVyX2VtYWlsLmVxLiR7ZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7cGhvbmV9YCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZW1haWwpIHtcclxuICAgICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgICAgfSBlbHNlIGlmIChwaG9uZSkge1xyXG4gICAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkuZXEoJ2N1c3RvbWVyX3Bob25lJywgcGhvbmUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVRdWVyeTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGE6IG5ld0xvY2F0aW9uLCBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBjdXN0b21lcl9lbWFpbDogZW1haWwsXHJcbiAgICAgICAgY3VzdG9tZXJfcGhvbmU6IHBob25lIHx8IG51bGwsXHJcbiAgICAgICAgbmlja25hbWU6IGxvY2F0aW9uRGF0YS5uaWNrbmFtZS50cmltKCksXHJcbiAgICAgICAgYWRkcmVzczogbG9jYXRpb25EYXRhLmFkZHJlc3MudHJpbSgpLFxyXG4gICAgICAgIGFwdF91bml0OiBsb2NhdGlvbkRhdGEuYXB0X3VuaXQ/LnRyaW0oKSB8fCBudWxsLFxyXG4gICAgICAgIHN1YnVyYjogbG9jYXRpb25EYXRhLnN1YnVyYi50cmltKCksXHJcbiAgICAgICAgY2l0eTogbG9jYXRpb25EYXRhLmNpdHkudHJpbSgpLFxyXG4gICAgICAgIHBvc3RhbF9jb2RlOiBsb2NhdGlvbkRhdGEucG9zdGFsX2NvZGU/LnRyaW0oKSB8fCBudWxsLFxyXG4gICAgICAgIGlzX2RlZmF1bHQ6IGxvY2F0aW9uRGF0YS5pc19kZWZhdWx0IHx8IGZhbHNlLFxyXG4gICAgICB9KVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChpbnNlcnRFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBsb2NhdGlvbjonLCBpbnNlcnRFcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogaW5zZXJ0RXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGxvY2F0aW9uOiBuZXdMb2NhdGlvbiB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBjcmVhdGVMb2NhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBjcmVhdGUgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVMb2NhdGlvbihcclxuICBsb2NhdGlvbklkOiBzdHJpbmcsXHJcbiAgbG9jYXRpb25EYXRhOiBMb2NhdGlvblVwZGF0ZUlucHV0XHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgbG9jYXRpb24/OiBMb2NhdGlvbjtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIGlucHV0IGlmIHByb3ZpZGVkXHJcbiAgICBpZiAobG9jYXRpb25EYXRhLm5pY2tuYW1lICE9PSB1bmRlZmluZWQgJiYgIWxvY2F0aW9uRGF0YS5uaWNrbmFtZS50cmltKCkpIHtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTmlja25hbWUgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25EYXRhLmFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiAhbG9jYXRpb25EYXRhLmFkZHJlc3MudHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FkZHJlc3MgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25EYXRhLnN1YnVyYiAhPT0gdW5kZWZpbmVkICYmICFsb2NhdGlvbkRhdGEuc3VidXJiLnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdTdWJ1cmIgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcbiAgICBpZiAobG9jYXRpb25EYXRhLmNpdHkgIT09IHVuZGVmaW5lZCAmJiAhbG9jYXRpb25EYXRhLmNpdHkudHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0NpdHkgaXMgcmVxdWlyZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IGN1cnJlbnQgbG9jYXRpb24gdG8gY2hlY2sgY3VzdG9tZXIgZW1haWxcclxuICAgIGNvbnN0IHsgZGF0YTogY3VycmVudExvY2F0aW9uLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2xvY2F0aW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJ2N1c3RvbWVyX2VtYWlsLCBjdXN0b21lcl9waG9uZScpXHJcbiAgICAgIC5lcSgnaWQnLCBsb2NhdGlvbklkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGZldGNoRXJyb3IgfHwgIWN1cnJlbnRMb2NhdGlvbikge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdMb2NhdGlvbiBub3QgZm91bmQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgc2V0dGluZyBhcyBkZWZhdWx0LCB1bnNldCBhbGwgb3RoZXIgZGVmYXVsdHMgZm9yIHRoaXMgY3VzdG9tZXJcclxuICAgIGlmIChsb2NhdGlvbkRhdGEuaXNfZGVmYXVsdCkge1xyXG4gICAgICBsZXQgdXBkYXRlUXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAgIC51cGRhdGUoeyBpc19kZWZhdWx0OiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIGlmIChjdXJyZW50TG9jYXRpb24uY3VzdG9tZXJfZW1haWwgJiYgY3VycmVudExvY2F0aW9uLmN1c3RvbWVyX3Bob25lKSB7XHJcbiAgICAgICAgdXBkYXRlUXVlcnkgPSB1cGRhdGVRdWVyeS5vcihgY3VzdG9tZXJfZW1haWwuZXEuJHtjdXJyZW50TG9jYXRpb24uY3VzdG9tZXJfZW1haWx9LGN1c3RvbWVyX3Bob25lLmVxLiR7Y3VycmVudExvY2F0aW9uLmN1c3RvbWVyX3Bob25lfWApO1xyXG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9lbWFpbCkge1xyXG4gICAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkuZXEoJ2N1c3RvbWVyX2VtYWlsJywgY3VycmVudExvY2F0aW9uLmN1c3RvbWVyX2VtYWlsKTtcclxuICAgICAgfSBlbHNlIGlmIChjdXJyZW50TG9jYXRpb24uY3VzdG9tZXJfcGhvbmUpIHtcclxuICAgICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5LmVxKCdjdXN0b21lcl9waG9uZScsIGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9waG9uZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIERvbid0IHVuc2V0IHRoZSBjdXJyZW50IGxvY2F0aW9uXHJcbiAgICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkubmVxKCdpZCcsIGxvY2F0aW9uSWQpO1xyXG5cclxuICAgICAgYXdhaXQgdXBkYXRlUXVlcnk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQnVpbGQgdXBkYXRlIG9iamVjdCB3aXRoIG9ubHkgcHJvdmlkZWQgZmllbGRzXHJcbiAgICBjb25zdCB1cGRhdGVEYXRhOiBhbnkgPSB7XHJcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5uaWNrbmFtZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHVwZGF0ZURhdGEubmlja25hbWUgPSBsb2NhdGlvbkRhdGEubmlja25hbWUudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5hZGRyZXNzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXBkYXRlRGF0YS5hZGRyZXNzID0gbG9jYXRpb25EYXRhLmFkZHJlc3MudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5hcHRfdW5pdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHVwZGF0ZURhdGEuYXB0X3VuaXQgPSBsb2NhdGlvbkRhdGEuYXB0X3VuaXQ/LnRyaW0oKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5zdWJ1cmIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB1cGRhdGVEYXRhLnN1YnVyYiA9IGxvY2F0aW9uRGF0YS5zdWJ1cmIudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5jaXR5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXBkYXRlRGF0YS5jaXR5ID0gbG9jYXRpb25EYXRhLmNpdHkudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5wb3N0YWxfY29kZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHVwZGF0ZURhdGEucG9zdGFsX2NvZGUgPSBsb2NhdGlvbkRhdGEucG9zdGFsX2NvZGU/LnRyaW0oKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKGxvY2F0aW9uRGF0YS5pc19kZWZhdWx0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXBkYXRlRGF0YS5pc19kZWZhdWx0ID0gbG9jYXRpb25EYXRhLmlzX2RlZmF1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkTG9jYXRpb24sIGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2xvY2F0aW9ucycpXHJcbiAgICAgIC51cGRhdGUodXBkYXRlRGF0YSlcclxuICAgICAgLmVxKCdpZCcsIGxvY2F0aW9uSWQpXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKHVwZGF0ZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGxvY2F0aW9uOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB1cGRhdGVFcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbG9jYXRpb246IHVwZGF0ZWRMb2NhdGlvbiB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiB1cGRhdGVMb2NhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB1cGRhdGUgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVMb2NhdGlvbihsb2NhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2xvY2F0aW9ucycpXHJcbiAgICAgIC5kZWxldGUoKVxyXG4gICAgICAuZXEoJ2lkJywgbG9jYXRpb25JZCk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGxvY2F0aW9uOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBkZWxldGVMb2NhdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBkZWxldGUgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXREZWZhdWx0TG9jYXRpb24oXHJcbiAgbG9jYXRpb25JZDogc3RyaW5nLFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGhvbmU/OiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBsb2NhdGlvbj86IExvY2F0aW9uO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gR2V0IGN1cnJlbnQgbG9jYXRpb24gdG8gdmVyaWZ5IG93bmVyc2hpcFxyXG4gICAgY29uc3QgeyBkYXRhOiBjdXJyZW50TG9jYXRpb24sIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbG9jYXRpb25zJylcclxuICAgICAgLnNlbGVjdCgnY3VzdG9tZXJfZW1haWwsIGN1c3RvbWVyX3Bob25lJylcclxuICAgICAgLmVxKCdpZCcsIGxvY2F0aW9uSWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZmV0Y2hFcnJvciB8fCAhY3VycmVudExvY2F0aW9uKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0xvY2F0aW9uIG5vdCBmb3VuZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgb3duZXJzaGlwXHJcbiAgICBjb25zdCBpc093bmVyID0gXHJcbiAgICAgIGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9lbWFpbCA9PT0gZW1haWwgfHxcclxuICAgICAgKHBob25lICYmIGN1cnJlbnRMb2NhdGlvbi5jdXN0b21lcl9waG9uZSA9PT0gcGhvbmUpO1xyXG5cclxuICAgIGlmICghaXNPd25lcikge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVW5zZXQgYWxsIG90aGVyIGRlZmF1bHRzIGZvciB0aGlzIGN1c3RvbWVyXHJcbiAgICBsZXQgdXBkYXRlUXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbG9jYXRpb25zJylcclxuICAgICAgLnVwZGF0ZSh7IGlzX2RlZmF1bHQ6IGZhbHNlIH0pO1xyXG5cclxuICAgIGlmIChlbWFpbCAmJiBwaG9uZSkge1xyXG4gICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5Lm9yKGBjdXN0b21lcl9lbWFpbC5lcS4ke2VtYWlsfSxjdXN0b21lcl9waG9uZS5lcS4ke3Bob25lfWApO1xyXG4gICAgfSBlbHNlIGlmIChlbWFpbCkge1xyXG4gICAgICB1cGRhdGVRdWVyeSA9IHVwZGF0ZVF1ZXJ5LmVxKCdjdXN0b21lcl9lbWFpbCcsIGVtYWlsKTtcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgdXBkYXRlUXVlcnkgPSB1cGRhdGVRdWVyeS5lcSgnY3VzdG9tZXJfcGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRG9uJ3QgdW5zZXQgdGhlIGN1cnJlbnQgbG9jYXRpb25cclxuICAgIHVwZGF0ZVF1ZXJ5ID0gdXBkYXRlUXVlcnkubmVxKCdpZCcsIGxvY2F0aW9uSWQpO1xyXG5cclxuICAgIGF3YWl0IHVwZGF0ZVF1ZXJ5O1xyXG5cclxuICAgIC8vIFNldCB0aGlzIGxvY2F0aW9uIGFzIGRlZmF1bHRcclxuICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZExvY2F0aW9uLCBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdsb2NhdGlvbnMnKVxyXG4gICAgICAudXBkYXRlKHsgaXNfZGVmYXVsdDogdHJ1ZSB9KVxyXG4gICAgICAuZXEoJ2lkJywgbG9jYXRpb25JZClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyBkZWZhdWx0IGxvY2F0aW9uOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB1cGRhdGVFcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbG9jYXRpb246IHVwZGF0ZWRMb2NhdGlvbiB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBzZXREZWZhdWx0TG9jYXRpb246JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2V0IGRlZmF1bHQgbG9jYXRpb24nLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVJlZmVycmFsQ29kZShcclxuICBlbWFpbDogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgcmVmZXJyYWxDb2RlPzogc3RyaW5nO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgcHJvZmlsZSBleGlzdHMgYW5kIGhhcyBhIHJlZmVycmFsIGNvZGVcclxuICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgLnNlbGVjdCgncmVmZXJyYWxfY29kZScpXHJcbiAgICAgIC5lcSgnZW1haWwnLCBlbWFpbClcclxuICAgICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKHByb2ZpbGVFcnJvciAmJiBwcm9maWxlRXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9maWxlOicsIHByb2ZpbGVFcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcHJvZmlsZUVycm9yLm1lc3NhZ2UgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBwcm9maWxlIGV4aXN0cyBhbmQgaGFzIGEgcmVmZXJyYWwgY29kZSwgcmV0dXJuIGl0XHJcbiAgICBpZiAocHJvZmlsZT8ucmVmZXJyYWxfY29kZSkge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZWZlcnJhbENvZGU6IHByb2ZpbGUucmVmZXJyYWxfY29kZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYXRlIGEgbmV3IHJlZmVycmFsIGNvZGVcclxuICAgIC8vIFRyeSB1c2luZyB0aGUgZGF0YWJhc2UgZnVuY3Rpb24gZmlyc3QsIGJ1dCBmYWxsYmFjayB0byBjbGllbnQtc2lkZSBnZW5lcmF0aW9uXHJcbiAgICBsZXQgZ2VuZXJhdGVkQ29kZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YTogZGJDb2RlLCBlcnJvcjogY29kZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5ycGMoJ2dlbmVyYXRlX3JlZmVycmFsX2NvZGUnKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghY29kZUVycm9yICYmIGRiQ29kZSkge1xyXG4gICAgICAgIGdlbmVyYXRlZENvZGUgPSBkYkNvZGU7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKHJwY0Vycm9yKSB7XHJcbiAgICAgIC8vIFJQQyBmdW5jdGlvbiBtaWdodCBub3QgZXhpc3QgeWV0LCB0aGF0J3Mgb2theVxyXG4gICAgICBjb25zb2xlLmxvZygnUlBDIGZ1bmN0aW9uIG5vdCBhdmFpbGFibGUsIHVzaW5nIGZhbGxiYWNrJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFnZW5lcmF0ZWRDb2RlKSB7XHJcbiAgICAgIC8vIEZhbGxiYWNrOiBnZW5lcmF0ZSBjb2RlIGNsaWVudC1zaWRlIHN0eWxlXHJcbiAgICAgIGNvbnN0IGZhbGxiYWNrQ29kZSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgaWYgZmFsbGJhY2sgY29kZSBleGlzdHMsIHJldHJ5IGlmIGl0IGRvZXNcclxuICAgICAgbGV0IGZpbmFsQ29kZSA9IGZhbGxiYWNrQ29kZTtcclxuICAgICAgbGV0IGF0dGVtcHRzID0gMDtcclxuICAgICAgY29uc3QgbWF4QXR0ZW1wdHMgPSA1O1xyXG5cclxuICAgICAgd2hpbGUgKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcclxuICAgICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAgIC5lcSgncmVmZXJyYWxfY29kZScsIGZpbmFsQ29kZSlcclxuICAgICAgICAgIC5tYXliZVNpbmdsZSgpO1xyXG5cclxuICAgICAgICBpZiAoIWV4aXN0aW5nKSB7XHJcbiAgICAgICAgICBicmVhazsgLy8gQ29kZSBpcyB1bmlxdWVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IGNvZGVcclxuICAgICAgICBmaW5hbENvZGUgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOCkudG9VcHBlckNhc2UoKTtcclxuICAgICAgICBhdHRlbXB0cysrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVcGRhdGUgb3IgaW5zZXJ0IHByb2ZpbGUgd2l0aCByZWZlcnJhbCBjb2RlXHJcbiAgICAgIC8vIEZpcnN0LCB0cnkgdG8gdXBkYXRlIGV4aXN0aW5nIHByb2ZpbGVcclxuICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1Byb2ZpbGUgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAuc2VsZWN0KCdpZCwgZmlyc3RfbmFtZSwgbGFzdF9uYW1lJylcclxuICAgICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gICAgICBsZXQgdXBkYXRlZFByb2ZpbGU7XHJcbiAgICAgIGlmIChleGlzdGluZ1Byb2ZpbGUpIHtcclxuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgcHJvZmlsZVxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZCwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgICAgICByZWZlcnJhbF9jb2RlOiBmaW5hbENvZGUsXHJcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgICAgICAuc2VsZWN0KCdyZWZlcnJhbF9jb2RlJylcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgICAgaWYgKHVwZGF0ZUVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyByZWZlcnJhbCBjb2RlOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogdXBkYXRlRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cGRhdGVkUHJvZmlsZSA9IHVwZGF0ZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSW5zZXJ0IG5ldyBwcm9maWxlIHdpdGggcmVmZXJyYWwgY29kZVxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogaW5zZXJ0ZWQsIGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgICAuaW5zZXJ0KHtcclxuICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgIHJlZmVycmFsX2NvZGU6IGZpbmFsQ29kZSxcclxuICAgICAgICAgICAgZmlyc3RfbmFtZTogZW1haWwuc3BsaXQoJ0AnKVswXSxcclxuICAgICAgICAgICAgbGFzdF9uYW1lOiAnJyxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuc2VsZWN0KCdyZWZlcnJhbF9jb2RlJylcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgICAgaWYgKGluc2VydEVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyByZWZlcnJhbCBjb2RlOicsIGluc2VydEVycm9yKTtcclxuICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogaW5zZXJ0RXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cGRhdGVkUHJvZmlsZSA9IGluc2VydGVkO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZWZlcnJhbENvZGU6IHVwZGF0ZWRQcm9maWxlPy5yZWZlcnJhbF9jb2RlIHx8IGZpbmFsQ29kZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVzZSB0aGUgZ2VuZXJhdGVkIGNvZGUgZnJvbSBkYXRhYmFzZSBmdW5jdGlvblxyXG4gICAgLy8gVXBkYXRlIG9yIGluc2VydCBwcm9maWxlIHdpdGggZ2VuZXJhdGVkIGNvZGVcclxuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdQcm9maWxlIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCwgZmlyc3RfbmFtZSwgbGFzdF9uYW1lJylcclxuICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsKVxyXG4gICAgICAubWF5YmVTaW5nbGUoKTtcclxuXHJcbiAgICBsZXQgdXBkYXRlZFByb2ZpbGU7XHJcbiAgICBpZiAoZXhpc3RpbmdQcm9maWxlKSB7XHJcbiAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBwcm9maWxlXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZCwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgICByZWZlcnJhbF9jb2RlOiBnZW5lcmF0ZWRDb2RlLFxyXG4gICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsKVxyXG4gICAgICAgIC5zZWxlY3QoJ3JlZmVycmFsX2NvZGUnKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmICh1cGRhdGVFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHJlZmVycmFsIGNvZGU6JywgdXBkYXRlRXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogdXBkYXRlRXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICB9XHJcbiAgICAgIHVwZGF0ZWRQcm9maWxlID0gdXBkYXRlZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEluc2VydCBuZXcgcHJvZmlsZSB3aXRoIHJlZmVycmFsIGNvZGVcclxuICAgICAgY29uc3QgeyBkYXRhOiBpbnNlcnRlZCwgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgICBlbWFpbCxcclxuICAgICAgICAgIHJlZmVycmFsX2NvZGU6IGdlbmVyYXRlZENvZGUsXHJcbiAgICAgICAgICBmaXJzdF9uYW1lOiBlbWFpbC5zcGxpdCgnQCcpWzBdLFxyXG4gICAgICAgICAgbGFzdF9uYW1lOiAnJyxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zZWxlY3QoJ3JlZmVycmFsX2NvZGUnKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChpbnNlcnRFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHJlZmVycmFsIGNvZGU6JywgaW5zZXJ0RXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogaW5zZXJ0RXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICB9XHJcbiAgICAgIHVwZGF0ZWRQcm9maWxlID0gaW5zZXJ0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcmVmZXJyYWxDb2RlOiB1cGRhdGVkUHJvZmlsZT8ucmVmZXJyYWxfY29kZSB8fCBnZW5lcmF0ZWRDb2RlIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldE9yQ3JlYXRlUmVmZXJyYWxDb2RlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGdldCByZWZlcnJhbCBjb2RlJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZFJlZmVycmFsSW52aXRlcyhcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIGludml0ZUVtYWlsczogc3RyaW5nW10sXHJcbiAgcmVmZXJyYWxDb2RlOiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBzZW50PzogbnVtYmVyO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KCk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgZW1haWwgYWRkcmVzc2VzXHJcbiAgICBjb25zdCB2YWxpZEVtYWlscyA9IGludml0ZUVtYWlsc1xyXG4gICAgICAubWFwKChlKSA9PiBlLnRyaW0oKSlcclxuICAgICAgLmZpbHRlcigoZSkgPT4ge1xyXG4gICAgICAgIGlmICghZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiAvXlteXFxzQF0rQFteXFxzQF0rXFwuW15cXHNAXSskLy50ZXN0KGUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAodmFsaWRFbWFpbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIHZhbGlkIGVtYWlsIGFkZHJlc3NlcyBwcm92aWRlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgcmVmZXJyYWwgcmVjb3JkcyBmb3IgdHJhY2tpbmdcclxuICAgIGNvbnN0IHJlZmVycmFsUmVjb3JkcyA9IHZhbGlkRW1haWxzLm1hcCgocmVmZXJyZWRFbWFpbCkgPT4gKHtcclxuICAgICAgcmVmZXJyZXJfZW1haWw6IGVtYWlsLFxyXG4gICAgICByZWZlcnJlZF9lbWFpbDogcmVmZXJyZWRFbWFpbCxcclxuICAgICAgcmVmZXJyYWxfY29kZTogcmVmZXJyYWxDb2RlLFxyXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgIH0pKTtcclxuXHJcbiAgICBjb25zdCB7IGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3JlZmVycmFscycpXHJcbiAgICAgIC5pbnNlcnQocmVmZXJyYWxSZWNvcmRzKTtcclxuXHJcbiAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcmVmZXJyYWwgcmVjb3JkczonLCBpbnNlcnRFcnJvcik7XHJcbiAgICAgIC8vIENvbnRpbnVlIGV2ZW4gaWYgaW5zZXJ0IGZhaWxzIC0gd2Ugc3RpbGwgd2FudCB0byBzZW5kIGVtYWlsc1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYXRlIHJlZmVycmFsIGxpbmtcclxuICAgIGNvbnN0IGJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TSVRFX1VSTCB8fCAnaHR0cHM6Ly9zaGFsZWFuLmNvLnphJztcclxuICAgIGNvbnN0IHJlZmVycmFsTGluayA9IGAke2Jhc2VVcmx9L2Jvb2tpbmcvZGV0YWlscz9yZWY9JHtyZWZlcnJhbENvZGV9YDtcclxuXHJcbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWN0dWFsIGVtYWlsIHNlbmRpbmcgdXNpbmcgeW91ciBlbWFpbCBzZXJ2aWNlIChSZXNlbmQsIFNlbmRHcmlkLCBldGMuKVxyXG4gICAgLy8gRm9yIG5vdywgd2UnbGwganVzdCBsb2cgdGhlIGVtYWlscyB0aGF0IHdvdWxkIGJlIHNlbnRcclxuICAgIGNvbnNvbGUubG9nKCdSZWZlcnJhbCBpbnZpdGVzIHRvIHNlbmQ6Jywge1xyXG4gICAgICBmcm9tOiBlbWFpbCxcclxuICAgICAgdG86IHZhbGlkRW1haWxzLFxyXG4gICAgICByZWZlcnJhbENvZGUsXHJcbiAgICAgIHJlZmVycmFsTGluayxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgeW91IHdvdWxkIHNlbmQgZW1haWxzIGhlcmVcclxuICAgIC8vIEV4YW1wbGUgd2l0aCBSZXNlbmQ6XHJcbiAgICAvLyBhd2FpdCByZXNlbmQuZW1haWxzLnNlbmQoe1xyXG4gICAgLy8gICBmcm9tOiAnU2hhbGVhbiA8bm9yZXBseUBzaGFsZWFuLmNvLnphPicsXHJcbiAgICAvLyAgIHRvOiB2YWxpZEVtYWlscyxcclxuICAgIC8vICAgc3ViamVjdDogJ1lvdVxcJ3ZlIGJlZW4gaW52aXRlZCB0byB0cnkgU2hhbGVhbiBDbGVhbmluZyBTZXJ2aWNlcyEnLFxyXG4gICAgLy8gICBodG1sOiBgPHA+WW91ciBmcmllbmQgaGFzIGludml0ZWQgeW91IHRvIHRyeSBTaGFsZWFuLiBVc2UgY29kZSAke3JlZmVycmFsQ29kZX0gdG8gZ2V0IFIxNTAgb2ZmIHlvdXIgZmlyc3QgYm9va2luZyE8L3A+PHA+PGEgaHJlZj1cIiR7cmVmZXJyYWxMaW5rfVwiPkJvb2sgTm93PC9hPjwvcD5gLFxyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgc2VudDogdmFsaWRFbWFpbHMubGVuZ3RoIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHNlbmRSZWZlcnJhbEludml0ZXM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gc2VuZCBpbnZpdGVzJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVmZXJyYWxTdGF0cyhcclxuICBlbWFpbDogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgc3RhdHM/OiB7XHJcbiAgICB0b3RhbFJlZmVycmFsczogbnVtYmVyO1xyXG4gICAgY29tcGxldGVkUmVmZXJyYWxzOiBudW1iZXI7XHJcbiAgICBwZW5kaW5nUmV3YXJkczogbnVtYmVyO1xyXG4gICAgdG90YWxSZXdhcmRzOiBudW1iZXI7XHJcbiAgfTtcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAgIGNvbnN0IHsgZGF0YTogcmVmZXJyYWxzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3JlZmVycmFscycpXHJcbiAgICAgIC5zZWxlY3QoJ3N0YXR1cywgcmVmZXJyZXJfcmV3YXJkX2Ftb3VudCwgcmVmZXJyZXJfcmV3YXJkX3N0YXR1cycpXHJcbiAgICAgIC5lcSgncmVmZXJyZXJfZW1haWwnLCBlbWFpbCk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHJlZmVycmFsIHN0YXRzOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RhdHMgPSB7XHJcbiAgICAgIHRvdGFsUmVmZXJyYWxzOiByZWZlcnJhbHM/Lmxlbmd0aCB8fCAwLFxyXG4gICAgICBjb21wbGV0ZWRSZWZlcnJhbHM6XHJcbiAgICAgICAgcmVmZXJyYWxzPy5maWx0ZXIoKHIpID0+IHIuc3RhdHVzID09PSAnY29tcGxldGVkJykubGVuZ3RoIHx8IDAsXHJcbiAgICAgIHBlbmRpbmdSZXdhcmRzOlxyXG4gICAgICAgIHJlZmVycmFscz8uZmlsdGVyKChyKSA9PiByLnJlZmVycmVyX3Jld2FyZF9zdGF0dXMgPT09ICdwZW5kaW5nJykubGVuZ3RoIHx8IDAsXHJcbiAgICAgIHRvdGFsUmV3YXJkczpcclxuICAgICAgICByZWZlcnJhbHNcclxuICAgICAgICAgID8uZmlsdGVyKChyKSA9PiByLnJlZmVycmVyX3Jld2FyZF9zdGF0dXMgPT09ICdjcmVkaXRlZCcpXHJcbiAgICAgICAgICAucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIChyLnJlZmVycmVyX3Jld2FyZF9hbW91bnQgfHwgMCksIDApIHx8IDAsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHN0YXRzIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldFJlZmVycmFsU3RhdHM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggcmVmZXJyYWwgc3RhdHMnLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGEgY3JlZGl0IHB1cmNoYXNlIHdpdGggUGF5c3RhY2tcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplQ3JlZGl0UHVyY2hhc2UoXHJcbiAgZW1haWw6IHN0cmluZyxcclxuICBhbW91bnQ6IG51bWJlcixcclxuICBwYXltZW50TWV0aG9kOiAnY3JlZGl0X2NhcmQnIHwgJ2VmdCdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBhdXRob3JpemF0aW9uVXJsPzogc3RyaW5nO1xyXG4gIHJlZmVyZW5jZT86IHN0cmluZztcclxuICBlcnJvcj86IHN0cmluZztcclxufT4ge1xyXG4gIHRyeSB7XHJcbiAgICBpZiAoYW1vdW50IDwgMjAgfHwgYW1vdW50ID4gNTAwMCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnQW1vdW50IG11c3QgYmUgYmV0d2VlbiBSMjAgYW5kIFI1MDAwJyxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSByZWZlcmVuY2UgZm9yIHRoaXMgY3JlZGl0IHB1cmNoYXNlXHJcbiAgICBjb25zdCByZWZlcmVuY2UgPSBgQ1JFRElUXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOSl9YDtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSBwZW5kaW5nIGNyZWRpdCB0cmFuc2FjdGlvblxyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuICAgIFxyXG4gICAgLy8gR2V0IG9yIGNyZWF0ZSBwcm9maWxlXHJcbiAgICBsZXQgeyBkYXRhOiBwcm9maWxlIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCwgY3JlZGl0X2JhbGFuY2UnKVxyXG4gICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXHJcbiAgICAgIC5tYXliZVNpbmdsZSgpO1xyXG5cclxuICAgIGlmICghcHJvZmlsZSkge1xyXG4gICAgICAvLyBDcmVhdGUgYSBiYXNpYyBwcm9maWxlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcclxuICAgICAgY29uc3QgeyBkYXRhOiBuZXdQcm9maWxlLCBlcnJvcjogY3JlYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgICAgICAuaW5zZXJ0KHtcclxuICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgY3JlZGl0X2JhbGFuY2U6IDAsXHJcbiAgICAgICAgICBmaXJzdF9uYW1lOiAnJyxcclxuICAgICAgICAgIGxhc3RfbmFtZTogJycsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc2VsZWN0KCdpZCwgY3JlZGl0X2JhbGFuY2UnKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChjcmVhdGVFcnJvciB8fCAhbmV3UHJvZmlsZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBwcm9maWxlJyxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIHByb2ZpbGUgPSBuZXdQcm9maWxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSBwZW5kaW5nIGNyZWRpdCB0cmFuc2FjdGlvblxyXG4gICAgY29uc3QgeyBlcnJvcjogdHJhbnNhY3Rpb25FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2NyZWRpdF90cmFuc2FjdGlvbnMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBwcm9maWxlX2lkOiBwcm9maWxlLmlkLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHRyYW5zYWN0aW9uX3R5cGU6ICdwdXJjaGFzZScsXHJcbiAgICAgICAgYW1vdW50LFxyXG4gICAgICAgIGJhbGFuY2VfYmVmb3JlOiBwcm9maWxlLmNyZWRpdF9iYWxhbmNlIHx8IDAsXHJcbiAgICAgICAgYmFsYW5jZV9hZnRlcjogcHJvZmlsZS5jcmVkaXRfYmFsYW5jZSB8fCAwLCAvLyBXb24ndCB1cGRhdGUgdW50aWwgcGF5bWVudCBzdWNjZWVkc1xyXG4gICAgICAgIHBheW1lbnRfbWV0aG9kOiBwYXltZW50TWV0aG9kLFxyXG4gICAgICAgIHBheXN0YWNrX3JlZmVyZW5jZTogcmVmZXJlbmNlLFxyXG4gICAgICAgIHBheW1lbnRfc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IGBQdXJjaGFzZSBvZiBSJHthbW91bnR9IFNoYWxlYW5DcmVkYCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKHRyYW5zYWN0aW9uRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgY3JlZGl0IHRyYW5zYWN0aW9uOicsIHRyYW5zYWN0aW9uRXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSB0cmFuc2FjdGlvbiByZWNvcmQnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluaXRpYWxpemUgUGF5c3RhY2sgcGF5bWVudFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9wYXlzdGFjay9pbml0aWFsaXplJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICBhbW91bnQsXHJcbiAgICAgICAgcmVmZXJlbmNlLFxyXG4gICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICB0cmFuc2FjdGlvbl90eXBlOiAnY3JlZGl0X3B1cmNoYXNlJyxcclxuICAgICAgICAgIHBheW1lbnRfbWV0aG9kOiBwYXltZW50TWV0aG9kLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IuZXJyb3IgfHwgJ0ZhaWxlZCB0byBpbml0aWFsaXplIHBheW1lbnQnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHBheW1lbnREYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgIGlmICghcGF5bWVudERhdGEuc3RhdHVzKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHBheW1lbnREYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBpbml0aWFsaXplIHBheW1lbnQnLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGF1dGhvcml6YXRpb25Vcmw6IHBheW1lbnREYXRhLmRhdGEuYXV0aG9yaXphdGlvbl91cmwsXHJcbiAgICAgIHJlZmVyZW5jZTogcGF5bWVudERhdGEuZGF0YS5yZWZlcmVuY2UsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgY3JlZGl0IHB1cmNoYXNlOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGluaXRpYWxpemUgcGF5bWVudCcsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWb3VjaGVyUmVkZW1wdGlvbiB7XHJcbiAgaWQ6IHN0cmluZztcclxuICB2b3VjaGVyX2NvZGU6IHN0cmluZztcclxuICBhbW91bnQ6IG51bWJlcjtcclxuICByZWRlZW1lZF9hdDogc3RyaW5nO1xyXG4gIGJvb2tpbmdfaWQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWRlZW1Wb3VjaGVyKFxyXG4gIGNvZGU6IHN0cmluZyxcclxuICBlbWFpbDogc3RyaW5nLFxyXG4gIHBob25lPzogc3RyaW5nXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgYW1vdW50PzogbnVtYmVyO1xyXG4gIG5ld0JhbGFuY2U/OiBudW1iZXI7XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICAvLyBDYWxsIHRoZSBkYXRhYmFzZSBmdW5jdGlvbiB0byByZWRlZW0gdGhlIHZvdWNoZXJcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygncmVkZWVtX3ZvdWNoZXInLCB7XHJcbiAgICAgIHBfY29kZTogY29kZS50cmltKCkudG9VcHBlckNhc2UoKSxcclxuICAgICAgcF9lbWFpbDogZW1haWwudHJpbSgpLFxyXG4gICAgICBwX3Bob25lOiBwaG9uZT8udHJpbSgpIHx8IG51bGwsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVkZWVtaW5nIHZvdWNoZXI6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gcmVkZWVtIHZvdWNoZXInLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFBhcnNlIHRoZSByZXN1bHQgZnJvbSB0aGUgZnVuY3Rpb24gKGhhbmRsZSBib3RoIG9iamVjdCBhbmQgc3RyaW5nIEpTT05CKVxyXG4gICAgbGV0IHJlc3VsdCA9IGRhdGE7XHJcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgdm91Y2hlciByZWRlbXB0aW9uIHJlc3VsdDonLCBwYXJzZUVycm9yKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgcmVzcG9uc2UgZnJvbSBzZXJ2ZXInLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnICYmICdzdWNjZXNzJyBpbiByZXN1bHQpIHtcclxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzID09PSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiByZXN1bHQuZXJyb3IgfHwgJ0ZhaWxlZCB0byByZWRlZW0gdm91Y2hlcicsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGFtb3VudDogcmVzdWx0LmFtb3VudCxcclxuICAgICAgICBuZXdCYWxhbmNlOiByZXN1bHQubmV3X2JhbGFuY2UsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiAnVW5leHBlY3RlZCByZXNwb25zZSBmcm9tIHNlcnZlcicsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiByZWRlZW1Wb3VjaGVyOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHJlZGVlbSB2b3VjaGVyJyxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Vm91Y2hlclJlZGVtcHRpb25zKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGhvbmU/OiBzdHJpbmdcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICByZWRlbXB0aW9ucz86IFZvdWNoZXJSZWRlbXB0aW9uW107XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBjcmVhdGVDbGllbnQoKTtcclxuXHJcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndm91Y2hlcl9yZWRlbXB0aW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJ2lkLCB2b3VjaGVyX2NvZGUsIGFtb3VudCwgcmVkZWVtZWRfYXQsIGJvb2tpbmdfaWQnKVxyXG4gICAgICAub3JkZXIoJ3JlZGVlbWVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICAgIC8vIEJ1aWxkIHF1ZXJ5IGZvciBlbWFpbC9waG9uZSBsb29rdXBcclxuICAgIC8vIFByaW9yaXRpemUgZW1haWwgYXMgaXQncyB0aGUgcHJpbWFyeSBpZGVudGlmaWVyIHRvIHByZXZlbnQgY3Jvc3MtYWNjb3VudCB2aXNpYmlsaXR5XHJcbiAgICBpZiAoZW1haWwpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnZW1haWwnLCBlbWFpbCk7XHJcbiAgICAgIC8vIElmIHBob25lIGlzIGFsc28gcHJvdmlkZWQsIHdlIGNhbiBvcHRpb25hbGx5IGZpbHRlciBieSBib3RoIGZvciBleHRyYSBzZWN1cml0eVxyXG4gICAgICAvLyBidXQgZW1haWwgYWxvbmUgc2hvdWxkIGJlIHN1ZmZpY2llbnQgc2luY2UgaXQncyB1bmlxdWVcclxuICAgIH0gZWxzZSBpZiAocGhvbmUpIHtcclxuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgncGhvbmUnLCBwaG9uZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBvciBwaG9uZSBpcyByZXF1aXJlZCcgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdm91Y2hlciByZWRlbXB0aW9uczonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRyYW5zZm9ybSB0aGUgZGF0YSB0byBtYXRjaCB0aGUgaW50ZXJmYWNlXHJcbiAgICBjb25zdCByZWRlbXB0aW9uczogVm91Y2hlclJlZGVtcHRpb25bXSA9IChkYXRhIHx8IFtdKS5tYXAoKHJlZGVtcHRpb24pID0+ICh7XHJcbiAgICAgIGlkOiByZWRlbXB0aW9uLmlkLFxyXG4gICAgICB2b3VjaGVyX2NvZGU6IHJlZGVtcHRpb24udm91Y2hlcl9jb2RlLFxyXG4gICAgICBhbW91bnQ6IHJlZGVtcHRpb24uYW1vdW50LFxyXG4gICAgICByZWRlZW1lZF9hdDogcmVkZW1wdGlvbi5yZWRlZW1lZF9hdCxcclxuICAgICAgYm9va2luZ19pZDogcmVkZW1wdGlvbi5ib29raW5nX2lkIHx8IHVuZGVmaW5lZCxcclxuICAgIH0pKTtcclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZWRlbXB0aW9ucyB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRWb3VjaGVyUmVkZW1wdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggdm91Y2hlciByZWRlbXB0aW9ucycsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJpU0FPc0IsaU1BQUEifQ==
}),
"[project]/app/dashboard/vouchers/page.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>VouchersPage
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/navigation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$tabs$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/tabs.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/table.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/card.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/button.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/select.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$left$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronLeft$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/chevron-left.js [app-client] (ecmascript) <export default as ChevronLeft>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$right$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronRight$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/chevron-right.js [app-client] (ecmascript) <export default as ChevronRight>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$loader$2d$circle$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Loader2$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/loader-circle.js [app-client] (ecmascript) <export default as Loader2>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$input$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/input.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$label$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/label.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/sonner/dist/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$app$2f$dashboard$2f$data$3a$3a7d19__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/app/dashboard/data:3a7d19 [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$app$2f$dashboard$2f$data$3a$a16329__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/app/dashboard/data:a16329 [app-client] (ecmascript) <text/javascript>");
var __TURBOPACK__imported__module__$5b$project$5d2f$app$2f$dashboard$2f$data$3a$9049d1__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__ = __turbopack_context__.i("[project]/app/dashboard/data:9049d1 [app-client] (ecmascript) <text/javascript>");
;
var _s = __turbopack_context__.k.signature();
'use client';
;
;
;
;
;
;
;
;
;
;
;
;
function VouchersPage() {
    _s();
    const searchParams = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useSearchParams"])();
    const router = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRouter"])();
    const [activeTab, setActiveTab] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])('redeem');
    const [voucherCode, setVoucherCode] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])('');
    const [itemsPerPage, setItemsPerPage] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(5);
    const [currentPage, setCurrentPage] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(1);
    const [email, setEmail] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])('');
    const [phone, setPhone] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])('');
    const [voucherHistory, setVoucherHistory] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [availableVouchers, setAvailableVouchers] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [loadingVouchers, setLoadingVouchers] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [redeeming, setRedeeming] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [hasSearched, setHasSearched] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    // Load available vouchers on mount
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "VouchersPage.useEffect": ()=>{
            loadAvailableVouchers();
        }
    }["VouchersPage.useEffect"], []);
    // Get email/phone - prioritize authenticated user, then URL params or localStorage
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "VouchersPage.useEffect": ()=>{
            const loadUserInfo = {
                "VouchersPage.useEffect.loadUserInfo": async ()=>{
                    // First, try to get authenticated user's email
                    const authResult = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$app$2f$dashboard$2f$data$3a$9049d1__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["getAuthenticatedUser"])();
                    let userEmail = '';
                    let userPhone = '';
                    if (authResult.success && authResult.email) {
                        // Use authenticated user's email
                        userEmail = authResult.email;
                    } else {
                        // Fall back to URL params or localStorage (for non-authenticated access)
                        const urlEmail = searchParams.get('email');
                        const urlPhone = searchParams.get('phone');
                        const storedEmail = localStorage.getItem('dashboard_email');
                        const storedPhone = localStorage.getItem('dashboard_phone');
                        userEmail = urlEmail || storedEmail || '';
                        userPhone = urlPhone || storedPhone || '';
                    }
                    if (userEmail || userPhone) {
                        setEmail(userEmail);
                        setPhone(userPhone);
                        setHasSearched(true);
                        loadVoucherHistory(userEmail, userPhone || undefined);
                    }
                }
            }["VouchersPage.useEffect.loadUserInfo"];
            loadUserInfo();
        // eslint-disable-next-line react-hooks/exhaustive-deps
        }
    }["VouchersPage.useEffect"], [
        searchParams
    ]);
    // Load voucher history when tab changes to history
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "VouchersPage.useEffect": ()=>{
            if (activeTab === 'history' && email) {
                loadVoucherHistory(email, phone || undefined);
            }
        // eslint-disable-next-line react-hooks/exhaustive-deps
        }
    }["VouchersPage.useEffect"], [
        activeTab,
        email,
        phone
    ]);
    const loadAvailableVouchers = async ()=>{
        try {
            setLoadingVouchers(true);
            const response = await fetch('/api/voucher/list?status=active&limit=100');
            const result = await response.json();
            if (response.ok && result.success && result.vouchers) {
                setAvailableVouchers(result.vouchers);
            } else {
                console.error('Error loading vouchers:', result.error);
            }
        } catch (error) {
            console.error('Error loading vouchers:', error);
        } finally{
            setLoadingVouchers(false);
        }
    };
    const loadVoucherHistory = async (userEmail, userPhone)=>{
        try {
            setLoading(true);
            const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$app$2f$dashboard$2f$data$3a$a16329__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["getVoucherRedemptions"])(userEmail, userPhone);
            if (result.success && result.redemptions) {
                setVoucherHistory(result.redemptions);
            } else if (result.error) {
                console.error('Error loading voucher history:', result.error);
                // Don't show error toast for empty history
                if (result.error !== 'No redemptions found') {
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error(result.error);
                }
            }
        } catch (error) {
            console.error('Error loading voucher history:', error);
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('Failed to load voucher history');
        } finally{
            setLoading(false);
        }
    };
    const handleRedeem = async (e)=>{
        e.preventDefault();
        if (!voucherCode.trim()) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('Please enter a voucher code');
            return;
        }
        if (!email && !phone) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('Please provide your email or phone number');
            return;
        }
        try {
            setRedeeming(true);
            const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$app$2f$dashboard$2f$data$3a$3a7d19__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$text$2f$javascript$3e$__["redeemVoucher"])(voucherCode.trim(), email, phone || undefined);
            if (result.success) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success(`Voucher redeemed successfully! R${result.amount?.toFixed(2)} has been added to your ShaleanCred balance.`);
                setVoucherCode('');
                // Reload history if on history tab
                if (activeTab === 'history' && email) {
                    loadVoucherHistory(email, phone || undefined);
                }
            } else {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error(result.error || 'Failed to redeem voucher');
            }
        } catch (error) {
            console.error('Error redeeming voucher:', error);
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error('An unexpected error occurred');
        } finally{
            setRedeeming(false);
        }
    };
    const totalItems = voucherHistory.length;
    const totalPages = Math.ceil(totalItems / itemsPerPage) || 1;
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const currentItems = voucherHistory.slice(startIndex, endIndex);
    const startItem = totalItems === 0 ? 0 : startIndex + 1;
    const endItem = Math.min(endIndex, totalItems);
    const formatDate = (dateString)=>{
        const date = new Date(dateString);
        return date.toLocaleDateString('en-ZA', {
            year: 'numeric',
            month: 'short',
            day: 'numeric'
        });
    };
    const handlePreviousPage = ()=>{
        if (currentPage > 1) {
            setCurrentPage(currentPage - 1);
        }
    };
    const handleNextPage = ()=>{
        if (currentPage < totalPages) {
            setCurrentPage(currentPage + 1);
        }
    };
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "space-y-4 sm:space-y-6 w-full max-w-full overflow-x-hidden",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h1", {
                    className: "text-2xl sm:text-3xl md:text-4xl font-bold",
                    children: "Vouchers"
                }, void 0, false, {
                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                    lineNumber: 195,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                lineNumber: 194,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$tabs$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Tabs"], {
                value: activeTab,
                onValueChange: setActiveTab,
                className: "w-full",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$tabs$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TabsList"], {
                        className: "h-auto bg-transparent p-0 gap-6 border-b border-border rounded-none",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$tabs$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TabsTrigger"], {
                                value: "redeem",
                                className: "px-0 py-2 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none",
                                children: "Redeem"
                            }, void 0, false, {
                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                lineNumber: 201,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$tabs$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TabsTrigger"], {
                                value: "history",
                                className: "px-0 py-2 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none",
                                children: "History"
                            }, void 0, false, {
                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                lineNumber: 207,
                                columnNumber: 11
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                        lineNumber: 200,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$tabs$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TabsContent"], {
                        value: "redeem",
                        className: "mt-6 space-y-6",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "space-y-4",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h2", {
                                        className: "text-xl font-bold",
                                        children: "Redeem Gift Voucher"
                                    }, void 0, false, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 219,
                                        columnNumber: 13
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("form", {
                                        onSubmit: handleRedeem,
                                        className: "space-y-3",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "space-y-2",
                                                children: [
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$label$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Label"], {
                                                        htmlFor: "voucher-code",
                                                        children: "Gift Voucher Code"
                                                    }, void 0, false, {
                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                        lineNumber: 223,
                                                        columnNumber: 17
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$input$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Input"], {
                                                        id: "voucher-code",
                                                        type: "text",
                                                        placeholder: "Enter voucher code",
                                                        value: voucherCode,
                                                        onChange: (e)=>setVoucherCode(e.target.value.toUpperCase()),
                                                        className: "w-full",
                                                        disabled: redeeming
                                                    }, void 0, false, {
                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                        lineNumber: 224,
                                                        columnNumber: 17
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 222,
                                                columnNumber: 15
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                className: "text-sm text-muted-foreground",
                                                children: "Gift voucher will be redeemed into ShaleanCred"
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 235,
                                                columnNumber: 15
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                variant: "default",
                                                className: "w-full sm:w-auto",
                                                type: "submit",
                                                disabled: redeeming || !voucherCode.trim(),
                                                children: redeeming ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                                                    children: [
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$loader$2d$circle$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Loader2$3e$__["Loader2"], {
                                                            className: "mr-2 h-4 w-4 animate-spin"
                                                        }, void 0, false, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 247,
                                                            columnNumber: 21
                                                        }, this),
                                                        "Redeeming..."
                                                    ]
                                                }, void 0, true) : 'Redeem Gift Voucher'
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 239,
                                                columnNumber: 15
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 221,
                                        columnNumber: 13
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                lineNumber: 218,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "border-t border-border"
                            }, void 0, false, {
                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                lineNumber: 258,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "space-y-4",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h2", {
                                        className: "text-xl font-bold",
                                        children: "Available Gift Vouchers"
                                    }, void 0, false, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 262,
                                        columnNumber: 13
                                    }, this),
                                    loadingVouchers ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "py-8 text-center",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$loader$2d$circle$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Loader2$3e$__["Loader2"], {
                                                className: "h-6 w-6 animate-spin mx-auto mb-2"
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 265,
                                                columnNumber: 17
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                className: "text-sm text-muted-foreground",
                                                children: "Loading vouchers..."
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 266,
                                                columnNumber: 17
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 264,
                                        columnNumber: 15
                                    }, this) : availableVouchers.length === 0 ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                        className: "text-sm text-muted-foreground",
                                        children: "No available vouchers at this time."
                                    }, void 0, false, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 269,
                                        columnNumber: 15
                                    }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "border rounded-lg overflow-hidden",
                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Table"], {
                                            children: [
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableHeader"], {
                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableRow"], {
                                                        children: [
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableHead"], {
                                                                children: "Voucher Code"
                                                            }, void 0, false, {
                                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                lineNumber: 277,
                                                                columnNumber: 23
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableHead"], {
                                                                children: "Amount"
                                                            }, void 0, false, {
                                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                lineNumber: 278,
                                                                columnNumber: 23
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableHead"], {
                                                                children: "Status"
                                                            }, void 0, false, {
                                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                lineNumber: 279,
                                                                columnNumber: 23
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableHead"], {
                                                                children: "Created"
                                                            }, void 0, false, {
                                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                lineNumber: 280,
                                                                columnNumber: 23
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableHead"], {
                                                                children: "Valid Until"
                                                            }, void 0, false, {
                                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                lineNumber: 281,
                                                                columnNumber: 23
                                                            }, this)
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                        lineNumber: 276,
                                                        columnNumber: 21
                                                    }, this)
                                                }, void 0, false, {
                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                    lineNumber: 275,
                                                    columnNumber: 19
                                                }, this),
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableBody"], {
                                                    children: availableVouchers.map((voucher)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableRow"], {
                                                            children: [
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableCell"], {
                                                                    className: "text-sm font-mono",
                                                                    children: voucher.code
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 287,
                                                                    columnNumber: 25
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableCell"], {
                                                                    className: "text-sm font-medium",
                                                                    children: [
                                                                        "R",
                                                                        voucher.amount.toFixed(2)
                                                                    ]
                                                                }, void 0, true, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 290,
                                                                    columnNumber: 25
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableCell"], {
                                                                    className: "text-sm",
                                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                        className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${voucher.status === 'active' ? 'bg-green-100 text-green-800' : voucher.status === 'redeemed' ? 'bg-gray-100 text-gray-800' : 'bg-red-100 text-red-800'}`,
                                                                        children: voucher.status
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                        lineNumber: 294,
                                                                        columnNumber: 27
                                                                    }, this)
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 293,
                                                                    columnNumber: 25
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableCell"], {
                                                                    className: "text-sm text-muted-foreground",
                                                                    children: voucher.created_at ? typeof voucher.created_at === 'string' ? formatDate(voucher.created_at) : new Date(voucher.created_at).toLocaleDateString('en-ZA', {
                                                                        year: 'numeric',
                                                                        month: 'short',
                                                                        day: 'numeric'
                                                                    }) : 'N/A'
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 304,
                                                                    columnNumber: 25
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableCell"], {
                                                                    className: "text-sm text-muted-foreground",
                                                                    children: voucher.valid_until ? typeof voucher.valid_until === 'string' ? voucher.valid_until.includes('T') ? formatDate(voucher.valid_until) : new Date(voucher.valid_until).toLocaleDateString('en-ZA', {
                                                                        year: 'numeric',
                                                                        month: 'short',
                                                                        day: 'numeric'
                                                                    }) : new Date(voucher.valid_until).toLocaleDateString('en-ZA', {
                                                                        year: 'numeric',
                                                                        month: 'short',
                                                                        day: 'numeric'
                                                                    }) : 'No expiry'
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 315,
                                                                    columnNumber: 25
                                                                }, this)
                                                            ]
                                                        }, voucher.id, true, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 286,
                                                            columnNumber: 23
                                                        }, this))
                                                }, void 0, false, {
                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                    lineNumber: 284,
                                                    columnNumber: 19
                                                }, this)
                                            ]
                                        }, void 0, true, {
                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                            lineNumber: 274,
                                            columnNumber: 17
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 273,
                                        columnNumber: 15
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                lineNumber: 261,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "border-t border-border"
                            }, void 0, false, {
                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                lineNumber: 341,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardHeader"], {
                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardTitle"], {
                                            children: "Buy a Gift Voucher"
                                        }, void 0, false, {
                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                            lineNumber: 346,
                                            columnNumber: 15
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 345,
                                        columnNumber: 13
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardContent"], {
                                        className: "space-y-4",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                className: "text-muted-foreground",
                                                children: "Looking to buy a gift voucher? You buy a gift voucher and send it to someone special who's in need of a good clean."
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 349,
                                                columnNumber: 15
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                variant: "default",
                                                onClick: ()=>router.push('/get-voucher'),
                                                children: "Buy Vouchers"
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 352,
                                                columnNumber: 15
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 348,
                                        columnNumber: 13
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                lineNumber: 344,
                                columnNumber: 11
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                        lineNumber: 216,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$tabs$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TabsContent"], {
                        value: "history",
                        className: "mt-6 space-y-6",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "space-y-4",
                                children: [
                                    loading ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "py-12 text-center",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$loader$2d$circle$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Loader2$3e$__["Loader2"], {
                                                className: "h-6 w-6 animate-spin mx-auto mb-2"
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 365,
                                                columnNumber: 17
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                className: "text-muted-foreground",
                                                children: "Loading voucher history..."
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 366,
                                                columnNumber: 17
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 364,
                                        columnNumber: 15
                                    }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "border rounded-lg overflow-hidden",
                                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Table"], {
                                                children: [
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableHeader"], {
                                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableRow"], {
                                                            children: [
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableHead"], {
                                                                    children: "Date"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 374,
                                                                    columnNumber: 25
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableHead"], {
                                                                    children: "Voucher Code"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 375,
                                                                    columnNumber: 25
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableHead"], {
                                                                    children: "Amount"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 376,
                                                                    columnNumber: 25
                                                                }, this)
                                                            ]
                                                        }, void 0, true, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 373,
                                                            columnNumber: 23
                                                        }, this)
                                                    }, void 0, false, {
                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                        lineNumber: 372,
                                                        columnNumber: 21
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableBody"], {
                                                        children: currentItems.length === 0 ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableRow"], {
                                                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableCell"], {
                                                                colSpan: 3,
                                                                className: "text-center py-8 text-muted-foreground",
                                                                children: "No voucher redemptions found"
                                                            }, void 0, false, {
                                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                lineNumber: 382,
                                                                columnNumber: 27
                                                            }, this)
                                                        }, void 0, false, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 381,
                                                            columnNumber: 25
                                                        }, this) : currentItems.map((voucher)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableRow"], {
                                                                children: [
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableCell"], {
                                                                        className: "text-sm",
                                                                        children: formatDate(voucher.redeemed_at)
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                        lineNumber: 389,
                                                                        columnNumber: 29
                                                                    }, this),
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableCell"], {
                                                                        className: "text-sm font-mono",
                                                                        children: voucher.voucher_code
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                        lineNumber: 392,
                                                                        columnNumber: 29
                                                                    }, this),
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$table$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TableCell"], {
                                                                        className: "text-sm font-medium",
                                                                        children: [
                                                                            "R",
                                                                            voucher.amount.toFixed(2)
                                                                        ]
                                                                    }, void 0, true, {
                                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                        lineNumber: 395,
                                                                        columnNumber: 29
                                                                    }, this)
                                                                ]
                                                            }, voucher.id, true, {
                                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                lineNumber: 388,
                                                                columnNumber: 27
                                                            }, this))
                                                    }, void 0, false, {
                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                        lineNumber: 379,
                                                        columnNumber: 21
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 371,
                                                columnNumber: 19
                                            }, this)
                                        }, void 0, false, {
                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                            lineNumber: 370,
                                            columnNumber: 17
                                        }, this)
                                    }, void 0, false),
                                    totalItems > 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "flex items-center justify-between",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "flex items-center gap-2",
                                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Select"], {
                                                    value: itemsPerPage.toString(),
                                                    onValueChange: (value)=>{
                                                        setItemsPerPage(Number(value));
                                                        setCurrentPage(1);
                                                    },
                                                    children: [
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectTrigger"], {
                                                            className: "w-[120px] h-9",
                                                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectValue"], {}, void 0, false, {
                                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                lineNumber: 420,
                                                                columnNumber: 23
                                                            }, this)
                                                        }, void 0, false, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 419,
                                                            columnNumber: 21
                                                        }, this),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectContent"], {
                                                            children: [
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectItem"], {
                                                                    value: "5",
                                                                    children: "5 Items"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 423,
                                                                    columnNumber: 23
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectItem"], {
                                                                    value: "10",
                                                                    children: "10 Items"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 424,
                                                                    columnNumber: 23
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectItem"], {
                                                                    value: "20",
                                                                    children: "20 Items"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 425,
                                                                    columnNumber: 23
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectItem"], {
                                                                    value: "50",
                                                                    children: "50 Items"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 426,
                                                                    columnNumber: 23
                                                                }, this)
                                                            ]
                                                        }, void 0, true, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 422,
                                                            columnNumber: 21
                                                        }, this)
                                                    ]
                                                }, void 0, true, {
                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                    lineNumber: 412,
                                                    columnNumber: 19
                                                }, this)
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 411,
                                                columnNumber: 17
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "flex items-center gap-2",
                                                children: [
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                        variant: "default",
                                                        size: "sm",
                                                        onClick: handlePreviousPage,
                                                        disabled: currentPage === 1,
                                                        className: "h-9",
                                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$left$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronLeft$3e$__["ChevronLeft"], {
                                                            className: "h-4 w-4"
                                                        }, void 0, false, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 440,
                                                            columnNumber: 21
                                                        }, this)
                                                    }, void 0, false, {
                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                        lineNumber: 433,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                        className: "text-sm text-muted-foreground px-2",
                                                        children: [
                                                            startItem,
                                                            "-",
                                                            endItem,
                                                            " of ",
                                                            totalItems
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                        lineNumber: 442,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                        variant: "default",
                                                        size: "sm",
                                                        onClick: handleNextPage,
                                                        disabled: currentPage >= totalPages,
                                                        className: "h-9",
                                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$right$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronRight$3e$__["ChevronRight"], {
                                                            className: "h-4 w-4"
                                                        }, void 0, false, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 452,
                                                            columnNumber: 21
                                                        }, this)
                                                    }, void 0, false, {
                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                        lineNumber: 445,
                                                        columnNumber: 19
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 432,
                                                columnNumber: 17
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 409,
                                        columnNumber: 15
                                    }, this),
                                    totalItems === 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "flex items-center justify-between",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "flex items-center gap-2",
                                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Select"], {
                                                    value: itemsPerPage.toString(),
                                                    onValueChange: (value)=>{
                                                        setItemsPerPage(Number(value));
                                                        setCurrentPage(1);
                                                    },
                                                    children: [
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectTrigger"], {
                                                            className: "w-[120px] h-9",
                                                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectValue"], {}, void 0, false, {
                                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                lineNumber: 470,
                                                                columnNumber: 23
                                                            }, this)
                                                        }, void 0, false, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 469,
                                                            columnNumber: 21
                                                        }, this),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectContent"], {
                                                            children: [
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectItem"], {
                                                                    value: "5",
                                                                    children: "5 Items"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 473,
                                                                    columnNumber: 23
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectItem"], {
                                                                    value: "10",
                                                                    children: "10 Items"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 474,
                                                                    columnNumber: 23
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectItem"], {
                                                                    value: "20",
                                                                    children: "20 Items"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 475,
                                                                    columnNumber: 23
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectItem"], {
                                                                    value: "50",
                                                                    children: "50 Items"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                                    lineNumber: 476,
                                                                    columnNumber: 23
                                                                }, this)
                                                            ]
                                                        }, void 0, true, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 472,
                                                            columnNumber: 21
                                                        }, this)
                                                    ]
                                                }, void 0, true, {
                                                    fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                    lineNumber: 462,
                                                    columnNumber: 19
                                                }, this)
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 461,
                                                columnNumber: 17
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "flex items-center gap-2",
                                                children: [
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                        variant: "default",
                                                        size: "sm",
                                                        disabled: true,
                                                        className: "h-9",
                                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$left$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronLeft$3e$__["ChevronLeft"], {
                                                            className: "h-4 w-4"
                                                        }, void 0, false, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 488,
                                                            columnNumber: 21
                                                        }, this)
                                                    }, void 0, false, {
                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                        lineNumber: 482,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                        className: "text-sm text-muted-foreground px-2",
                                                        children: "1-0 of 0"
                                                    }, void 0, false, {
                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                        lineNumber: 490,
                                                        columnNumber: 19
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                        variant: "default",
                                                        size: "sm",
                                                        disabled: true,
                                                        className: "h-9",
                                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$chevron$2d$right$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ChevronRight$3e$__["ChevronRight"], {
                                                            className: "h-4 w-4"
                                                        }, void 0, false, {
                                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                            lineNumber: 499,
                                                            columnNumber: 21
                                                        }, this)
                                                    }, void 0, false, {
                                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                        lineNumber: 493,
                                                        columnNumber: 19
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 481,
                                                columnNumber: 17
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 460,
                                        columnNumber: 15
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                lineNumber: 362,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardHeader"], {
                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardTitle"], {
                                            children: "Buy a Gift Voucher"
                                        }, void 0, false, {
                                            fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                            lineNumber: 509,
                                            columnNumber: 15
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 508,
                                        columnNumber: 13
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardContent"], {
                                        className: "space-y-4",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                                className: "text-muted-foreground",
                                                children: "Looking to buy a gift voucher? You buy a gift voucher and send it to someone special who's in need of a good clean."
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 512,
                                                columnNumber: 15
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                variant: "default",
                                                onClick: ()=>router.push('/get-voucher'),
                                                children: "Buy Vouchers"
                                            }, void 0, false, {
                                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                                lineNumber: 515,
                                                columnNumber: 15
                                            }, this)
                                        ]
                                    }, void 0, true, {
                                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                        lineNumber: 511,
                                        columnNumber: 13
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                                lineNumber: 507,
                                columnNumber: 11
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/app/dashboard/vouchers/page.tsx",
                        lineNumber: 360,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/app/dashboard/vouchers/page.tsx",
                lineNumber: 199,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/app/dashboard/vouchers/page.tsx",
        lineNumber: 192,
        columnNumber: 5
    }, this);
}
_s(VouchersPage, "nlkKJcWIdkXf7BOmLxScv7jj/qA=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useSearchParams"],
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRouter"]
    ];
});
_c = VouchersPage;
var _c;
__turbopack_context__.k.register(_c, "VouchersPage");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
]);

//# sourceMappingURL=_b1bdbb41._.js.map