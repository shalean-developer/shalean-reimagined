{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/27825/shalean-v2/shalean-reimagined/app/admin/actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport { createClient } from '@/lib/supabase/server';\r\nimport { createAdminClient } from '@/lib/supabase/server-admin';\r\nimport { Booking } from '@/types/booking';\r\nimport { Cleaner } from '@/types/booking';\r\nimport { Profile } from '@/types/profile';\r\n\r\n/**\r\n * Check if user is an admin\r\n * Admins are identified by email pattern: *@admin.shalean.local\r\n * or user metadata with role: 'admin'\r\n */\r\nfunction isAdminUser(email: string | undefined, userMetadata?: any): boolean {\r\n  if (!email) return false;\r\n  \r\n  // Check email pattern\r\n  if (email.includes('@admin.shalean.local')) {\r\n    return true;\r\n  }\r\n  \r\n  // Check user metadata\r\n  if (userMetadata?.role === 'admin') {\r\n    return true;\r\n  }\r\n  \r\n  // Hardcoded admin emails (fallback)\r\n  const adminEmails = [\r\n    'admin@shalean.local',\r\n    'admin@admin.shalean.local',\r\n    'admin@shalean.com',\r\n  ];\r\n  \r\n  return adminEmails.includes(email.toLowerCase());\r\n}\r\n\r\n/**\r\n * Get current authenticated admin\r\n */\r\nexport async function getCurrentAdmin(): Promise<{\r\n  success: boolean;\r\n  admin?: {\r\n    id: string;\r\n    email: string;\r\n    name?: string;\r\n  };\r\n  error?: string;\r\n}> {\r\n  try {\r\n    const supabase = await createClient();\r\n    const { data: { user }, error: authError } = await supabase.auth.getUser();\r\n\r\n    if (authError || !user) {\r\n      return { success: false, error: 'Not authenticated' };\r\n    }\r\n\r\n    // Check if user is admin\r\n    if (!isAdminUser(user.email, user.user_metadata)) {\r\n      return { success: false, error: 'Not an admin user' };\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      admin: {\r\n        id: user.id,\r\n        email: user.email!,\r\n        name: user.user_metadata?.name || user.email?.split('@')[0],\r\n      },\r\n    };\r\n  } catch (error) {\r\n    console.error('Error in getCurrentAdmin:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to get admin',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Authenticate admin (server-side)\r\n * Note: Actual authentication happens client-side, this just verifies the result\r\n */\r\nexport async function authenticateAdmin(\r\n  email: string,\r\n  password: string\r\n): Promise<{\r\n  success: boolean;\r\n  admin?: {\r\n    id: string;\r\n    email: string;\r\n    name?: string;\r\n  };\r\n  error?: string;\r\n}> {\r\n  try {\r\n    // Check if email matches admin pattern\r\n    if (!isAdminUser(email)) {\r\n      return { success: false, error: 'Not an admin email' };\r\n    }\r\n\r\n    // Authentication happens client-side, this is just validation\r\n    const supabase = await createClient();\r\n    const { data, error } = await supabase.auth.signInWithPassword({\r\n      email,\r\n      password,\r\n    });\r\n\r\n    if (error || !data.user) {\r\n      return { success: false, error: 'Invalid credentials' };\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      admin: {\r\n        id: data.user.id,\r\n        email: data.user.email!,\r\n        name: data.user.user_metadata?.name || data.user.email?.split('@')[0],\r\n      },\r\n    };\r\n  } catch (error) {\r\n    console.error('Error in authenticateAdmin:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Authentication failed',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get admin statistics\r\n */\r\nexport async function getAdminStats(): Promise<{\r\n  success: boolean;\r\n  stats?: {\r\n    totalBookings: number;\r\n    activeBookings: number;\r\n    totalRevenue: number;\r\n    monthlyRevenue: number;\r\n    totalCustomers: number;\r\n    totalCleaners: number;\r\n    activeCleaners: number;\r\n    completionRate: number;\r\n  };\r\n  error?: string;\r\n}> {\r\n  try {\r\n    // Verify admin access\r\n    const adminResult = await getCurrentAdmin();\r\n    if (!adminResult.success) {\r\n      return { success: false, error: 'Not authenticated as admin' };\r\n    }\r\n\r\n    const supabase = createAdminClient();\r\n\r\n    // Get all bookings\r\n    const { data: bookings, error: bookingsError } = await supabase\r\n      .from('bookings')\r\n      .select('status, total_amount, payment_status, service_date, created_at');\r\n\r\n    if (bookingsError) {\r\n      console.error('Error fetching bookings:', bookingsError);\r\n      return { success: false, error: bookingsError.message };\r\n    }\r\n\r\n    // Get all customers (profiles)\r\n    const { data: customers, error: customersError } = await supabase\r\n      .from('profiles')\r\n      .select('id');\r\n\r\n    if (customersError) {\r\n      console.error('Error fetching customers:', customersError);\r\n      return { success: false, error: customersError.message };\r\n    }\r\n\r\n    // Get all cleaners\r\n    const { data: cleaners, error: cleanersError } = await supabase\r\n      .from('cleaners')\r\n      .select('id, is_active');\r\n\r\n    if (cleanersError) {\r\n      console.error('Error fetching cleaners:', cleanersError);\r\n      return { success: false, error: cleanersError.message };\r\n    }\r\n\r\n    const today = new Date().toISOString().split('T')[0];\r\n    const now = new Date();\r\n    const firstDayOfMonth = new Date(now.getFullYear(), now.getMonth(), 1).toISOString().split('T')[0];\r\n\r\n    const allBookings = bookings || [];\r\n    const activeBookings = allBookings.filter(\r\n      (b) => ['pending', 'confirmed', 'on_my_way', 'started'].includes(b.status)\r\n    ).length;\r\n    \r\n    const paidBookings = allBookings.filter((b) => b.payment_status === 'paid');\r\n    const totalRevenue = paidBookings.reduce((sum, b) => sum + (b.total_amount || 0), 0);\r\n    \r\n    const monthlyPaidBookings = allBookings.filter(\r\n      (b) => b.payment_status === 'paid' && b.service_date >= firstDayOfMonth\r\n    );\r\n    const monthlyRevenue = monthlyPaidBookings.reduce((sum, b) => sum + (b.total_amount || 0), 0);\r\n\r\n    const completedBookings = allBookings.filter((b) => b.status === 'completed').length;\r\n    const completionRate = allBookings.length > 0 ? (completedBookings / allBookings.length) * 100 : 0;\r\n\r\n    const allCleaners = cleaners || [];\r\n    const activeCleaners = allCleaners.filter((c) => c.is_active).length;\r\n\r\n    return {\r\n      success: true,\r\n      stats: {\r\n        totalBookings: allBookings.length,\r\n        activeBookings,\r\n        totalRevenue,\r\n        monthlyRevenue,\r\n        totalCustomers: customers?.length || 0,\r\n        totalCleaners: allCleaners.length,\r\n        activeCleaners,\r\n        completionRate: Math.round(completionRate * 100) / 100,\r\n      },\r\n    };\r\n  } catch (error) {\r\n    console.error('Error in getAdminStats:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to fetch stats',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get all bookings with optional filters\r\n */\r\nexport async function getAllBookings(\r\n  filter?: {\r\n    status?: string;\r\n    dateFrom?: string;\r\n    dateTo?: string;\r\n    customerEmail?: string;\r\n    cleanerId?: string;\r\n  }\r\n): Promise<{\r\n  success: boolean;\r\n  bookings?: Booking[];\r\n  error?: string;\r\n}> {\r\n  try {\r\n    // Verify admin access\r\n    const adminResult = await getCurrentAdmin();\r\n    if (!adminResult.success) {\r\n      return { success: false, error: 'Not authenticated as admin' };\r\n    }\r\n\r\n    const supabase = createAdminClient();\r\n\r\n    let query = supabase\r\n      .from('bookings')\r\n      .select('*')\r\n      .order('service_date', { ascending: false })\r\n      .order('created_at', { ascending: false });\r\n\r\n    if (filter) {\r\n      if (filter.status && filter.status !== 'all') {\r\n        query = query.eq('status', filter.status);\r\n      }\r\n      if (filter.dateFrom) {\r\n        query = query.gte('service_date', filter.dateFrom);\r\n      }\r\n      if (filter.dateTo) {\r\n        query = query.lte('service_date', filter.dateTo);\r\n      }\r\n      if (filter.customerEmail) {\r\n        query = query.eq('customer_email', filter.customerEmail);\r\n      }\r\n      if (filter.cleanerId) {\r\n        query = query.eq('preferred_cleaner_id', filter.cleanerId);\r\n      }\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n      console.error('Error fetching bookings:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, bookings: data || [] };\r\n  } catch (error) {\r\n    console.error('Error in getAllBookings:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to fetch bookings',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get all customers\r\n */\r\nexport async function getAllCustomers(): Promise<{\r\n  success: boolean;\r\n  customers?: Profile[];\r\n  error?: string;\r\n}> {\r\n  try {\r\n    // Verify admin access\r\n    const adminResult = await getCurrentAdmin();\r\n    if (!adminResult.success) {\r\n      return { success: false, error: 'Not authenticated as admin' };\r\n    }\r\n\r\n    const supabase = createAdminClient();\r\n\r\n    const { data, error } = await supabase\r\n      .from('profiles')\r\n      .select('*')\r\n      .order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n      console.error('Error fetching customers:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, customers: data || [] };\r\n  } catch (error) {\r\n    console.error('Error in getAllCustomers:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to fetch customers',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Get all cleaners\r\n */\r\nexport async function getAllCleaners(): Promise<{\r\n  success: boolean;\r\n  cleaners?: Cleaner[];\r\n  error?: string;\r\n}> {\r\n  try {\r\n    // Verify admin access\r\n    const adminResult = await getCurrentAdmin();\r\n    if (!adminResult.success) {\r\n      return { success: false, error: 'Not authenticated as admin' };\r\n    }\r\n\r\n    const supabase = createAdminClient();\r\n\r\n    const { data, error } = await supabase\r\n      .from('cleaners')\r\n      .select('*')\r\n      .order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n      console.error('Error fetching cleaners:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n\r\n    return { success: true, cleaners: data || [] };\r\n  } catch (error) {\r\n    console.error('Error in getAllCleaners:', error);\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : 'Failed to fetch cleaners',\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAwOsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,kDAAA"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/27825/shalean-v2/shalean-reimagined/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"rounded-lg border bg-card text-card-foreground shadow-sm\", className)} {...props} />\r\n));\r\nCard.displayName = \"Card\";\r\n\r\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\r\n  ({ className, ...props }, ref) => (\r\n    <div ref={ref} className={cn(\"flex flex-col space-y-1.5 p-6\", className)} {...props} />\r\n  ),\r\n);\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\nconst CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\r\n  ({ className, ...props }, ref) => (\r\n    <h3 ref={ref} className={cn(\"text-2xl font-semibold leading-none tracking-tight\", className)} {...props} />\r\n  ),\r\n);\r\nCardTitle.displayName = \"CardTitle\";\r\n\r\nconst CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\r\n  ({ className, ...props }, ref) => (\r\n    <p ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\r\n  ),\r\n);\r\nCardDescription.displayName = \"CardDescription\";\r\n\r\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\r\n  ({ className, ...props }, ref) => <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />,\r\n);\r\nCardContent.displayName = \"CardContent\";\r\n\r\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\r\n  ({ className, ...props }, ref) => (\r\n    <div ref={ref} className={cn(\"flex items-center p-6 pt-0\", className)} {...props} />\r\n  ),\r\n);\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAAuD,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC5G,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,4DAA4D;QAAa,GAAG,KAAK;;;;;;AAEhH,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CACjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;AAGvF,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAChC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QAAG,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,sDAAsD;QAAa,GAAG,KAAK;;;;;;AAG3G,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CACtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QAAE,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;AAGrF,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAClC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAAQ,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAElG,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CACjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAAa,GAAG,KAAK;;;;;;AAGpF,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/27825/shalean-v2/shalean-reimagined/src/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Tabs = TabsPrimitive.Root;\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTabsList.displayName = TabsPrimitive.List.displayName;\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTabsContent.displayName = TabsPrimitive.Content.displayName;\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,wKAAkB;AAE/B,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,wKAAkB;QACjB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG,wKAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,uYACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/27825/shalean-v2/shalean-reimagined/app/admin/%28dashboard%29/bookings/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { getAllBookings } from '../../actions';\r\nimport { Booking } from '@/types/booking';\r\nimport { Loader2, Calendar } from 'lucide-react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Input } from '@/components/ui/input';\r\nimport Link from 'next/link';\r\nimport { format } from 'date-fns';\r\n\r\nexport default function AdminBookingsPage() {\r\n  const [bookings, setBookings] = useState<Booking[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState<'all' | 'pending' | 'confirmed' | 'completed' | 'cancelled'>('all');\r\n  const [search, setSearch] = useState('');\r\n\r\n  // Get all bookings\r\n  useQuery({\r\n    queryKey: ['admin-all-bookings', filter],\r\n    queryFn: async () => {\r\n      const result = await getAllBookings({\r\n        status: filter === 'all' ? undefined : filter,\r\n      });\r\n      if (result.success && result.bookings) {\r\n        setBookings(result.bookings);\r\n        setLoading(false);\r\n        return result.bookings;\r\n      }\r\n      setLoading(false);\r\n      return [];\r\n    },\r\n    staleTime: 2 * 60 * 1000,\r\n  });\r\n\r\n  const filteredBookings = bookings.filter((booking) => {\r\n    const searchLower = search.toLowerCase();\r\n    return (\r\n      booking.booking_number.toLowerCase().includes(searchLower) ||\r\n      booking.customer_email.toLowerCase().includes(searchLower) ||\r\n      booking.customer_first_name.toLowerCase().includes(searchLower) ||\r\n      booking.customer_last_name.toLowerCase().includes(searchLower) ||\r\n      booking.customer_phone.toLowerCase().includes(searchLower)\r\n    );\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <Loader2 className=\"w-6 h-6 animate-spin text-primary\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const statusColors = {\r\n    pending: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400',\r\n    confirmed: 'bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400',\r\n    on_my_way: 'bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400',\r\n    started: 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-400',\r\n    completed: 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400',\r\n    cancelled: 'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400',\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 w-full max-w-full overflow-x-hidden\">\r\n      <div className=\"space-y-2\">\r\n        <h1 className=\"text-2xl sm:text-3xl md:text-4xl font-bold\">Bookings Management</h1>\r\n        <p className=\"text-muted-foreground\">\r\n          View and manage all bookings\r\n        </p>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>All Bookings</CardTitle>\r\n          <CardDescription>\r\n            Manage bookings across the platform\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"mb-4 space-y-4\">\r\n            <div>\r\n              <Input\r\n                placeholder=\"Search bookings by number, customer name, email, or phone...\"\r\n                value={search}\r\n                onChange={(e) => setSearch(e.target.value)}\r\n                className=\"max-w-sm\"\r\n              />\r\n            </div>\r\n            <Tabs value={filter} onValueChange={(value) => setFilter(value as any)}>\r\n              <TabsList>\r\n                <TabsTrigger value=\"all\">All ({bookings.length})</TabsTrigger>\r\n                <TabsTrigger value=\"pending\">\r\n                  Pending ({bookings.filter((b) => b.status === 'pending').length})\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"confirmed\">\r\n                  Confirmed ({bookings.filter((b) => b.status === 'confirmed').length})\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"completed\">\r\n                  Completed ({bookings.filter((b) => b.status === 'completed').length})\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"cancelled\">\r\n                  Cancelled ({bookings.filter((b) => b.status === 'cancelled').length})\r\n                </TabsTrigger>\r\n              </TabsList>\r\n            </Tabs>\r\n          </div>\r\n\r\n          <div className=\"rounded-md border\">\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-b bg-muted/50\">\r\n                    <th className=\"h-12 px-4 text-left align-middle font-medium\">Booking #</th>\r\n                    <th className=\"h-12 px-4 text-left align-middle font-medium\">Customer</th>\r\n                    <th className=\"h-12 px-4 text-left align-middle font-medium\">Service</th>\r\n                    <th className=\"h-12 px-4 text-left align-middle font-medium\">Date</th>\r\n                    <th className=\"h-12 px-4 text-left align-middle font-medium\">Status</th>\r\n                    <th className=\"h-12 px-4 text-left align-middle font-medium\">Amount</th>\r\n                    <th className=\"h-12 px-4 text-left align-middle font-medium\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {filteredBookings.length === 0 ? (\r\n                    <tr>\r\n                      <td colSpan={7} className=\"h-24 text-center text-muted-foreground\">\r\n                        No bookings found\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    filteredBookings.map((booking) => (\r\n                      <tr key={booking.id} className=\"border-b\">\r\n                        <td className=\"p-4 font-mono text-sm\">#{booking.booking_number}</td>\r\n                        <td className=\"p-4\">\r\n                          <div>\r\n                            <div className=\"font-medium\">\r\n                              {booking.customer_first_name} {booking.customer_last_name}\r\n                            </div>\r\n                            <div className=\"text-sm text-muted-foreground\">{booking.customer_email}</div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"p-4\">{booking.service_type}</td>\r\n                        <td className=\"p-4\">\r\n                          {format(new Date(booking.service_date), 'MMM d, yyyy')}\r\n                        </td>\r\n                        <td className=\"p-4\">\r\n                          <span\r\n                            className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                              statusColors[booking.status as keyof typeof statusColors] ||\r\n                              'bg-gray-100 text-gray-800'\r\n                            }`}\r\n                          >\r\n                            {booking.status}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"p-4 font-medium\">R{booking.total_amount.toFixed(2)}</td>\r\n                        <td className=\"p-4\">\r\n                          <Button variant=\"outline\" size=\"sm\" asChild>\r\n                            <Link href={`/admin/bookings/${booking.id}`}>View</Link>\r\n                          </Button>\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}